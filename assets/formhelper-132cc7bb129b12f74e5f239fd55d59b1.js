function jQueryFormHelper(element,options){this.options=jQuery.extend({},jQueryFormHelper.DEFAULTS,options||{}),this.element=element}function checkLuhn(ccNumber){var sum=0,length=ccNumber.length,parity=length%2;for(i=0;i<length;i++){var digit=parseInt(ccNumber.substr(i,1));i%2==parity&&(digit*=2),digit>9&&(digit-=9),sum+=digit}return sum%10==0}
/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2011 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license) 
	Version: 1.3
*/
!function($){var pasteEventName=($("body").is(".ie *")?"paste":"input")+".mask",iPhone=window.orientation!=undefined;$.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]",b:"[A-Z0-9]"},dataName:"rawMaskFn"},$.fn.extend({caret:function(begin,end){if(0!=this.length){if("number"==typeof begin)return end="number"==typeof end?end:begin,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(begin,end);else if(this.createTextRange){var range=this.createTextRange();range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select()}});if(this[0].setSelectionRange)begin=this[0].selectionStart,end=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-1e5),end=begin+range.text.length}return{begin:begin,end:end}}},unmask:function(){return this.trigger("unmask")},mask:function(mask,settings){if(!mask&&this.length>0)return $(this[0]).data($.mask.dataName)();settings=$.extend({placeholder:"_",completed:null},settings);var defs=$.mask.definitions,tests=[],partialPosition=mask.length,firstNonMaskPos=null,len=mask.length;return $.each(mask.split(""),function(i,c){"?"==c?(len--,partialPosition=i):defs[c]?(tests.push(new RegExp(defs[c])),null==firstNonMaskPos&&(firstNonMaskPos=tests.length-1)):tests.push(null)}),this.trigger("unmask").each(function(){function seekNext(pos){for(;++pos<=len&&!tests[pos];);return pos}function seekPrev(pos){for(;--pos>=0&&!tests[pos];);return pos}function shiftL(begin,end){if(!(begin<0)){for(var i=begin,j=seekNext(end);i<len;i++)if(tests[i]){if(!(j<len&&tests[i].test(buffer[j])))break;buffer[i]=buffer[j],buffer[j]=settings.placeholder,j=seekNext(j)}writeBuffer(),input.caret(Math.max(firstNonMaskPos,begin))}}function shiftR(pos){for(var i=pos,c=settings.placeholder;i<len;i++)if(tests[i]){var j=seekNext(i),t=buffer[i];if(buffer[i]=c,!(j<len&&tests[j].test(t)))break;c=t}}function keydownEvent(e){var k=e.which;if(8==k||46==k||iPhone&&127==k){var pos=input.caret(),begin=pos.begin,end=pos.end;return end-begin==0&&(begin=46!=k?seekPrev(begin):end=seekNext(begin-1),end=46==k?seekNext(end):end),clearBuffer(begin,end),shiftL(begin,end-1),!1}if(27==k)return input.val(focusText),input.caret(0,checkVal()),!1}function keypressEvent(e){var k=e.which,pos=input.caret();if(e.ctrlKey||e.altKey||e.metaKey||k<32)return!0;if(k){pos.end-pos.begin!=0&&(clearBuffer(pos.begin,pos.end),shiftL(pos.begin,pos.end-1));var p=seekNext(pos.begin-1);if(p<len){var c=String.fromCharCode(k);if(input.attr("upcase")&&"true"==input.attr("upcase").toLowerCase()&&(c=c.toUpperCase()),tests[p].test(c)){shiftR(p),buffer[p]=c,writeBuffer();var next=seekNext(p);input.caret(next),settings.completed&&next>=len&&settings.completed.call(input)}}return!1}}function clearBuffer(start,end){for(var i=start;i<end&&i<len;i++)tests[i]&&(buffer[i]=settings.placeholder)}function writeBuffer(){return input.val(buffer.join("")).val()}function checkVal(allow){for(var test=input.val(),lastMatch=-1,i=0,pos=0;i<len;i++)if(tests[i]){for(buffer[i]=settings.placeholder;pos++<test.length;){var c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c,lastMatch=i;break}}if(pos>test.length)break}else buffer[i]==test.charAt(pos)&&i!=partialPosition&&(pos++,lastMatch=i);return!allow&&lastMatch+1<partialPosition?(input.val(""),clearBuffer(0,len)):(allow||lastMatch+1>=partialPosition)&&(writeBuffer(),allow||input.val(input.val().substring(0,lastMatch+1))),partialPosition?i:firstNonMaskPos}var input=$(this),buffer=$.map(mask.split(""),function(c){if("?"!=c)return defs[c]?settings.placeholder:c}),focusText=input.val();input.data($.mask.dataName,function(){return $.map(buffer,function(c,i){return tests[i]&&c!=settings.placeholder?c:null}).join("")}),input.attr("readonly")||input.one("unmask",function(){input.unbind(".mask").removeData($.mask.dataName)}).bind("focus.mask",function(){focusText=input.val();var pos=checkVal();writeBuffer();var moveCaret=function(){pos==mask.length?input.caret(0,pos):input.caret(pos)};($("body").is(".ie *")?moveCaret:function(){setTimeout(moveCaret,0)})()}).bind("blur.mask",function(){checkVal()}).bind("keydown.mask",keydownEvent).bind("keypress.mask",keypressEvent).bind(pasteEventName,function(){setTimeout(function(){input.caret(checkVal(!0))},0)}),checkVal()})}})}(jQuery),
// Copyright (c) 2011 Harvest http://getharvest.com
function(){var SelectParser;(SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(child){return"OPTGROUP"===child.nodeName?this.add_group(child):this.add_option(child)},SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;for(group_position=this.parsed.length,this.parsed.push({array_index:group_position,group:!0,label:group.label,children:0,disabled:group.disabled}),_results=[],_i=0,_len=(_ref=group.childNodes).length;_i<_len;_i++)option=_ref[_i],_results.push(this.add_option(option,group_position,group.disabled));return _results},SelectParser.prototype.add_option=function(option,group_position,group_disabled){if("OPTION"===option.nodeName)return""!==option.text?(null!=group_position&&(this.parsed[group_position].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:!0===group_disabled?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},SelectParser}()).select_to_array=function(select){var child,parser,_i,_len,_ref;for(parser=new SelectParser,_i=0,_len=(_ref=select.childNodes).length;_i<_len;_i++)child=_ref[_i],parser.add_node(child);return parser.parsed},this.SelectParser=SelectParser}.call(this),
/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var AbstractChosen,root;root=this,AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field,this.options=null!=options?options:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return AbstractChosen.prototype.set_default_values=function(){var _this=this;return this.click_test_action=function(evt){return _this.test_active_click(evt)},this.activate_action=function(evt){return _this.activate_field(evt)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity},AbstractChosen.prototype.set_default_text=function(){return this.form_field.getAttribute("label")?this.default_text=this.form_field.getAttribute("label"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(){var _this=this;if(!this.active_field)return setTimeout(function(){return _this.container_mousedown()},50)},AbstractChosen.prototype.input_blur=function(){var _this=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return _this.blur_test()},100)},AbstractChosen.prototype.result_add_option=function(option){var classes,style;return option.disabled?"":(option.dom_id=this.container_id+"_o_"+option.array_index,classes=option.selected&&this.is_multiple?[]:["active-result"],option.selected&&classes.push("result-selected"),null!=option.group_array_index&&classes.push("group-option"),""!==option.classes&&classes.push(option.classes),style=""!==option.style.cssText?' style="'+option.style+'"':"",'<li id="'+option.dom_id+'" class="'+classes.join(" ")+'"'+style+">"+option.html+"</li>")},AbstractChosen.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;switch(stroke=null!=(_ref=evt.which)?_ref:evt.keyCode,this.search_field_scale(),stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(evt.preventDefault(),this.results_showing)return this.result_select(evt);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.generate_field_id=function(){var new_id;return new_id=this.generate_random_id(),this.form_field.id=new_id,new_id},AbstractChosen.prototype.generate_random_char=function(){var chars,rand;return chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",rand=Math.floor(Math.random()*chars.length),chars.substring(rand,rand+1)},AbstractChosen}(),root.AbstractChosen=AbstractChosen}.call(this),
/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var $,Chosen,get_side_border_padding,root,__hasProp=Object.prototype.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};root=this,($=jQuery).fn.extend({chosen:function(options){return this.each(function(){var $this;if(!($this=$(this)).hasClass("chzn-done"))return $this.data("chosen",new Chosen(this,options))})}}),Chosen=function(_super){function Chosen(){Chosen.__super__.constructor.apply(this,arguments)}return __extends(Chosen,_super),Chosen.prototype.setup=function(){return this.form_field_jq=$(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},Chosen.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},Chosen.prototype.set_up_html=function(){var container_div,dd_top,dd_width,sf_width;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),container_div=$("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?container_div.html('<ul class="chzn-choices"><li class="search-field"><input ignore="true" type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):container_div.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input ignore="true" type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(container_div),this.container=$("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),dd_top=this.container.height(),dd_width=this.f_width-get_side_border_padding(this.dropdown),this.dropdown.css({width:dd_width+"px",top:dd_top+"px"}),this.search_field=this.container.find("input").first(),(this.form_field.options.length<=this.disable_search_threshold||this.disable_search)&&this.search_field.remove(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),sf_width=dd_width-get_side_border_padding(this.search_container)-get_side_border_padding(this.search_field),this.search_field.css({width:sf_width+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var _this=this;return this.container.mousedown(function(evt){return _this.container_mousedown(evt)}),this.container.mouseup(function(evt){return _this.container_mouseup(evt)}),this.container.mouseenter(function(evt){return _this.mouse_enter(evt)}),this.container.mouseleave(function(evt){return _this.mouse_leave(evt)}),this.search_results.mouseup(function(evt){return _this.search_results_mouseup(evt)}),this.search_results.mouseover(function(evt){return _this.search_results_mouseover(evt)}),this.search_results.mouseout(function(evt){return _this.search_results_mouseout(evt)}),this.form_field_jq.bind("liszt:updated",function(evt){return _this.results_update_field(evt)}),this.form_field_jq.bind("liszt:blur",function(){return _this.close_field()}),this.form_field_jq.bind("liszt:focus",function(){return $(document).click(_this.click_test_action),_this.activate_field()}),this.search_field.blur(function(evt){return _this.input_blur(evt)}),this.search_field.keyup(function(evt){return _this.keyup_checker(evt)}),this.search_field.keydown(function(evt){return _this.keydown_checker(evt)}),this.is_multiple?(this.search_choices.click(function(evt){return _this.choices_click(evt)}),this.search_field.focus(function(evt){return _this.input_focus(evt)})):this.container.click(function(evt){return evt.preventDefault()})},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},Chosen.prototype.container_mousedown=function(evt){var target_closelink;if(!this.is_disabled)return target_closelink=null!=evt&&$(evt.target).hasClass("search-choice-close"),evt&&"mousedown"===evt.type&&!this.results_showing&&evt.stopPropagation(),this.pending_destroy_click||target_closelink?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!evt||$(evt.target)[0]!==this.selected_item[0]&&!$(evt.target).parents("a.chzn-single").length||(evt.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),$(document).click(this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(evt){if("ABBR"===evt.target.nodeName&&!this.is_disabled)return this.results_reset(evt)},Chosen.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},Chosen.prototype.close_field=function(){return $(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.options.onblur&&this.options.onblur.call(this),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1),this.options.onfocus&&this.options.onfocus.call(this)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(evt){return $(evt.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){var content,data,_i,_len,_ref;for(this.parsing=!0,this.results_data=root.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold||this.disable_search?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),content="",_i=0,_len=(_ref=this.results_data).length;_i<_len;_i++)(data=_ref[_i]).group?content+=this.result_add_group(data):data.empty||(content+=this.result_add_option(data),data.selected&&this.is_multiple?this.choice_build(data):data.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(data.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(content),this.parsing=!1},Chosen.prototype.result_add_group=function(group){return group.disabled?"":(group.dom_id=this.container_id+"_g_"+group.array_index,'<li id="'+group.dom_id+'" class="group-result">'+$("<div />").text(group.label).html()+"</li>")},Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){if(this.result_clear_highlight(),this.result_highlight=el,this.result_highlight.addClass("highlighted"),visible_bottom=(maxHeight=parseInt(this.search_results.css("maxHeight"),10))+(visible_top=this.search_results.scrollTop()),(high_bottom=(high_top=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);if(high_top<visible_top)return this.search_results.scrollTop(high_top)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){var dd_top;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return dd_top=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:dd_top+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},Chosen.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},Chosen.prototype.set_tab_index=function(){var ti;if(jQuery("div.chzn-container ul").attr("tabindex",-1),this.form_field_jq.attr("tabindex"))return ti=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",ti):(this.selected_item.attr("tabindex",ti),this.search_field.attr("tabindex",-1))},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(evt){var target;if((target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first()).length)return this.result_highlight=target,this.result_select(evt)},Chosen.prototype.search_results_mouseover=function(evt){var target;if(target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first())return this.result_do_highlight(target)},Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"))return this.result_clear_highlight()},Chosen.prototype.choices_click=function(evt){if(evt.preventDefault(),this.active_field&&!$(evt.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},Chosen.prototype.choice_build=function(item){var choice_id,_this=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(choice_id=this.container_id+"_c_"+item.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+choice_id+'"><span>'+item.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+item.array_index+'"></a></li>'),$("#"+choice_id).find("a").first().click(function(evt){return _this.choice_destroy_link_click(evt)}))},Chosen.prototype.choice_destroy_link_click=function(evt){return evt.preventDefault(),this.is_disabled?evt.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy($(evt.target)))},Chosen.prototype.choice_destroy=function(link){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(link.attr("rel")),link.parents("li").first().remove()},Chosen.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},Chosen.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(evt){var high,high_id,item,position;if(this.result_highlight)return high_id=(high=this.result_highlight).attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(high):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=high,this.selected_item.removeClass("chzn-default")),high.addClass("result-selected"),position=high_id.substr(high_id.lastIndexOf("_")+1),(item=this.results_data[position]).selected=!0,this.form_field.options[item.options_index].selected=!0,this.is_multiple?this.choice_build(item):(this.selected_item.find("span").first().text(item.text),this.allow_single_deselect&&this.single_deselect_control_build()),evt.metaKey&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[item.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()},Chosen.prototype.result_activate=function(el){return el.addClass("active-result")},Chosen.prototype.result_deactivate=function(el){return el.removeClass("active-result")},Chosen.prototype.result_deselect=function(pos){var result_data;return(result_data=this.results_data[pos]).selected=!1,this.form_field.options[result_data.options_index].selected=!1,$("#"+this.container_id+"_o_"+pos).removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value}),this.search_field_scale()},Chosen.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},Chosen.prototype.winnow_results=function(){var found,option,part,parts,regex,regexAnchor,result,result_id,results,searchText,startpos,text,zregex,_i,_j,_len,_len2,_ref;for(this.no_results_clear(),results=0,searchText=this.search_field.val()===this.default_text?"":$("<div/>").text($.trim(this.search_field.val())).html(),regexAnchor=this.search_contains?"":"^",regex=new RegExp(regexAnchor+searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),zregex=new RegExp(searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),_i=0,_len=(_ref=this.results_data).length;_i<_len;_i++)if(!(option=_ref[_i]).disabled&&!option.empty)if(option.group)$("#"+option.dom_id).css("display","none");else if(!this.is_multiple||!option.selected){if(found=!1,result_id=option.dom_id,result=$("#"+result_id),regex.test(option.html))found=!0,results+=1;else if((option.html.indexOf(" ")>=0||0===option.html.indexOf("["))&&(parts=option.html.replace(/\[|\]/g,"").split(" ")).length)for(_j=0,_len2=parts.length;_j<_len2;_j++)part=parts[_j],regex.test(part)&&(found=!0,results+=1);found?(searchText.length?(startpos=option.html.search(zregex),text=(text=option.html.substr(0,startpos+searchText.length)+"</em>"+option.html.substr(startpos+searchText.length)).substr(0,startpos)+"<em>"+text.substr(startpos)):text=option.html,result.html(text),this.result_activate(result),null!=option.group_array_index&&$("#"+this.results_data[option.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&result_id===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(result))}return results<1&&searchText.length?this.no_results(searchText):this.winnow_results_set_highlight()},Chosen.prototype.winnow_results_clear=function(){var li,lis,_i,_len,_results;for(this.search_field.val(""),_results=[],_i=0,_len=(lis=this.search_results.find("li")).length;_i<_len;_i++)li=lis[_i],(li=$(li)).hasClass("group-result")?_results.push(li.css("display","auto")):this.is_multiple&&li.hasClass("result-selected")?_results.push(void 0):_results.push(this.result_activate(li));return _results},Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;if(!this.result_highlight&&null!=(do_high=(selected_results=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?selected_results.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(do_high)},Chosen.prototype.no_results=function(terms){var no_results_html;return(no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(terms),this.search_results.append(no_results_html)},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var first_active,next_sib;if(this.result_highlight?this.results_showing&&(next_sib=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(next_sib):(first_active=this.search_results.find("li.active-result").first())&&this.result_do_highlight($(first_active)),!this.results_showing)return this.results_show()},Chosen.prototype.keyup_arrow=function(){var prev_sibs;return this.results_showing||this.is_multiple?this.result_highlight?(prev_sibs=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(prev_sibs.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus"))},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(evt){var stroke,_ref;switch(stroke=null!=(_ref=evt.which)?_ref:evt.keyCode,this.search_field_scale(),8!==stroke&&this.pending_backstroke&&this.clear_backstroke(),stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(evt),this.mouse_on_container=!1;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var dd_top,div,style,style_block,styles,w,_i,_len;if(this.is_multiple){for(0,w=0,style_block="position:absolute; left: -1000px; top: -1000px; display:none;",_i=0,_len=(styles=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;_i<_len;_i++)style_block+=(style=styles[_i])+":"+this.search_field.css(style)+";";return(div=$("<div />",{style:style_block})).text(this.search_field.val()),$("body").append(div),w=div.width()+25,div.remove(),w>this.f_width-10&&(w=this.f_width-10),this.search_field.css({width:w+"px"}),dd_top=this.container.height(),this.dropdown.css({top:dd_top+"px"})}},Chosen.prototype.generate_random_id=function(){var string;for(string="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();$("#"+string).length>0;)string+=this.generate_random_char();return string},Chosen}(AbstractChosen),get_side_border_padding=function(elmt){return elmt.outerWidth()-elmt.width()},root.get_side_border_padding=get_side_border_padding}.call(this),jQuery.fn.formhelper=function(cfg,key,value,comp){return"string"!=typeof cfg?(cfg=cfg||{},this.each(function(idx,element){element.formhelper||(element.formhelper=new jQueryFormHelper(jQuery(element),cfg),element.formhelper.init(!1))})):this.each(function(idx,element){"addvalidator"==cfg?element.formhelper._addValidator(key,value):"addtemplate"==cfg?element.formhelper._addTemplate(key,value):"replacetemplate"==cfg?element.formhelper._replaceTemplate(key,value):"addmessage"==cfg?element.formhelper._addMessage(key,value):"submit"==cfg?element.formhelper._submit(key,value):"flagerror"==cfg?element.formhelper._flagerror(key,value):"setinfo"==cfg?element.formhelper._setinfo(key,value,comp):"setvalue"==cfg?element.formhelper._setvalue(key,value,comp):"refresh"==cfg?element.formhelper._refresh(key):"validate"==cfg?element.formhelper._do_validate(key,value,comp):"onbuttonclick"==cfg?element.formhelper._bind_button_click(key,value):"init"==cfg&&element.formhelper.init(!0)}),this},jQueryFormHelper.simplePadding=function(number){return(number<10?"0":"")+number},jQueryFormHelper.prototype.showLabel=function(parent,input,show,labelIdSuffix){var labelId=this.options.labelId,miniLabelId=this.options.miniLabelId;labelIdSuffix&&(labelId+="-"+labelIdSuffix,miniLabelId+="-"+labelIdSuffix),show?(input.attr("showminilabel")&&"false"==input.attr("showminilabel").toLowerCase()?parent.find("."+miniLabelId).hide():parent.find("."+miniLabelId).css("visibility","hidden"),"none"==parent.find("."+labelId).css("display")&&parent.find("."+labelId).animate({opacity:1},50,function(){jQuery(this).show()})):(input.attr("showminilabel")&&"false"==input.attr("showminilabel").toLowerCase()?parent.find("."+miniLabelId).hide():parent.find("."+miniLabelId).css("visibility","visible"),"none"!=parent.find("."+labelId).css("display")&&parent.find("."+labelId).animate({opacity:0},50,function(){jQuery(this).hide()}))},jQueryFormHelper.prototype._bind_button_click=function(fieldname,callback){var new_input=this.element.find("input[name='"+fieldname+"']");new_input.parents("."+this.options.mainId).find(".btn-acpt").click(function(){callback&&callback.call(new_input)})},jQueryFormHelper.prototype._setvalue=function(fieldname,value,validate){var field=this.element.find("input[name='"+fieldname+"'],select[name='"+fieldname+"'],textarea[name='"+fieldname+"']");this._set_field_value(field,value,validate)},jQueryFormHelper.prototype._refresh=function(fieldname){var field=this.element.find("input[name='"+fieldname+"'],select[name='"+fieldname+"'],textarea[name='"+fieldname+"']");this._do_refresh(field)},jQueryFormHelper.prototype._do_validate=function(fieldname,validate_empty,force){var field=this.element.find("input[name='"+fieldname+"'],select[name='"+fieldname+"'],textarea[name='"+fieldname+"']");this._validate(field,validate_empty,force)},jQueryFormHelper.prototype._setinfo=function(fieldname,status,message){var field=this.element.find("input[name='"+fieldname+"'],select[name='"+fieldname+"'],textarea[name='"+fieldname+"']").first();field.get(0)&&this._set_field_info(field,status,message)},jQueryFormHelper.prototype._set_field_info=function(field,status,message){var infoId=this.options.infoId;field.attr("suffix")&&(infoId+="-"+field.attr("suffix"));var info=field.parents("."+this.options.mainId).find("."+infoId);if("input"!=field.get(0).nodeName.toLowerCase()||"radio"!=field.attr("type").toLowerCase()&&"checkbox"!=field.attr("type").toLowerCase()||(info=jQuery("#"+field.attr("name")+"_error"),status!=jQueryFormHelper.VALIDATION_SUCCESS&&status!=jQueryFormHelper.STATUS_SUCCESS?info.show():info.hide()),status==jQueryFormHelper.VALIDATION_ERROR||status==jQueryFormHelper.STATUS_ERROR)info.html(message).removeClass("inpt-label-ok inpt-label-info inpt-label-waiting").addClass("inpt-label-erro"),info.parent().removeClass("label-ok").addClass("label-erro");else if(status==jQueryFormHelper.VALIDATION_PENDING||status==jQueryFormHelper.STATUS_PENDING){null==(msg=message)&&(msg=this.options.messages["waiting-validation"]),info.html(msg).removeClass("inpt-label-ok inpt-label-info g").addClass("inpt-label-waiting")}else if(status==jQueryFormHelper.VALIDATION_SUCCESS||status==jQueryFormHelper.STATUS_SUCCESS)info.html(message).removeClass("inpt-label-erro inpt-label-info inpt-label-waiting").addClass("inpt-label-ok"),info.parent().removeClass("label-erro").addClass("label-ok");else{var msg;null==(msg=message)&&(msg=field.attr("info")),info.html(msg).removeClass("inpt-label-ok inpt-label-erro inpt-label-waiting").addClass("inpt-label-info"),info.parent().removeClass("label-ok").addClass("label-erro")}},jQueryFormHelper.prototype._locateValidator=function(name){return this.validations[name]},jQueryFormHelper.prototype._locateTemplate=function(name){return this.templates[name]},jQueryFormHelper.prototype.dispatchOnChangeCompleted=function(field){return!this.options.onChangeCompleted||this.options.onChangeCompleted.call(this,field)},jQueryFormHelper.prototype.dispatchOnValidate=function(){return this.options.onValidate?this.options.onValidate.call(this):jQueryFormHelper.VALIDATION_SUCCESS},jQueryFormHelper.prototype.dispatchOnSubmitError=function(){return!this.options.onSubmitError||this.options.onSubmitError.call()},jQueryFormHelper.prototype.dispatchOnSubmit=function(){return!this.options.onSubmit||this.options.onSubmit.call(this)},jQueryFormHelper.prototype.dispatchOnAfterValidate=function(field,status){this.options.onAfterValidate&&this.options.onAfterValidate.call(this,field,status)},jQueryFormHelper.prototype.dispatchOnChange=function(field){this.options.onChange&&this.options.onChange.call(this,field)},jQueryFormHelper.prototype.dispatchOnBlur=function(field){this.options.onBlur&&this.options.onBlur.call(this,field)},jQueryFormHelper.prototype.dispatchOnFocus=function(field){this.options.onFocus&&this.options.onFocus.call(this,field)},jQueryFormHelper.prototype._flagerror=function(fieldname,value){var self=this;this.element.find("*[name='"+fieldname+"']").each(function(){var field=jQuery(this);field.attr("fhstatus",jQueryFormHelper.STATUS_ERROR);var msg=self.options.messages[value];msg&&""!=msg||(msg=value),self._set_field_info(field,jQueryFormHelper.STATUS_ERROR,msg)})},jQueryFormHelper.prototype._do_refresh=function(field){"select"==field.get(0).nodeName.toLowerCase()&&field.trigger("change").trigger("liszt:updated")},jQueryFormHelper.prototype._set_field_value=function(field,value,validate){if(1==field.length){var type=field.get(0).nodeName.toLowerCase();"input"==type?(field.val(value).trigger("change"),1==validate&&""!=value?field.trigger("keyup").trigger("blur"):""==value?field.trigger("keyup"):field.attr("changed",validate)):"select"==type?(field.val(value).trigger("change").trigger("liszt:updated"),1==validate&&""!=value?field.trigger("liszt:blur"):""==value?field.trigger("revalidate"):field.attr("changed",validate)):"textarea"==type&&(field.val(value).trigger("change"),1==validate&&""!=value?field.trigger("keyup").trigger("blur"):""==value?field.trigger("keyup"):field.attr("changed",validate))}else""!==value?field.closest("*[value='"+value+"']").prop("checked",!0).prop("selected",!0).trigger("change"):(field.prop("checked",!1).removeProp("selected"),$(field.get(0)).trigger("change"))},jQueryFormHelper.prototype._get_field_value=function(field){var value="",type=field.get(0).nodeName.toLowerCase();if("input"==type&&"radio"==field.attr("type").toLowerCase()){var selected_element=this.element.find("input:radio[name='"+field.attr("name")+"']:checked");value=selected_element.size()>0?selected_element.val():""}else if("input"==type&&"checkbox"==field.attr("type").toLowerCase())field.is(":checked")&&(value=field.val());else if("select"==type){var selected_field=field.find("option:selected[value!='']");value=selected_field.size()>0?selected_field.val():""}else value=field.val();return value},jQueryFormHelper.prototype._validate=function(field,validate_empty,force){if(field.attr("ignore")&&"true"==field.attr("ignore").toLowerCase())return jQueryFormHelper.STATUS_SUCCESS;if(field.attr("ignorevalidation")&&"true"==field.attr("ignorevalidation").toLowerCase())return jQueryFormHelper.STATUS_SUCCESS;var field_value=this._get_field_value(field),changed=field.attr("changed");if(!validate_empty&&""==field_value)return field.attr("fhstatus",jQueryFormHelper.STATUS_SUCCESS),this.dispatchOnAfterValidate(field,jQueryFormHelper.STATUS_SUCCESS),jQueryFormHelper.STATUS_SUCCESS;var status=field.attr("fhstatus");if("true"==changed||status==jQueryFormHelper.STATUS_PENDING||1==force){if(field.attr("required")&&""!=field.attr("required")&&"FALSE"!=field.attr("required").toUpperCase()&&""==field_value)return(required_message=field.attr("error_required"))||(required_message=this.options.messages["error-required"]),this._set_field_info(field,jQueryFormHelper.STATUS_ERROR,required_message),field.attr("changed","false"),field.attr("fhstatus",jQueryFormHelper.STATUS_ERROR),this.dispatchOnAfterValidate(field,jQueryFormHelper.VALIDATION_ERROR),jQueryFormHelper.VALIDATION_ERROR;if(field.attr("validate")&&""!=field_value){validations=field.attr("validate").split(" ");for(var i=0;i<validations.length;i++){var validator=this._locateValidator(validations[i]);if(validator){var test=validator.validate.call(this,field);if(test[0]==jQueryFormHelper.VALIDATION_ERROR)return this._set_field_info(field,jQueryFormHelper.STATUS_ERROR,this.options.messages[test[1]]),field.attr("changed","false"),field.attr("fhstatus",jQueryFormHelper.STATUS_ERROR),this.dispatchOnAfterValidate(field,test[0]),test[0];if(test[0]==jQueryFormHelper.VALIDATION_PENDING)return this._set_field_info(field,jQueryFormHelper.STATUS_PENDING,this.options.messages["waiting-validation"]),field.attr("fhstatus",jQueryFormHelper.STATUS_PENDING),this.dispatchOnAfterValidate(field,test[0]),test[0];this._set_field_info(field,jQueryFormHelper.STATUS_SUCCESS,this.options.messages[test[1]]),field.attr("fhstatus",jQueryFormHelper.STATUS_SUCCESS)}}}else{var required_message;if(""!=field_value)(required_message=field.attr("success_required"))||(required_message=this.options.messages["success-required"]),this._set_field_info(field,jQueryFormHelper.STATUS_SUCCESS,this.options.messages["success-required"]);else this.options.showInfoOnEmpty||this._set_field_info(field,jQueryFormHelper.STATUS_INFO,"");field.attr("fhstatus",jQueryFormHelper.STATUS_SUCCESS)}return this.dispatchOnAfterValidate(field,jQueryFormHelper.STATUS_SUCCESS),field.attr("changed","false"),field.attr("fhstatus",jQueryFormHelper.STATUS_SUCCESS),jQueryFormHelper.STATUS_SUCCESS}return this.dispatchOnAfterValidate(field,field.attr("fhstatus")),field.attr("fhstatus")},jQueryFormHelper.prototype.getData=function(){return this.element.serialize()},jQueryFormHelper.prototype._submit=function(button,animate){var error=!1,pending=!1,self=this;if(!button||!jQuery(button).attr("waiting")||"true"!=jQuery(button).attr("waiting")){this.element.find("input,textarea,select").each(function(){var ret=self._validate(jQuery(this),!0,!1);ret==jQueryFormHelper.VALIDATION_ERROR?error=!0:ret==jQueryFormHelper.VALIDATION_PENDING&&(pending=!0)});var ret=this.dispatchOnValidate();ret==jQueryFormHelper.VALIDATION_ERROR?error=!0:ret==jQueryFormHelper.VALIDATION_PENDING&&(pending=!0),error||pending?(button&&animate&&error&&jQuery(button).animate({"margin-left":5},100,function(){jQuery(button).animate({"margin-left":-5},100,function(){jQuery(button).animate({"margin-left":5},100,function(){jQuery(button).animate({"margin-left":0},100,function(){self.dispatchOnSubmitError()})})})}),pending&&!error?(setTimeout(function(){jQuery(button).attr("waiting","false"),self._submit(button,animate)},200),jQuery(button).attr("waiting","true")):pending&&!error||jQuery(button).attr("waiting","false")):self.dispatchOnSubmit()&&this.element.get(0).submit()}},jQueryFormHelper.prototype._showInfo=function(field,force){(""==this._get_field_value(field)||this.options.showInfoOnEmpty)&&(field.attr("fhstatus")!=jQueryFormHelper.STATUS_ERROR&&field.attr("fhstatus")!=jQueryFormHelper.STATUS_PENDING||force)&&(field.attr("info")?this._set_field_info(field,jQueryFormHelper.STATUS_INFO,null):this._set_field_info(field,jQueryFormHelper.STATUS_INFO,""),field.attr("changed","true"))},
jQueryFormHelper.prototype._countCharacters=function(new_input){if(new_input.attr("maxlength")&&""!=new_input.attr("maxlength")){var counter=new_input.parents("."+this.options.mainId).find("."+this.options.charCountId);if(counter.get(0)){var count=parseInt(new_input.attr("maxlength"))-new_input.val().length;counter.html(count)}}else new_input.parents("."+this.options.mainId).find(".textarea-caracters").hide()},jQueryFormHelper.prototype.init=function(force){var chars=["i","c","a","s","e"];if(!(!document.location.href.indexOf(chars[0]+chars[1]+chars[2]+chars[3]+chars[4]+chars[0]+".com.br")>0)){if(!this.options.autoRender&&!force)return!1;var field,self=this,template=this._locateTemplate(this.options.template);if(this.element.addClass(this.options.classTemplate),"FORM"!=this.element.get(0).nodeName.toUpperCase())return alert(self.options.messages["main-element-is-not-a-form"]),!1;if(template||alert(self.options.messages["template-not-found"]),this.element.find("input[type='checkbox']").each(function(){if(!jQuery(this).attr("ignore")||"true"!=jQuery(this).attr("ignore").toLowerCase()){var line=jQuery(template.INPUT_CHECKBOX_WRAPPER),new_input=jQuery(this).clone();line.find("newinput").before(new_input),line.find("newinput").remove(),line.attr("value",new_input.val()),line.attr("name",new_input.attr("name")),jQuery(this).before(line),jQuery(this).remove();var content_node_name=new_input.attr("content"),content=jQuery("#"+content_node_name).html();line.find("checktitle").before(jQuery(content)),line.find("checktitle").remove(),jQuery("#"+content_node_name).remove(),new_input.attr("changed","true");var fn=function(){new_input.attr("name");var jqck=new_input.parents().find("label[value='"+new_input.val()+"'][name='"+new_input.attr("name")+"']").find(".mark");new_input.is(":checked")?jqck.removeClass("check-of").addClass("check-ck"):jqck.removeClass("check-ck").addClass("check-of"),new_input.attr("changed","true"),self.dispatchOnChange(new_input),self.dispatchOnChangeCompleted(new_input)};new_input.change(fn),jQuery("body").is(".lt-ie9 *")&&line.click(function(){new_input.is(":checked")?new_input.removeProp("checked"):new_input.prop("checked",!0),fn()})}}),this.element.find("input[type='radio']").each(function(){if(!jQuery(this).attr("ignore")||"true"!=jQuery(this).attr("ignore").toLowerCase()){var line=jQuery(template.INPUT_RADIO_WRAPPER),new_input=jQuery(this);new_input.before(line).css("position","absolute"),line.find("newinput").before(new_input),line.find("newinput").remove(),line.attr("value",new_input.val()),line.attr("name",new_input.attr("name"));var content_node_name=new_input.attr("content"),content=jQuery("#"+content_node_name).children();line.find("radiotitle").before(content),line.find("radiotitle").remove(),jQuery("#"+content_node_name).remove(),new_input.attr("changed","true");var fn=function(){var field_name=new_input.attr("name");self.element.find("input[name='"+field_name+"']").each(function(){var jqck=jQuery(this).parents().find("label[value='"+jQuery(this).val()+"'][name='"+jQuery(this).attr("name")+"']").find(".mark");jQuery(this).is(":checked")?jqck.removeClass("radio-of").addClass("radio-ck"):jqck.removeClass("radio-ck").addClass("radio-of"),jQuery(this).attr("changed","true"),self.dispatchOnChange(jQuery(this)),self.dispatchOnChangeCompleted(jQuery(this))})};new_input.click(fn),new_input.change(fn);var fn1=function(){var field_name=new_input.attr("name");self.element.find("input[name='"+field_name+"']").removeProp("checked"),new_input.prop("checked",!0),fn()};line.click(fn1),new_input.is(":checked")?new_input.parents().find("label[value='"+jQuery(this).val()+"'][name='"+jQuery(this).attr("name")+"']").find(".mark").removeClass("radio-of").addClass("radio-ck"):new_input.parents().find("label[value='"+jQuery(this).val()+"'][name='"+jQuery(this).attr("name")+"']").find(".mark").removeClass("radio-ck").addClass("radio-of")}}),this.element.find("select").each(function(){if(!jQuery(this).attr("ignore")||"true"!=jQuery(this).attr("ignore").toLowerCase()){var line=jQuery(template.CHOOSER_WRAPPER),new_input=jQuery(this).clone();new_input.addClass("chzn-select"),new_input.addClass("select-helper"),line.find("newselect").before(new_input),line.find("newselect").remove(),jQuery(this).before(line),jQuery(this).remove(),new_input.attr("showminilabel")&&"false"==new_input.attr("showminilabel").toLowerCase()?line.find("."+self.options.miniLabelId).hide():line.find("."+self.options.miniLabelId).html(new_input.attr("label")),new_input.change(function(){new_input.attr("changed","true");var show=""==new_input.val();self.showLabel(new_input.parents("."+self.options.mainId),new_input,show,new_input.attr("suffix")),self._validate(new_input,!0,!1),self.dispatchOnChange(new_input),self.dispatchOnChangeCompleted(new_input)}),new_input.attr("changed","true"),new_input.bind("revalidate",function(){self._showInfo(new_input,!0),self._validate(new_input,!1,!1)});var disable_search=!1,search=new_input.attr("search");search&&"false"==search.toLowerCase()&&(disable_search=!0),new_input.chosen({no_results_text:self.options.messages["chosen-not-found"],disable_search:disable_search,onfocus:function(){new_input.removeClass("fcs-out").addClass("fcs-over"),new_input.parent().find("."+self.options.labelId).removeClass("inpt-label-out").addClass("inpt-label-over"),self._showInfo(new_input,!0),self.dispatchOnFocus(new_input)},onblur:function(){new_input.removeClass("fcs-over").addClass("fcs-out"),new_input.parent().find("."+self.options.labelId).removeClass("inpt-label-over").addClass("inpt-label-out"),self._validate(new_input,!0,!1),self.dispatchOnBlur(new_input)}});var show=""==new_input.val();0==show&&new_input.attr("validateoninit")&&"true"==new_input.attr("validateoninit").toLowerCase()&&self._validate(new_input,!0,!1),self.showLabel(new_input.parents("."+self.options.mainId),new_input,show,new_input.attr("suffix"))}}),this.element.find("input[type='textcalendar'], input[type='textbutton'], input[type='text'], input[type='password'], input[type='email'], input[type='number'], input[type='date'], textarea").each(function(){if(!jQuery(this).attr("ignore")||"true"!=jQuery(this).attr("ignore").toLowerCase()){var is_textarea=0,line=jQuery(template.INPUT_TEXT_WRAPPER);"textarea"==jQuery(this).get(0).nodeName.toLowerCase()?((line=jQuery(template.TEXTAREA_TEXT_WRAPPER)).find(".chars").html(self.options.messages.chars),is_textarea=1):"textbutton"==jQuery(this).attr("type").toLowerCase()?line=jQuery(template.INPUT_TEXT_BUTTON_WRAPPER):"textcalendar"==jQuery(this).attr("type").toLowerCase()&&(line=jQuery(template.INPUT_CALENDAR_WRAPPER));var passwordStrength=jQuery(this).attr("validate");passwordStrength&&passwordStrength.toLowerCase().indexOf("strength")>=0&&(Strength_html=jQuery(template.PASSWORD_STRENGTH_TEMPLATE),line.find(".cdst-line").append(Strength_html));var new_input,ignoreTemplate=jQuery(this).attr("ignoretemplate");if(ignoreTemplate&&"true"==ignoreTemplate.toLowerCase())line=(new_input=jQuery(this)).parents("."+self.options.mainId);else(new_input=jQuery(this).clone()).addClass("cdst-inpt fcs-out");var labelId=self.options.labelId,miniLabelId=self.options.miniLabelId;new_input.attr("suffix")&&(labelId+="-"+new_input.attr("suffix"),miniLabelId+="-"+new_input.attr("suffix")),line.find("."+labelId).html(new_input.attr("label")),new_input.attr("showminilabel")&&"false"==new_input.attr("showminilabel").toLowerCase()?line.find("."+miniLabelId).hide():line.find("."+miniLabelId).html(new_input.attr("label")),line.find("."+labelId,"."+miniLabelId).click(function(){new_input.focus()}),""!=new_input.val()&&line.find("."+labelId).hide();var blur_fn=function(){jQuery(this).removeClass("fcs-over").addClass("fcs-out"),jQuery(this).parent().find("."+labelId).removeClass("inpt-label-over").addClass("inpt-label-out"),self._validate(jQuery(this),!0,!1),self.dispatchOnBlur(new_input)};new_input.blur(blur_fn),new_input.bind("formhelper_blur",blur_fn),new_input.focus(function(){jQuery(this).removeClass("fcs-out").addClass("fcs-over"),jQuery(this).parent().find("."+labelId).removeClass("inpt-label-out").addClass("inpt-label-over"),self._showInfo(jQuery(this),!0),self.dispatchOnFocus(new_input),jQuery(this).parent().removeClass("label-erro")}),self.options.sendOnEnter&&new_input.keypress(function(e){if(13==(window.event?window.event.keyCode:e.which)&&0==is_textarea)return self._submit(null,!1),e.stopPropagation(),e.preventDefault(),!1}),new_input.keyup(function(){new_input.attr("changed","true");var show=""==new_input.val();self.showLabel(new_input.parents("."+self.options.mainId),new_input,show,new_input.attr("suffix")),self._showInfo(new_input,!0),""==new_input.val()&&passwordStrength&&passwordStrength.toLowerCase().indexOf("strength")>=0&&new_input.parents("."+self.options.mainId).find(".pass-strength").hide(),self._countCharacters(new_input),self.changeTimeout>0&&(clearTimeout(self.changeTimeout),self.changeTimeout=0),self.changeTimeout=setTimeout(function(){self.dispatchOnChangeCompleted(new_input)&&self._validate(new_input,!1,!1)},1e3),self.dispatchOnChange(new_input)}),new_input.change(function(){new_input.trigger("keyup")}),ignoreTemplate&&"true"==ignoreTemplate.toLowerCase()||line.find("newinput").before(new_input).remove(),jQuery(this).attr("type")&&"textbutton"==jQuery(this).attr("type").toLowerCase()&&line.find("buttontitle").before(new_input.attr("buttontitle")).remove(),ignoreTemplate&&"true"==ignoreTemplate.toLowerCase()||(jQuery(this).before(line),jQuery(this).remove()),new_input.attr("changed","true"),""!=new_input.val()&&(new_input.attr("validateoninit")&&"true"==new_input.attr("validateoninit").toLowerCase()&&self._validate(new_input,!0,!1),self.showLabel(new_input.parents("."+self.options.mainId),new_input,!1,new_input.attr("suffix"))),self._countCharacters(new_input)}}),""!=this.options.defaultField)if((field=jQuery("select[name='"+this.options.defaultField+"']")).get(0))field.trigger("liszt:focus");else(field=jQuery("*[name='"+this.options.defaultField+"']")).get(0)||(field=jQuery("."+this.options.defaultField)),field.get(0)&&field.focus()}},jQueryFormHelper.prototype._config=function(key,value){this.options[key]=value},jQueryFormHelper.prototype._addTemplate=function(name,obj){this.templates[name]=obj},jQueryFormHelper.prototype._replaceTemplate=function(name,obj){for(i in obj)this.templates[name][i]=obj[i]},jQueryFormHelper.prototype._addValidator=function(name,obj){this.validations[name]=obj},jQueryFormHelper.prototype._addMessage=function(name,message){this.options.messages[name]=message},jQueryFormHelper.prototype.validations={email:{validate:function(field){var test=/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(this._get_field_value(field));return[test,test?"email-ok":"email-invalid-format"]}},creditcard:{validate:function(field){var association=field.attr("association"),content=field.attr("content"),value=field.val(),length=0;switch(content){case"number":switch(association){case"visa":case"master":case"elo":length=16;break;case"amex":length=15}break;case"securitycode":switch(association){case"visa":case"master":case"elo":length=3;break;case"amex":length=4}}if(0==length)return[!1,"creditcard-fail"];var ret=!0;if((value=value.replace(/_/gi,"").replace(/ /gi,"")).length!=length&&(ret=!1),"securitycode"==content)return[ret,ret?"creditcard-securitycode-ok":"creditcard-securitycode-fail-"+association];if(!ret)return[!1,"creditcard-number-fail0-"+association];if(ret=checkLuhn(value))switch(association){case"visa":"4"!=value.substr(0,1)&&(ret=!1);break;case"master":"51"!=value.substr(0,2)&&"52"!=value.substr(0,2)&&"53"!=value.substr(0,2)&&"54"!=value.substr(0,2)&&"55"!=value.substr(0,2)&&(ret=!1);break;case"elo":"50"!=value.substr(0,2)&&"636368"!=value.substr(0,6)&&"636297"!=value.substr(0,6)&&"504175"!=value.substr(0,6)&&"438935"!=value.substr(0,6)&&"401179"!=value.substr(0,6)&&"401178"!=value.substr(0,6)&&"457631"!=value.substr(0,6)&&"457632"!=value.substr(0,6)&&"451416"!=value.substr(0,6)&&"627780"!=value.substr(0,6)&&"457393"!=value.substr(0,6)&&"431274"!=value.substr(0,6)&&(ret=!1);break;case"amex":"34"!=value.substr(0,2)&&"37"!=value.substr(0,2)&&(ret=!1)}return[ret,ret?"creditcard-number-ok":"creditcard-number-fail1"]}},cpf:{validate:function(field){var cpf=this._get_field_value(field),test=/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(cpf);if(test){for(cpf=cpf.replace(/\./gi,"").replace(/\-/gi,""),i=0;i<10;i++){if(new RegExp("^["+i+"{11}]+$").test(cpf)){test=!1;break}}if(test)for(i=9;i<11;i++){for(add=0,j=0;j<i;j++)add+=parseInt(cpf.charAt(j))*(i+1-j);if(rev=11-add%11,10!=rev&&11!=rev||(rev=0),rev!=parseInt(cpf.charAt(i))){test=!1;break}}}return[test,test?"cpf-ok":"cpf-invalid-format"]}},fullname:{validate:function(field){var aValues=this._get_field_value(field).split(" ");return[aValues.length>1,aValues.length>1?"fullname-ok":"fullname-invalid-format"]}},name:{validate:function(field){var test=new RegExp('^[^!"#$%&()*+,/:;<=>?@\\[\\\\\\]^_`{|}~\xa8\xb4\xb9\xb2\xb3\xa3\xa2\xac\xa7\xaa\xba\t0-9]+$').test(this._get_field_value(field));return[test,test?"name-ok":"name-invalid-format"]}},passwdrepeat:{validate:function(field){var ret=!1,related=field.attr("related");if(related){var related_element=this.element.find("input[name='"+related+"']");if(related_element.get(0))related_element.val()==this._get_field_value(field)&&(ret=!0)}return[ret,ret?"password-rep-ok":"password-rep-invalid"]}},newdate:{validate:function(field){var val_ret=!0,date=null,format=field.attr("format");if(format)if("dd/mm/yyyy"==format){if(ret=/^([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})$/.exec(this._get_field_value(field))){var day=parseInt(ret[1],10),month=parseInt(ret[2],10),year=parseInt(ret[3],10);date=new Date(year,month-1,day+1,0,0,0,0)}}else if("mm/dd/yyyy"==format){if(ret=/^([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})$/.exec(this._get_field_value(field))){day=parseInt(ret[2],10),month=parseInt(ret[1],10),year=parseInt(ret[3],10);date=new Date(year,month-1,day+1,0,0,0,0)}}else if("yyyy/mm/dd"==format){var ret;if(ret=/^([0-9]{4})\/([0-9]{1,2})\/([0-9]{1,2})$/.exec(this._get_field_value(field))){day=parseInt(ret[3],10),month=parseInt(ret[2],10),year=parseInt(ret[1],10);date=new Date(year,month-1,day+1,0,0,0,0)}}return date&&date<new Date&&(val_ret=!1),[val_ret,val_ret?"date-ok":"date-invalid-old"]}},date:{validate:function(field){var val_ret=!1,format=field.attr("format");if(format)if("dd/mm/yyyy"==format){if(ret=/^([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})$/.exec(this._get_field_value(field))){var day=parseInt(ret[1],10),month=parseInt(ret[2],10),year=parseInt(ret[3],10);(d=new Date(year,month-1,day,0,0,0,0)).getUTCDate()!=day&&d.getDate()!=day||d.getMonth()!=month-1||d.getFullYear()!=year||(val_ret=!0)}}else if("mm/dd/yyyy"==format){if(ret=/^([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})$/.exec(this._get_field_value(field))){day=parseInt(ret[2],10),month=parseInt(ret[1],10),year=parseInt(ret[3],10);(d=new Date(year,month-1,day,0,0,0,0)).getUTCDate()!=day&&d.getDate()!=day||d.getMonth()!=month-1||d.getFullYear()!=year||(val_ret=!0)}}else if("yyyy/mm/dd"==format){var ret;if(ret=/^([0-9]{4})\/([0-9]{1,2})\/([0-9]{1,2})$/.exec(this._get_field_value(field))){var d;day=parseInt(ret[3],10),month=parseInt(ret[2],10),year=parseInt(ret[1],10);(d=new Date(year,month-1,day,0,0,0,0)).getUTCDate()!=day&&d.getDate()!=day||d.getMonth()!=month-1||d.getFullYear()!=year||(val_ret=!0)}}return[val_ret,val_ret?"date-ok":"date-invalid-format"]}},strength:{validate:function(field){var strength=0;return field.val().length<6?(field.parents("."+this.options.mainId).find(".strength").hide(),field.parents("."+this.options.mainId).find(".strength-fraca").show(),field.parents("."+this.options.mainId).find(".pass-strength").show(),[!1,"password-too-short"]):(field.val().length>7&&(strength+=1),field.val().match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(strength+=1),field.val().match(/([a-zA-Z])/)&&field.val().match(/([0-9])/)&&(strength+=1),field.val().match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(strength+=1),field.val().match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,%,&,@,#,$,^,*,?,_,~])/)&&(strength+=1),strength<2?(field.parents("."+this.options.mainId).find(".strength").hide(),field.parents("."+this.options.mainId).find(".strength-fraca").show(),field.parents("."+this.options.mainId).find(".pass-strength").show(),[!0,"password-weak"]):2==strength?(field.parents("."+this.options.mainId).find(".strength").hide(),field.parents("."+this.options.mainId).find(".strength-boa").show(),field.parents("."+this.options.mainId).find(".pass-strength").show(),[!0,"password-good"]):(field.parents("."+this.options.mainId).find(".strength").hide(),field.parents("."+this.options.mainId).find(".strength-forte").show(),field.parents("."+this.options.mainId).find(".pass-strength").show(),[!0,"password-power"]))}}},jQueryFormHelper.prototype.templates={"default":{INPUT_TEXT_WRAPPER:'<div class="main_element"><div class="prc-line-label form-helper-mini-label"></div><div class="cdst-line"><newinput/><span  class="inpt-label-out form-helper-label"></span><span class="inpt-label-info form-helper-info"></span></div></div>',TEXTAREA_TEXT_WRAPPER:'<div class="main_element"><div class="form-helper-mini-label prc-line-label"></div><div class="cdst-line"><span class="textarea-caracters"><span class="char_count">500</span>&nbsp;<span class="chars"></span></span><newinput/><span class="inpt-label-out form-helper-label"></span><span class="inpt-label-info form-helper-info"></span></div></div>',INPUT_TEXT_BUTTON_WRAPPER:'<div class="main_element"><div class="form-helper-mini-label prc-line-label"></div><div class="cdst-line"><newinput/><a tabindex="-1" href="javascript: void(0);" class="btn-acpt btn-acpt-btn"><buttontitle/></a><span class="inpt-label-out form-helper-label"></span><span class="inpt-label-info form-helper-info"></span></div></div>',INPUT_CALENDAR_WRAPPER:'<div class="main_element"><div class="prc-line-label form-helper-mini-label"></div><div class="cdst-line"><newinput/><a href="javascript: void(0)" class="btn-acpt btn-acpt-data"><span class="icon-calendar"></span></a><span class="inpt-label-out form-helper-label"></span><a href="javascript: void(0)" class="ico-flag tTipT"></a><span class="inpt-label-info form-helper-info"></span></div></div>',CHOOSER_WRAPPER:'<div class="main_element"><div class="form-helper-mini-label prc-line-label"></div><div class="cdst-line"><newselect/><span class="inpt-label-erro form-helper-info"></span></div></div>',INPUT_RADIO_WRAPPER:'<label class="main_element radio-label fb-check-ind"><span class="mark radio-of"></span><span class="radio-input"><newinput/></span><span class="radio-text"><radiotitle/></span></label>',INPUT_CHECKBOX_WRAPPER:'<label class="main_element check-label"><span class="mark check-of"></span><span class="check-input"><newinput/></span><span class="check-text"><checktitle/></span></label>',PASSWORD_STRENGTH_TEMPLATE:'<div class="pass-strength"><strong>For&ccedil;a da senha</strong><span class="strength strength-fraca">Fraca</span><span class="strength strength-media">M&eacute;dia</span><span class="strength strength-boa">Boa</span><span class="strength strength-forte">Forte</span></div>'}},jQuery.extend(jQueryFormHelper,{VALIDATION_SUCCESS:1,VALIDATION_ERROR:0,VALIDATION_PENDING:2,STATUS_ERROR:0,STATUS_PENDING:2,STATUS_SUCCESS:1,STATUS_INFO:3,DEFAULTS:{template:"default",classTemplate:"formhelper-default",defaultField:"",infoId:"form-helper-info",labelId:"form-helper-label",miniLabelId:"form-helper-mini-label",mainId:"main_element",charCountId:"char_count",button:"#formhelper_submit_button",sendOnEnter:!0,autoRender:!0,showInfoOnEmpty:!1,messages:{empty:"",chars:"caracteres restantes","waiting-validation":"Confirmando","error-required":"Este campo &eacute; obrigat&oacute;rio.","success-required":"Este campo est&aacute; ok.","email-invalid-format":"E-mail com formato inv&aacute;lido.","email-ok":"O e-mail est&aacute; ok.","fullname-invalid-format":"N&atilde;o parece ser um nome completo.","fullname-ok":"O nome est&aacute; ok.","name-invalid-format":"Campo inv&aacute;lido (n&atilde;o pode conter n&uacute;meros ou caracteres especiais).","name-ok":"Este campo est&aacute; ok.","cpf-invalid-format":"CPF inv&aacute;lido. Exemplo: <em>nnn.nnn.nnn-nn</em>.","cpf-ok":"O CPF &eacute; v&aacute;lido.","date-invalid-format":"Data com formato inv&aacute;lido.","date-ok":"A data &eacute; v&aacute;lida.","password-rep-ok":"As senhas conferem.","password-rep-invalid":"As senhas n&atilde;o conferem.","date-invalid-old":"Data retrotativa n&atilde;o permitida.","password-too-short":"Senha muito curta, m&iacute;nimo de 6 caracteres.","password-weak":"A senha &eacute; v&aacute;lida.","password-good":"A senha &eacute; v&aacute;lida.","password-power":"A senha &eacute; v&aacute;lida.","chosen-not-found":"Op&ccedil;&atilde;o n&atilde;o encontrada.","main-element-is-not-a-form":"jQueryFormHelper: elemento principal n&atilde;o &eacute; um formul&aacute;rio.","template-not-found":"jQueryFormHelper: template n&atilde;o localizado.","creditcard-fail":"Erro na obten&ccedil;&atilde;o dos atributos.","creditcard-number-ok":"O n&uacute;mero do cart&atilde;o &eacute; v&aacute;lido.","creditcard-number-fail0-visa":"O n&uacute;mero do cart&atilde;o deve conter exatamente 16 d&iacute;gitos.","creditcard-number-fail0-master":"O n&uacute;mero do cart&atilde;o deve conter exatamente 16 d&iacute;gitos.","creditcard-number-fail0-elo":"O n&uacute;mero do cart&atilde;o deve conter exatamente 16 d&iacute;gitos.","creditcard-number-fail0-amex":"O n&uacute;mero do cart&atilde;o deve conter exatamente 15 d&iacute;gitos.","creditcard-number-fail1":"N&uacute;mero do cart&atilde;o inv&aacute;lido.","creditcard-securitycode-ok":"O c&oacute;digo de seguran&ccedil;a &eacute; v&aacute;lido.","creditcard-securitycode-fail-visa":"O c&oacute;digo de seguran&ccedil;a deve conter exatamente 3 d&iacute;gitos.","creditcard-securitycode-fail-master":"O c&oacute;digo de seguran&ccedil;a deve conter exatamente 3 d&iacute;gitos.","creditcard-securitycode-fail-elo":"O c&oacute;digo de seguran&ccedil;a deve conter exatamente 3 d&iacute;gitos.","creditcard-securitycode-fail-amex":"O c&oacute;digo de seguran&ccedil;a deve conter exatamente 4 d&iacute;gitos."},onChange:null,onChangeCompleted:null,onAfterValidate:null,onBlur:null,onFocus:null,onSubmit:null,onSubmitError:null,onValidate:null}});