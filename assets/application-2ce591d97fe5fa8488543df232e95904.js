function init_I18n(){form_helper_messages={empty:"",chars:I18n.t("formhelper.chars"),"waiting-validation":I18n.t("formhelper.waiting_validation"),"error-required":I18n.t("formhelper.error_required"),"success-required":I18n.t("formhelper.success_required"),"email-invalid-format":I18n.t("formhelper.email_invalid_format"),"email-ok":I18n.t("formhelper.email_ok"),"fullname-invalid-format":I18n.t("formhelper.fullname_invalid_format"),"fullname-ok":I18n.t("formhelper.fullname_ok"),"name-invalid-format":I18n.t("formhelper.name_invalid_format"),"name-ok":I18n.t("formhelper.name_ok"),"cpf-invalid-format":I18n.t("formhelper.cpf_invalid_format"),"cpf-ok":I18n.t("formhelper.cpf_ok"),"date-invalid-format":I18n.t("formhelper.date_invalid_format"),"date-ok":I18n.t("formhelper.date_ok"),"password-rep-ok":I18n.t("formhelper.password_rep_ok"),"password-rep-invalid":I18n.t("formhelper.password_rep_invalid"),"date-invalid-old":I18n.t("formhelper.date_invalid_old"),"password-too-short":I18n.t("formhelper.password_too_short"),"password-weak":I18n.t("formhelper.password_weak"),"password-good":I18n.t("formhelper.password_good"),"password-power":I18n.t("formhelper.password_power"),"chosen-not-found":I18n.t("formhelper.chosen_not_found"),"main-element-is-not-a-form":I18n.t("formhelper.main_element_is_not_a_form"),"template-not-found":I18n.t("formhelper.template_not_found"),"creditcard-fail":I18n.t("formhelper.creditcard_fail"),"creditcard-number-ok":I18n.t("formhelper.creditcard_number_ok"),"creditcard-number-fail0-visa":I18n.t("formhelper.creditcard_number_fail0_visa"),"creditcard-number-fail0-master":I18n.t("formhelper.creditcard_number_fail0_master"),"creditcard-number-fail0-amex":I18n.t("formhelper.creditcard_number_fail0_amex"),"creditcard-number-fail0-elo":I18n.t("formhelper.creditcard_number_fail0_elo"),"creditcard-number-fail1":I18n.t("formhelper.creditcard_number_fail1"),"creditcard-securitycode-ok":I18n.t("formhelper.creditcard_securitycode_ok"),"creditcard-securitycode-fail-visa":I18n.t("formhelper.creditcard_securitycode_fail_visa"),"creditcard-securitycode-fail-master":I18n.t("formhelper.creditcard_securitycode_fail_master"),"creditcard-securitycode-fail-amex":I18n.t("formhelper.creditcard_securitycode_fail_amex"),"creditcard-securitycode-fail-elo":I18n.t("formhelper.creditcard_securitycode_fail_elo")}}function backbone_proccess_error(xhr){if(!xhr.getAllResponseHeaders())return!1;var response=xhr.responseText;try{var response_obj=JSON.parse(response);response_obj.code&&99==response_obj.code||Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}catch(e){}return!0}function getfu(name){var ret=null;return(test=new RegExp("[?&]"+encodeURIComponent(name)+"=([^&]*)").exec(location.search))&&(ret=1*decodeURIComponent(test[1])),ret||(test=new RegExp("[?&]"+encodeURIComponent(name)+"=([^&]*)").exec(Backbone.history.fragment))&&(ret=1*decodeURIComponent(test[1])),ret}function get_meta(meta_name,force){var ret="";meta_content_cache[meta_name]&&!force?ret=meta_content_cache[meta_name]:$("meta[name='"+meta_name+"']").get(0)&&(ret=$("meta[name='"+meta_name+"']").attr("content"),meta_content_cache[meta_name]=ret);return ret}function set_meta(meta_name,value){$('meta[name="'+meta_name+'"]').attr("content",value)}function loadGoogleMapsApi(){var lang=get_meta("lang");if(lang=lang.replace("_","-"),"undefined"==typeof google){var script=document.createElement("script");script.src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyBEqhnnV8XkCo5A0CZLQlwOImBRKnrAYkg&channel=icasei-front&language="+lang+"&callback=loadGoogleMapsApiReady",script.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(script)}else loadGoogleMapsApiReady()}function loadGoogleMapsApiReady(){$("body").trigger("gmap_loaded")}function load_css(cssPath){if("true"!=get_meta("CD")){var cssNode=document.createElement("LINK");cssNode.rel="stylesheet",cssNode.type="text/css",cssNode.href=cssPath;var headNode=document.getElementsByTagName("HEAD");null!=headNode[0]&&headNode[0].appendChild(cssNode)}}function load_js(scriptPath,callback,force){if("true"!=get_meta("CD")){var obj=$("head script[src~='"+scriptPath+"']");if(force&&obj.get(0)&&obj.remove(),(obj=$("head script[src~='"+scriptPath+"']")).get(0))null!=callback&&callback.call(this);else{var scriptNode=document.createElement("SCRIPT");scriptNode.type="text/javascript",scriptNode.src=scriptPath,scriptNode.async=!0,scriptNode.defer=!0;var c=callback;null!=c&&(scriptNode.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||c&&(c.call(this),c=null)},scriptNode.onload=function(){c&&(c.call(this),c=null)});var headNode=document.getElementsByTagName("HEAD");null!=headNode[0]&&headNode[0].appendChild(scriptNode)}}else null!=callback&&callback.call(this)}function load_noivos(login,callback){var search="";login&&(search=login),"true"==get_meta("CD")&&(search=get_meta("noivos"));var noivo=new Noivo;noivo.fetch({cache:!1,data:{login:search},success:function(){set_meta("csrf-token",noivo.get("csrf")),window.noivo=noivo,callback&&callback.call(noivo,!0)},error:function(e,xhr){if("true"!=get_meta("CD"))backbone_proccess_error(xhr);else{var response=xhr.responseText;console.error(response)}}})}function check_localdata(name){return!!$("script[id='"+name+"']").get(0)}function check_localstorage(){return"true"==get_meta("CD")}function render_template(template_id,url,params,callback,cache){var ret=null,template="",_cache=!!cache,template_el=$("#"+template_id);if(template_el.get(0))return template=template_el.html(),ret=new EJS({text:template}).render(params),void callback.call(null,ret);var obj={lang:get_meta("lang")},url_params=$.param(obj);return callback?$.ajax({url:url,type:"GET",cache:_cache,dataType:"text",data:url_params,success:function(data_ret){ret=new EJS({text:data_ret}).render(params),callback.call(null,ret)}}):($.ajax({url:url,type:"GET",cache:_cache,dataType:"text",async:!1,data:url_params,success:function(data_ret){template=data_ret}}),ret=new EJS({text:template}).render(params)),ret}function loadCss(url){var link=document.createElement("link");link.type="text/css",link.rel="stylesheet",link.href=url,document.getElementsByTagName("head")[0].appendChild(link)}function load_start(){new Date}function load_end(){new Date}function get_main_container(){return $(".inner-content")}function change_content(new_node,callback,options){var fn=function(){window.animating=!0;var container=get_main_container();options.container&&(container=$(options.container));var destroy_view=!0;"undefined"!=typeof options.destroy_view&&(destroy_view=options.destroy_view);var animation_time=500;"undefined"!=typeof options.animation_time&&(animation_time=options.animation_time),options.no_scroll||$("body,html").animate({scrollTop:0},400),container.animate({opacity:0},animation_time,function(){App&&App.current_view&&destroy_view&&(App.current_view.remove&&App.current_view.remove(),App.current_view=null),container.empty(),AngularHelper.compile(container,new_node),$(document).trigger("icasei_content_change"),callback&&callback.call(this),container.animate({opacity:1},animation_time,function(){window.animating=!1})})};options.template?$(".template-layout-"+options.template).get(0)?fn():render_template("template_main_"+options.template+"_id","/templates/backbone/"+options.noivos.get("id_noivo")+"/layout/"+options.noivos.get("template_html_version")+"/"+options.template,{noivos:options.noivos.attributes},function(ret){$("#main_template").empty().append($(ret)),$(document).trigger("icasei_template_change"),fn()}):fn()}function I18n_translate(){return I18n.t.apply(I18n,arguments)}function components_path(path){return"true"!=get_meta("CD")?"'/"+path+"'":"'"+path+".html'"}function get_image_path(login,image,area){return area?"/userfiles/"+login.charAt(0)+"/"+login+"/imagens/"+area+"/"+image:"/userfiles/"+login.charAt(0)+"/"+login+"/imagens/"+image}function image_thumb(image,options){var scale=1;0==options.scale&&(scale=options.scale);var crop=1;0==options.crop&&(crop=options.crop);var use=0;0!=options.use&&(use=options.use);var width=0;options.width&&(width=options.width);var height=0;options.height&&(height=options.height);var min_width=0;options.min_width&&(min_width=options.min_width);var min_height=0;options.min_height&&(min_height=options.min_height);var where="";return options.where&&(where=options.where),"/images/thumb?scale="+scale+"&crop="+crop+"&use="+use+"&where="+where+"&width="+width+"&height="+height+"&min_width="+min_width+"&min_height="+min_height+"&img=/produtos/"+image}function user_image_thumb(image,options){var login=options.login,scale=1;"scale"in options&&(scale=options.scale);var crop=1;"crop"in options&&(crop=options.crop);var width=0;"width"in options&&(width=options.width);var height=0;"height"in options&&(height=options.height);var min_width=0;"min_width"in options&&(min_width=options.min_width);var min_height=0;"min_height"in options&&(min_height=options.min_height);var effect=0;"effect"in options&&(effect=options.effect);var where="";"where"in options&&(where=options.where);var left=0;options.left&&(left=options.left);var top=0;options.top&&(top=options.top);var use=0;return options.use&&(use=options.use),"/images/thumb/"+scale+"/"+crop+"/"+where+"/"+width+"/"+height+"/"+min_width+"/"+min_height+"/"+effect+"/"+left+"/"+top+"/"+use+"/"+login.charAt(0)+"/"+login+"/"+image}function photos_image_thumb(image,options){return user_image_thumb("imagens/album/"+image,options)}function store_image_thumb(image,options){var scale=1;0==options.scale&&(scale=options.scale);var crop=1;0==options.crop&&(crop=options.crop);var where="";options.where&&(where=options.where);var width=0;options.width&&(width=options.width);var height=0;options.height&&(height=options.height);var min_width=0;options.min_width&&(min_width=options.min_width);var min_height=0;options.min_height&&(min_height=options.min_height);var effect=0;options.effect&&(effect=options.effect);var left=0;options.left&&(left=options.left);var top=0;options.top&&(top=options.top);var use=0;return options.use&&(use=options.use),"/images/thumb/"+scale+"/"+crop+"/"+where+"/"+width+"/"+height+"/"+min_width+"/"+min_height+"/"+effect+"/"+left+"/"+top+"/"+use+"/"+image}function getParameterByName(name,url){name=name.replace(/[\[\]]/g,"\\$&");var results=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null}function getMetaContent(name,attribute){if("undefined"!=typeof document)return document.querySelector("meta[name='"+name+"']").getAttribute(attribute)}function setCookie(cname,cvalue,exdays){if("undefined"!=typeof document){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}}function getCookie(cname){if("undefined"!=typeof document){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}}function get_format_date(){return"pt_br"==I18n.locale?"DD[/]MM[/]YYYY":"MM[/]DD[/]YYYY"}function get_hours(date){return moment(date).hour()}function get_minutes(date){return moment(date).minutes()}function date_format(date,format,locale){return"UTC"==locale?moment.utc(date).format(format):moment(date).format(format)}function sortByKey(array,key,key2){return array.sort(function(a,b){var x=a[key][key2],y=b[key][key2];return x<y?-1:x>y?1:0})}function normalize_url_video(url_video){return/^([a-zA-Z0-9_\-+]{11})$/.test(url_video)?"http://www.youtube.com/embed/"+url_video:/www.youtube.com\/embed/.test(url_video)||/http(s)?:\/\/vimeo.com/.test(url_video)?/http(s)?:\/\/vimeo.com/.test(url_video)?url_video.replace(/http(s)?:\/\/vimeo\.com\/(.*)/g,"https://player.vimeo.com/video/$2"):url_video:url_video.replace(/http(s)?\:\/\/(www\.youtube\.com|youtu\.be\/)(\/watch\?v\=)?([a-zA-Z0-9_\-+]{11})($|\&(.*))/g,"http://www.youtube.com/embed/$4")}function currency_format(value,format){return Globalize.format(value,format)}function pular(){var root=$("meta[name='root']").attr("content"),lang=$("meta[name='lang']").attr("content");Backbone.history.navigate(root+"/"+lang+"/home",!0)}function share_facebook(){var nome_casal=$("meta[name='nomecasal']").attr("content"),imagem_capa=($("meta[name='noivos']").attr("content"),$("meta[name='dominio']").attr("content"),$("meta[name='imagem_capa']").attr("content"));nome_casal=nome_casal.replace(/\&/g,"e");var url="https://www.facebook.com/dialog/feed?app_id=211260932253820&link="+document.location.href+"&picture="+imagem_capa+"&name="+("Site de casamento de "+nome_casal)+"&caption="+"Compartilhamento de p\xe1gina"+"&description="+("Compartilhou uma p\xe1gina do site de casamento de "+nome_casal)+"&redirect_uri="+"http://sites.icasei.com.br/social/facebook/confirm";return window.open(url,"_blank"),!1}function share_twitter(){var nome_casal=encodeURIComponent($("meta[name='nomecasal']").attr("content"));$("meta[name='noivos']").attr("content");nome_casal=nome_casal.replace(/\&/g,"e");$("meta[name='dominio']").attr("content"),$("meta[name='root']").attr("content");var options={long_url:encodeURIComponent(window.location)},params=$.param(options),depoimento="";return $.ajax({url:"/social/shortener",type:"POST",data:params,dataType:"json",async:!1,success:function(ret){depoimento="Compartilhou uma p\xe1gina do site de casamento de "+nome_casal+": "+ret.id,window.open("http://twitter.com/home?status="+depoimento,"_blank")}}),!1}function share_pinterest(){var nome_casal=encodeURIComponent($("meta[name='nomecasal']").attr("content"));$("meta[name='noivos']").attr("content");nome_casal=nome_casal.replace(/\&/g,"e");$("meta[name='dominio']").attr("content"),$("meta[name='root']").attr("content");var imagem_capa=$("meta[name='imagem_capa']").attr("content"),link=encodeURIComponent(document.location.href),img_link=encodeURIComponent(imagem_capa),description="Site de casamento de "+nome_casal;return window.open("http://pinterest.com/pin/create/button/?url="+link+"&media="+img_link+"&description="+description,"_blank"),!1}function isNumber(e){var charCode=(e=e||window.event).which?e.which:e.keyCode;return!(charCode>31&&(charCode<48||charCode>57))}function closeWindow(){if("loja"==window.name)window.close();else{var root=get_meta("root");document.location.href=root}}function _icasei_log(){get_meta("CD")}function sortByKey(array,key,key2){return array.sort(function(a,b){var x=a[key][key2],y=b[key][key2];return x<y?-1:x>y?1:0})}function params_to_string(parameters){str="";for(var i=0;i<parameters.length;i++)try{str+=JSON.stringify(parameters[i])+";"}catch(ex){}return str}function infinite_pagination(list_selector,max_autopages){$(".infinite-pagination a").length>1&&($(".infinite-pagination").append('<ul class="temp" />'),$(window).scroll(function(){clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){var $loading=$(".infinite-loading"),$pagination=$(".infinite-pagination"),num_pgs=$pagination.find(">a").length;if((pg=$pagination.find(">a.active").index(".infinite-pagination>a")+1)<num_pgs&&(!max_autopages||pg<max_autopages)){var url=($a=$pagination.find("a:eq("+pg+")")).attr("href");$pagination.find(".temp");($container=$(list_selector)).height()+$container.offset().top<$(document).scrollTop()+$(window).height()&&$loading.is(":hidden")&&$loading.fadeIn(300,function(){$("body > div.loading").jLoading("ignore",!0),$.post(url,{post:1},function(data){$("body > div.loading").jLoading("ignore",!1),$container.append(data),$loading.hide(),$pagination.find(">a").removeClass("active"),$a.addClass("active"),pg==num_pgs-1&&$(".after-pagination").show()})})}else{var pg;if((pg=$pagination.find(">a.active").index(".infinite-pagination>a")+1)<num_pgs){var $a,$container;url=($a=$pagination.find("a:eq("+pg+")")).attr("href"),$pagination.find(".temp");($container=$(list_selector)).height()+$container.offset().top<$(document).scrollTop()+$(window).height()&&$loading.is(":hidden")&&$("#manual_load_more").data("page",pg).off("click").on("click",function(){$("#manual_load_more").hide(),$loading.fadeIn(300,function(){$("body > div.loading").jLoading("ignore",!0),$.post(url,{post:1},function(data){$("body > div.loading").jLoading("ignore",!1),$container.append(data),$loading.hide(),$pagination.find(">a").removeClass("active"),$a.addClass("active"),pg==num_pgs-1&&$(".after-pagination").show()})})}).show()}}},250))}))}var iCaseiApp=angular.module("iCaseiApp",["ngAnimate","ngResource","iCaseiControllers","ngCookies"]);iCaseiApp.config(["$controllerProvider","$compileProvider",function($controllerProvider,$compileProvider){iCaseiApp.controllerProvider=$controllerProvider.register,iCaseiApp.lazyController=function(name,controller){window[name+"_controller"]||(window[name+"_controller"]=!0,$controllerProvider.register(name,controller))},iCaseiApp.lazyDirective=function(name,controller){window[name+"_directive"]||(window[name+"_directive"]=!0,$compileProvider.directive(name,controller))}}]),iCaseiApp.config(["$httpProvider",function($httpProvider){$httpProvider.defaults.headers.common["X-CSRF-Token"]=$("meta[name=csrf-token]").attr("content"),$httpProvider.defaults.withCredentials=!1,$httpProvider.defaults.useXDomain=!0,$httpProvider.defaults.headers.common["Access-Control-Allow-Headers"]="*",$httpProvider.defaults.headers.common["Access-Control-Allow-Methods"]="*",$httpProvider.defaults.headers.common["Access-Control-Allow-Origin"]="*",delete $httpProvider.defaults.headers.common["X-Requested-With"]}]),iCaseiApp.directive("script",function(){return{restrict:"E",scope:!1,link:function(scope,elem,attr){if("text/javascript-lazy"===attr.type){var code=elem.text();new Function(code)()}}}}),iCaseiApp.directive("ngIcaseiInclude",["$compile","$http",function($compile,$http){return{restrict:"A",scope:!0,link:function(scope,element,attr){var id=attr.ngIcaseiInclude;id=(id=id.replace(/\//gi,"_")).replace(/\'/gi,"");var template=document.getElementById(id);null===template?$http({method:"GET",url:attr.ngIcaseiInclude.replace(/\'/gi,"")}).then(function(response){element.append(jQuery(response.data)),$compile(element.contents())(scope)},function(response){alert("Erro ->"+response.data)}):(element.append(template.content.cloneNode(!0)),$compile(element.contents())(scope))}}}]);var iCaseiControllers=angular.module("iCaseiControllers",[]);window.iCaseiApp=iCaseiApp,window.iCaseiControllers=iCaseiControllers;var AngularHelper=function(){var AngularHelper=function(){};return AngularHelper.compile=function($targetDom,htmlToCompile){angular.element($targetDom).injector().invoke(["$window","$location","$compile","$rootScope",function($window,$location,$compile,$rootScope){var $scope=$targetDom.append(htmlToCompile).scope();$compile($targetDom)($scope||$rootScope),$scope.$apply()}])},AngularHelper}();!function(){function forecastService($resource){return $resource("https://services.icasei.com.br/api/publico/v1/forecast",{latLng:"@latLng",lang:"pt",units:"ca"},{listar:{method:"GET"}},{})}iCaseiApp.service("forecastService",forecastService),forecastService.$inject=["$resource"]}(),function(){function forecastController(){}iCaseiApp.controller("forecastController",forecastController),forecastController.$inject=["$scope","forecastService"]}(),function(){"use strict";function forecastWidget(forecastService){function controller($scope){forecastService.listar({latLng:$scope.latLng},{},function(data){$scope.title=I18n.t("forecast.title"),$scope.signature=I18n.t("forecast.signature");var forecasts=data.data.daily.data.slice(0,5);$scope.forecasts=forecasts.map(function(forecast){return{date:formatDate(forecast.time),temperatureMin:Math.round(forecast.temperatureMin),temperatureMax:Math.round(forecast.temperatureMax),chanceOfPrecipitation:100*forecast.precipProbability,windSpeed:Math.round(forecast.windSpeed),weatherIconClass:getWeatherIconClass(forecast.icon)}}),$scope.forecasts[0].temperatureCurrent=Math.round(data.data.currently.temperature),$scope.forecasts[0].weatherIconClass=getWeatherIconClass(data.data.currently.icon)},function(data){console.log(data)}),$scope.hasWeatherConditions=function(){return $scope.temperature&&$scope.weatherIconClass},$scope.hasForecasts=function(){return $scope.forecasts&&$scope.forecasts.length>0},$scope.hasCurrentWeatherConditions=function(){return angular.isDefined($scope.forecasts[0].temperatureCurrent)}}var directive={controller:controller,restrict:"E",scope:{latLng:"@latLng"},templateUrl:"/components/forecast/component.html"},getWeatherIconClass=function(weatherIconCode){return weatherIconCode&&weatherIconClasses.hasOwnProperty(weatherIconCode)?weatherIconClasses[weatherIconCode]:defaultWeatherIcon},weatherIconClasses={"clear-day":"wi-day-sunny hot","clear-night":"wi-day-sunny hot",rain:"wi-rain cold",snow:"wi-snow cold",sleet:"wi-sleet cold",wind:"wi-strong-wind cold",fog:"wi-fog",cloudy:"wi-cloudy","partly-cloudy-day":"wi-day-cloudy hot","partly-cloudy-night":"wi-day-cloudy hot"},defaultWeatherIcon="wi-na",formatDate=function(inuxEpoch){var date=new Date(1e3*inuxEpoch),weekDays=[I18n.t("forecast.days.domingo"),I18n.t("forecast.days.segunda"),I18n.t("forecast.days.terca"),I18n.t("forecast.days.quarta"),I18n.t("forecast.days.quinta"),I18n.t("forecast.days.sexta"),I18n.t("forecast.days.sabado")],dirtyDay=date.getDate();return(dirtyDay<10?"0"+dirtyDay:dirtyDay)+"/"+(date.getMonth()+1)+" ("+weekDays[date.getDay()]+")"};return controller.$inject=["$scope","$element","$attrs"],directive}iCaseiApp.directive("forecastWidget",forecastWidget),forecastWidget.$inject=["forecastService"]}(),function(){function enqueteController(){}iCaseiApp.controller("enqueteController",enqueteController)}(),function(){"use strict";function enqueteWidget(){function controller($scope,$window,$element,$attrs,$sce){var template_enquete=new TemplateEnquete({id_enquete:$scope.data}),login=get_meta("noivos");$scope.usuario={resposta:null,error:!1,error_message:"",resposta_enviada:!1},$scope.selection="voto",$scope.CD=get_meta("CD"),$scope.titulo="",$scope.subTitulo="",$scope.respostas=null,$scope.responseTooLarge=!1,$scope.status=0,$scope.btn_votar_label=I18n.t("formhelper.buttons.send"),$scope.btn_ver_resultado_label=I18n.t("formhelper.buttons.see_results"),$scope.btn_voltar_votar_label=I18n.t("formhelper.buttons.return_vote");var updateScope=function(){$scope.$apply(function(){$scope.titulo=template_enquete.get("enquete"),$scope.subTitulo=template_enquete.get("subtitulo"),$scope.status=template_enquete.get("status"),$scope.enqueteTotal=template_enquete.get("total"),$scope.respostas=template_enquete.get("respostas"),$scope.respostas&&$scope.respostas.map(function(row){(row.resposta.length>80||$window.outerWidth<=768)&&($scope.responseTooLarge=!0)})})};$scope.decodeContent=function(value){return value?$sce.trustAsHtml(value):""},$scope.getSecondButtonText=function(selection){return"respostas"==selection?I18n.t("poll.buttons.back"):I18n.t("poll.buttons.see_answer")},$scope.translateTotalResposta=function(total_resposta){return I18n_translate("poll.votes",{votes:total_resposta})},$scope.formatTotalEnquete=function(valor){return number_format(valor,"n")},load_js("//assets1.icasei.com.br/assets/components_plugins/jquery.easypiechart.min.js",function(){var displayErrorMessage=function(model){1==$scope.versao?$(".enquete-"+$scope.data+" .def-result-message").addClass("error").removeClass("success").html(model.get("message")).show():$(".enquete-"+$scope.data+" div .step1 ul").addClass("enviado")},displayResult=function(){$scope.$apply(function(){$scope.selection="respostas"}),1==$scope.versao?$(".enquete-"+$scope.data+" .def-result-message").html("").hide():($(".enquete-"+$scope.data+" div .step1").removeClass("fadeIn"),$(".enquete-"+$scope.data+" div .step2").addClass("fadeIn"),$(".enquete-"+$scope.data+" .chart").easyPieChart({easing:"easeOut",barColor:"#0f0f0f",trackColor:"#e7e7e7",scaleColor:"transparent",lineCap:"butt",lineWidth:8,size:118,onStep:function(from,to,percent){$(this.el).find(".percent").text(Math.round(percent))}}),$(".enquete_div_principal"+$scope.data).height($(".enquete_div_principal"+$scope.data+" .results").height()))};$scope.mostrarRespostas=function(){"respostas"!=$scope.selection?($scope.selection="respostas",1==$scope.versao?$(".enquete-"+$scope.data+" .def-result-message").html("").hide():($(".enquete-"+$scope.data+" div .step1").removeClass("fadeIn"),$(".enquete-"+$scope.data+" div .step2").addClass("fadeIn"),setTimeout(function(){$(".enquete-"+$scope.data+" .chart").easyPieChart({easing:"easeOut",barColor:"#0f0f0f",trackColor:"#e7e7e7",scaleColor:"transparent",lineCap:"butt",lineWidth:8,size:118,onStep:function(from,to,percent){$(this.el).find(".percent").text(Math.round(percent))}}),$(".enquete_div_principal"+$scope.data).height($(".enquete_div_principal"+$scope.data+" .results").height())},100))):($scope.selection="voto",1==$scope.versao||($(".enquete-"+$scope.data+" div .step2").removeClass("fadeIn"),$(".enquete-"+$scope.data+" div .step1").addClass("fadeIn")))},$(function(){load_noivos(login,function(){noivo=this,template_enquete.fetch({cache:!1,data:{id_noivo:noivo.get("id_noivo")},success:function(){updateScope(),$scope.computarVoto=function(){(new TemplateEnqueteUsuario).save({id_noivo:noivo.get("id_noivo"),enquete:template_enquete.get("id_enquete"),resposta:$scope.usuario.resposta},{wait:!0,success:function(model){model.get("warning")?$scope.$apply(function(){$scope.usuario.error=!0,$scope.usuario.error_message=model.get("message"),displayErrorMessage(model)}):$scope.$apply(function(){$scope.usuario.error=!1,$scope.usuario.error_message="",$scope.usuario.resposta_enviada=!0,template_enquete.fetch({cache:!1,data:{id_noivo:noivo.get("id_noivo")},success:function(){updateScope(),displayResult()}})})},error:function(model,xhr){var response=xhr.responseText,response_obj=JSON.parse(response);$scope.$apply(function(){$scope.usuario.error=!0,$scope.usuario.error_message=response_obj.message})}})},$(".enquete_div_principal"+$scope.data).height($("#enquete_ul").height())}})})})})}var directive={controller:controller,restrict:"E",scope:{data:"@",versao:"@"},templateUrl:"/components/enquete_directive/component.html"};return controller.$inject=["$scope","$window","$element","$attrs","$sce"],directive}iCaseiApp.directive("enqueteWidget",enqueteWidget),iCaseiApp.directive("enqueteError",[function(){function link(scope,element,attrs){function updateError(value,selection){"respostas"!=selection?(1==attrs.isError?element.addClass("error"):element.addClass("success"),value&&""!=value?element.html(value).show():element.hide()):element.hide()}attrs.$observe("errorMessage",function(value){updateError(value,scope.selection)}),scope.$watch(function(scope){return scope.selection},function(){updateError(attrs.errorMessage,scope.selection)})}return{link:link}}]),iCaseiApp.directive("enqueteEnviarBtn",[function(){function link(scope,element,attrs){function updateBtn(){1==attrs.respostaEnviada?"respostas"==scope.selection?(element.text(I18n.t("poll.buttons.sent_vote")),element.show()):element.hide():"respostas"==scope.selection?element.hide():(element.text(I18n.t("poll.buttons.send_vote")),element.show())}attrs.$observe("respostaEnviada",function(value){updateBtn(value)}),scope.$watch(function(scope){return scope.selection},function(value){updateBtn(value)})}return{link:link}}])}();var backboneObjects=new Object,meta_content_cache=new Array,mouseScroll=!1,form_helper_messages={},App=function(){};!function($){BaseBackboneView=Backbone.View.extend({initialize:function(){var self=this;this.render=_.wrap(this.render,function(render){this.beforeRender(),render.call(self),this.afterRender();try{"function"==typeof custom_js&&custom_js()}catch(e){}}),this.remove=_.wrap(this.remove,function(remove){self.before_remove.call(self),remove.call(self),self.after_remove.call(self)})},setMouseScroll:function(value){mouseScroll=value},infinite_pagination:function(list_selector,onload){var self=this;$(".infinite-pagination").data("loading");$(".infinite-pagination a").length>1&&$(window).off("scroll").on("scroll",function(event){0==mouseScroll&&(mouseScroll=!0,clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){var $loading=$(".infinite-loading"),$pagination=$(".infinite-pagination");if($pagination.find(">a.active").length>=1){var num_pgs=$pagination.find(">a").length,pg=$pagination.find(">a.active").index(".infinite-pagination>a")+1;if(pg<num_pgs){var $a=$pagination.find("a:eq("+pg+")"),page=$a.data("page"),$container=$(list_selector);if($container.get(0))$container.height()+$container.offset().top<$(document).scrollTop()+$(window).height()&&$loading.is(":hidden")&&$loading.fadeIn(300,function(){$("body > div.loading").jLoading("ignore",!0),onload.call(self,function(){$loading.hide(),$pagination.find(">a").removeClass("active"),$a.addClass("active"),pg==num_pgs-1&&$(".after-pagination").show()},{page:page,container:$container})});else mouseScroll=!1,event.stopPropagation()}mouseScroll=!1}},250)))})},beforeRender:function(){},afterRender:function(){},before_remove:function(){},after_remove:function(){}}),Backbone.Model.prototype.toJSON=function(){if(this._isSerializing)return this.id||this.cid;this._isSerializing=!0;var json=_.clone(this.attributes);return _.each(json,function(value,name){value&&value.toJSON&&_.isFunction(value.toJSON)&&(json[name]=value.toJSON())}),this._isSerializing=!1,json},"true"!=get_meta("CD")&&(Backbone.History.oldLoadUrl=Backbone.History.prototype.loadUrl,Backbone.History.prototype.loadUrl=function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride);if(window.ga!==undefined){var login=get_meta("noivos"),dominio=get_meta("ga_dominio");window.ga("create","UA-1786921-1","auto",{allowLinker:!0}),window.ga("require","linker"),window.ga("linker:autoLink",dominio),window.ga("set",{dimension1:"front"}),window.ga("send","event","Site","Front",login),window.ga("send","pageview","/"+fragment);var custom_google_tc=get_meta("custom_google_tc");""!=custom_google_tc&&(window.ga("create",custom_google_tc,"auto",{name:"noivo"}),window.ga("noivo.send","pageview","/"+fragment))}else console.error("Google analytics not initialized");return Backbone.History.oldLoadUrl.call(this,fragmentOverride)})}(jQuery),$(document).ajaxError(function(e,xhr,options,thrownError){if(!xhr.getAllResponseHeaders()||0===xhr.status)return e.stopPropagation(),!1;var response=xhr.responseText,response_obj=null;try{"/services/error"!=options.url&&console.error("Erro global ("+options.url+"): "+thrownError+"<br/>"+response),response_obj=JSON.parse(response)}catch(e){response_obj=null}if(response_obj&&response_obj.code&&99==response_obj.code){var root=get_meta("root");return Backbone.history.navigate(root+"/protected",!0),e.stopPropagation(),!1}}),$(document).ready(function(){init_I18n(),window.loading=$(".loading"),window.loading.jLoading(),"true"==get_meta("CD")?Backbone.history.start({pushState:!1,hashChange:!0,root:"/",replace:!1}):Backbone.history.start({pushState:!0,hashChange:!0,root:"/",replace:!1}),$(document).delegate("a","click",function(evt){var backbone=$(this).attr("backbone");if(!backbone||"false"!=backbone){var selectedClass=$(this).data("selectedclass"),menuSelector=$(this).data("menuselector"),href=$(this).attr("href");href&&(href.indexOf("://")>=0||href.indexOf("javascript:")>=0||href.indexOf("mailto:")>=0)||(window.last_href!=href&&window.loading.jLoading("abortAllConnections"),evt.preventDefault(),Backbone.history.navigate(href,{trigger:!0}),window.last_href=href,selectedClass&&menuSelector&&($(menuSelector).removeClass(selectedClass),$(this).parent().addClass(selectedClass)))}})}),jQuery.extend({backboneParseQueryString:function(){var nvpair={},pairs=window.location.search.replace("?","").split("&");return $.each(pairs,function(i,v){var pair=v.split("=");nvpair[pair[0]]=pair[1]}),nvpair}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=Base64._utf8_encode(input);i<input.length;)enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);return output},decode:function(input){var chr1,chr2,chr3,enc2,enc3,enc4,output="",i=0
;for(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)chr1=this._keyStr.indexOf(input.charAt(i++))<<2|(enc2=this._keyStr.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=this._keyStr.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=this._keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3));return output=Base64._utf8_decode(output)},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext},_utf8_decode:function(utftext){for(var string="",i=0,c=c1=c2=0;i<utftext.length;)(c=utftext.charCodeAt(i))<128?(string+=String.fromCharCode(c),i++):c>191&&c<224?(c2=utftext.charCodeAt(i+1),string+=String.fromCharCode((31&c)<<6|63&c2),i+=2):(c2=utftext.charCodeAt(i+1),c3=utftext.charCodeAt(i+2),string+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=3);return string}};try{EJS.Helpers.prototype.I18n_translate=I18n_translate}catch(e){}try{EJS.Helpers.prototype.components_path=components_path}catch(e){}try{EJS.Helpers.prototype.get_image_path=get_image_path}catch(e){}try{EJS.Helpers.prototype.image_thumb=image_thumb}catch(e){}try{EJS.Helpers.prototype.user_image_thumb=user_image_thumb}catch(e){}try{EJS.Helpers.prototype.photos_image_thumb=photos_image_thumb}catch(e){}try{EJS.Helpers.prototype.store_image_thumb=store_image_thumb}catch(e){}try{EJS.Helpers.prototype.date_format=date_format,EJS.Helpers.prototype.get_hours=get_hours,EJS.Helpers.prototype.get_minutes=get_minutes,EJS.Helpers.prototype.getParameterByName=getParameterByName,EJS.Helpers.prototype.getMetaContent=getMetaContent,EJS.Helpers.prototype.setCookie=setCookie,EJS.Helpers.prototype.getCookie=getCookie,EJS.Helpers.prototype.normalize_url_video=normalize_url_video,EJS.Helpers.prototype.sortByKey=sortByKey}catch(e){}var number_format=currency_format;try{EJS.Helpers.prototype.currency_format=currency_format,EJS.Helpers.prototype.number_format=number_format}catch(e){}$(document).ready(function(){var lang_timeout=null;$("#lang .lang-slct").on("click",function(){lang_timeout?(clearTimeout(lang_timeout),lang_timeout=null):($("#lang .lang-list").css({opacity:0}).toggle(),$("#lang .lang-list").is(":visible")&&$("#lang .lang-list").animate({opacity:1},500))}),$("#lang .lang-slct").on("mouseleave",function(){lang_timeout||(lang_timeout=setTimeout(function(){$("#lang .lang-list").animate({opacity:0},500,function(){$("#lang .lang-list").hide(),lang_timeout=null})},300))}),$("#lang .lang-list").on("mouseenter",function(){lang_timeout?(clearTimeout(lang_timeout),lang_timeout=null):($("#lang .lang-list").css({opacity:0}).show(),$("#lang .lang-list").animate({opacity:1},500))}),$("#lang .lang-list").on("mouseleave",function(){lang_timeout||(lang_timeout=setTimeout(function(){$("#lang .lang-list").animate({opacity:0},500,function(){$("#lang .lang-list").hide(),lang_timeout=null})},300))})}),$(document).ready(function(){if(init_I18n(),"true"==get_meta("music")){get_meta("ID");var player_sel=get_meta("player_sel"),music_element=$('<div id="music" class="'+player_sel+' closed"><div id="player1" class="music-player"></div><div id="music_icon" class="side"><div class="on-off"></div><div class="note"></div><div class="eq"></div></div></div><div id="preloader" style="display:none" class="music-icon-stoped"></div><div id="preloader1" style="display:none" class="music-icon"></div>');music_element.css("visibility","hidden"),$("body").prepend(music_element);var width=music_element.width();music_element.find(".note").click(function(){1==music_element.attr("music_hidden")?($(this).removeClass("nopen").addClass("nclose"),music_element.attr("music_hidden","0"),music_element.removeClass("closed"),music_element.animate({left:"0px"},500)):($(this).removeClass("nclose").addClass("nopen"),music_element.attr("music_hidden","1"),music_element.addClass("closed"),music_element.animate({left:-width+"px"},500))}),music_element.find(".eq,.on-off").click(function(){$(".play-area div").trigger("click")}),music_element.css("left",-width+"px"),music_element.attr("music_hidden","1"),music_element.css("visibility","");var autoplay=get_meta("autoplay"),volume=get_meta("volume"),askToPlay=!1,aE=null;"?prw=1"==window.location.search&&(autoplay="false"),autoplay&&"true"==autoplay.toLowerCase()?(autoplay=!0,askToPlay=!1):autoplay&&"false"==autoplay.toLowerCase()?(autoplay=!1,askToPlay=!1):(autoplay=!0,askToPlay=!0),volume&&(volume=parseInt(volume));var music_player_element=$("#music .music-player");if(music_player_element.get(0)){var prefix="";"true"!=get_meta("CD")&&(prefix="/");var music_icon=$("#music_icon");template="player_custom",(navigator.userAgent.match(/iphone/i)||navigator.userAgent.match(/android/i))&&(template="mobile"),music_player_element.audioPlayer({template:template,cssTemplate:"new",autoPlay:autoplay,askToPlay:askToPlay,volume:volume,pauseaE:function(){aE&&aE.pause()},element:"#music_playlist a",basePath:prefix+"assets/flash/audioplayer",loadingStr:I18n.t("audioplayer.loading_str"),askTitleStr:I18n.t("audioplayer.ask_title_str"),askStr:I18n.t("audioplayer.ask_str"),askBtns:[I18n.t("audioplayer.ask_yes"),I18n.t("audioplayer.ask_no")],onNotSupport:function(){},onStop:function(){music_icon.removeClass("music-icon").addClass("music-icon-stoped")},onPause:function(){music_icon.removeClass("music-icon").addClass("music-icon-stoped")},onPlay:function(){music_icon.removeClass("music-icon-stoped").addClass("music-icon")}});var getArtistCover=function(){var artist=$(".artist.artist-str").text();artist=artist.toLowerCase(),$(".info.music-info").find(".artist-cover").length?$(".info.music-info .artist-cover").css("background-image",'url("/assets/audioplayer/default/default-cover-art.png")'):$(".info.music-info").prepend('<div class="artist-cover" style="background-image: url(\'/assets/audioplayer/default/default-cover-art.png\')"></div>'),""!=artist||"artista desconhecido"!==artist&&"unknown artist"!==artist?$.ajax({method:"GET",url:"http://ws.audioscrobbler.com/2.0/",data:{method:"artist.getinfo",artist:$(".artist.artist-str").text(),api_key:"51f52982a93abe5e49bc00c7db5d07e0",format:"json"},success:function(data){if(data.artist){var bg=data.artist.image[0]["#text"];$(".info.music-info .artist-cover").css("background-image",'url("'+bg+'")')}},error:function(){$(".info.music-info .artist-cover").css("background-image",'url(/assets/audioplayer/default/default-cover-art.png")')}}):$(".info.music-info .artist-cover").css("background-image",'url("/assets/audioplayer/default/default-cover-art.png")')};$(".info.music-info .artist-str").bind("DOMSubtreeModified",function(){$(".info.music-info .artist-str").text()!==I18n.t("audioplayer.loading_str")&&getArtistCover()}),0===player_sel.indexOf("player-default")&&("mobile"==template?$("#music").removeClass("player-default"):(getArtistCover(),$(".seeker-area").insertAfter(".artist-str"))),0===player_sel.indexOf("player6")&&(music_element.css("height","154px"),$("#lang").css("bottom","165px"),$(".div-aux-1").append('<div id="move_barr" class="tuner-bar"></div>'),$(".control").delegate(".prev,.next","click",function(){null===aE&&((aE=document.createElement("audio")).src="/assets/audioplayer/player6/Loop.mp3",aE.volume=.4),aE.play(),$("#move_barr").animate({left:"+=30"},1e3,function(){$("#move_barr").animate({left:"-=10"},500,function(){$("#move_barr").animate({left:"+=50"},100,function(){$("#move_barr").animate({left:"-=65"},1e3,function(){aE&&aE.pause()})})})})}))}}});var FB=null;$(document).ready(function(){init_I18n(),$(document).on("icasei_template_change",function(){(load_noivos(get_meta("noivos"),function(success){if(success){var noivos=this,diff=Math.round((moment(date_format(noivos.get("data_casamento_dt"),"DD[/]MM[/]YYYY"),"DD[/]MM[/]YYYY").toDate()-moment(date_format(noivos.get("data_atual"),"DD[/]MM[/]YYYY"),"DD[/]MM[/]YYYY").toDate())/864e5),diff_str="";if(diff>0)diff_str=1==diff?I18n.t("layout.tomorrow"):I18n.t("layout.future_wedding_date",{dias:diff});else if(diff<0)if(-1==diff)diff_str=I18n.t("layout.yesterday");else{var d=-1*diff;diff_str=I18n.t("layout.past_wedding_date",{dias:d})}else diff_str=I18n.t("layout.today");var qtd_acesso=noivos.get("qtd_acessos");$("#header #days").html(diff_str),diff<0&&1!=noivos.get("disableetiqueta")&&($("#header #married").show(),$("#married").show()),$("#footer .qtd-pessoas").html(qtd_acesso)}}),"true"!=get_meta("CD"))&&(null!=FB&&null!=FB.XFBML?FB.XFBML.parse():load_js("//connect.facebook.net/"+I18n.t("layout.facebook_language")+"/all.js",function(){try{FB&&(FB.init({appId:"211260932253820",status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.XFBML.parse())}catch(e){console.error("Erro ao iniciar facebook")}}))}),$(document).trigger("icasei_template_change")});var HomeController=null;jQuery,HomeController=Backbone.Router.extend({routes:{index:"load",":login":"load",":login/":"load",":login/index":"load",":login/:lang":"load","*action":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_imagens_home=new TemplateImagemHome,home_flash=new HomeFlash,imagesLoaded=!1,flashLoaded=!1,fn=function(){if(imagesLoaded&&flashLoaded)if(home_flash&&home_flash.has("id_home_flash"))backboneObjects.index_view=new IndexView({noivos:noivos,imagem_home:template_imagens_home,flash:home_flash,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"flash",noivos:noivos}):(App.current_view=self,this.render())}});else{var root=get_meta("root"),first_page=get_meta("first_page");"store"==first_page?document.location.href="https://sites.icasei.com.br"+root+"/"+first_page:Backbone.history.navigate(root+"/"+first_page,!0)}};template_imagens_home.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){imagesLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),home_flash.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){flashLoaded=!0,fn.call(this)},error:function(){var root=get_meta("root"),first_page=get_meta("first_page");"store"==first_page?document.location.href="https://sites.icasei.com.br"+root+"/"+first_page:Backbone.history.navigate(root+"/"+first_page,!0)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.home_controller=new HomeController;var AboutController=null;jQuery,AboutController=Backbone.Router.extend({routes:{about:"load",":login/about":"load",":lang/about":"load",":login/:lang/about":"load",":login/about.html":"load",":login/:lang/about.html":"load"},initialize:function(){},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_about=new TemplateAbout,menu_noivo=new MenuNoivo,aboutLoaded=!1,menuLoaded=!1,fn=function(){aboutLoaded&&menuLoaded&&(backboneObjects.about_view=new AboutView({noivos:noivos,about:template_about,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,self.render())}}))};template_about.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){aboutLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:7},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.about_controller=new AboutController;var AlbumController=null;jQuery,AlbumController=Backbone.Router.extend({routes:{":login/album/show/:id.html":"load",":login/album/show/:id/:page.html":"load",":login/:lang/album/show/:id.html":"loadLang",":login/:lang/album/show/:id/:page.html":"loadLang","album/show/:id":"loadAlbum","album/show/:id/:page":"loadAlbum",":login/album/show/:id":"load",":login/album/show/:id/:page":"load","album/:lang/show/:id":"loadAlbumLang","album/:lang/show/:id/:page":"loadAlbumLang",":login/:lang/album/show/:id":"loadLang",":login/:lang/album/show/:id/:page":"loadLang"},load:function(login,id,page){this.loadAlbum(id,page,login)},loadLang:function(login,lang,id,page){this.loadAlbum(id,page,login)},loadAlbumLang:function(lang,id){this.loadAlbum(id)},loadAlbum:function(id,page,login){load_noivos(login,function(success){if(success){var noivos=this,template_album=new TemplateAlbum;template_album.fetch({cache:!1,data:{id_noivo:parseInt(noivos.get("id_noivo")),id:parseInt(id),page:parseInt(page)},success:function(){"v2"==noivos.get("template_html_version")?backboneObjects.album_view=new AlbumViewV2({noivos:noivos,photos:template_album,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}):backboneObjects.album_view=new AlbumView({noivos:noivos,photos:template_album,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}})},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.album_controller=new AlbumController;var BestmanController=null;jQuery,BestmanController=Backbone.Router.extend({routes:{bestman:"load",":login/bestman":"load",":lang/bestman":"load",":login/:lang/bestman":"load",":login/bestman.html":"load",":login/:lang/bestman.html":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_padrinho_categorias=new TemplatePadrinhoCategorias,menu_noivo=new MenuNoivo,categoryLoaded=!1,menuLoaded=!1,fn=function(){categoryLoaded&&menuLoaded&&(backboneObjects.bestman_view=new BestmanView({noivos:noivos,categories:template_padrinho_categorias,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}))};template_padrinho_categorias.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){categoryLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:24},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.bestman_controller=new BestmanController;var BlogController=null;jQuery,BlogController=Backbone.Router.extend({routes:{":login/blog.html":"load",":login/:lang/blog.html":"loadLang",blog:"loadBlog","blog/:page":"loadBlog",":login/blog":"load",":login/blog/:page":"load",":lang/blog":"loadBlogLang",":lang/blog/:page":"loadBlogLang",":login/:lang/blog":"loadLang",":login/:lang/blog/:page":"loadLang"},load:function(login,page){this.loadBlog(page,login)},loadLang:function(login,lang,page){this.loadBlog(page,login)},loadBlogLang:function(lang,page){this.loadBlog(page)},loadBlog:function(page,login){page||(page="1"),load_noivos(login,function(success){if(success){var noivos=this,template_blog_post=new TemplateBlogPost,menu_noivo=new MenuNoivo,captcha=new Captcha,blogLoaded=!1,menuLoaded=!1,captchaLoaded=!1,fn=function(){blogLoaded&&menuLoaded&&captchaLoaded&&("v2"==noivos.get("template_html_version")?backboneObjects.blog_view=new BlogViewV2({noivos:noivos,entries:template_blog_post,pagina:menu_noivo,captcha:captcha,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}):backboneObjects.blog_view=new BlogView({noivos:noivos,entries:template_blog_post,pagina:menu_noivo,captcha:captcha,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}))};template_blog_post.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),page:page},success:function(){blogLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:22},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),captcha.fetch({cache:!1,data:{object:"comment"},success:function(){captchaLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.blog_controller=new BlogController;var GiftController=null;jQuery,GiftController=Backbone.Router.extend({routes:{gifts:"load",":login/gifts":"load",":lang/gifts":"load",":login/:lang/gifts":"load",":login/gifts.html":"load",":login/:lang/gifts.html":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_lista_presente=new TemplateListaPresente,menu_noivo=new MenuNoivo,templateLoaded=!1,menuLoaded=!1,fn=function(){templateLoaded&&menuLoaded&&(backboneObjects.gift_view=new GiftView({noivos:noivos,gifts:template_lista_presente,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}))};template_lista_presente.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){templateLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:8},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.gift_controller=new GiftController;var HintsController=null;jQuery,HintsController=Backbone.Router.extend({routes:{":login/hints/:place_id.html":"load",":login/:lang/hints/:place_id.html":"loadLang","hints/:place_id":"loadPlace",":login/hints/:place_id":"load",":lang/hints/:place_id":"loadPlaceLang",":login/:lang/hints/:place_id":"loadPlaceLangLogin"},initialize:function(){},load:function(login,place_id){this.loadPlace(place_id,login)},loadLang:function(login,lang,place_id){this.loadPlace(place_id,login)},loadPlaceLangLogin:function(login,lang,place_id){this.loadPlace(place_id,login)},loadPlaceLang:function(lang,place_id){this.loadPlace(place_id)},loadPlace:function(place_id,login){load_noivos(login,function(success){if(success){var noivos=this,template_local=new TemplateLocal,menu_noivo=new MenuNoivo,localLoaded=!1,menuLoaded=!1,fn=function(){localLoaded&&menuLoaded&&("v2"==noivos.get("template_html_version")?backboneObjects.hints_view=new HintsViewV2({noivos:noivos,dicas:template_local,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}):backboneObjects.hints_view=new HintsView({noivos:noivos,dicas:template_local,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}))};template_local.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id:place_id},success:function(){localLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:parseInt(place_id)},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.hints_controller=new HintsController;HomeController=null;jQuery,HomeController=Backbone.Router.extend({routes:{":login/home":"load",":login/home/index":"load",home:"load",":login/:lang/home":"load",":login/:lang/home/index":"load",":lang/home":"load",":login/home":"load",":login/:lang/home":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_home=new TemplateHome,template_imagens_home=new TemplateImagemHome,template_enquete=new TemplateEnquete,ultimas_fotos=new UltimasFotos,template_rsvp=new MenuNoivo,menu_noivo_atual=new MenuNoivo,msg_pagina=new MenuNoivo,template_msgs_noivo=new TemplateMsgsNoivo,homeLoaded=!1,imagesLoaded=!1,enquetesLoaded=!1,ultimasFotosLoaded=!1,templateRsvpLoaded=!1,menuNoivoLoaded=!1,msgPaginaLoaded=!1,msgMessagesLoaded=!1,fn=function(){homeLoaded&&imagesLoaded&&enquetesLoaded&&ultimasFotosLoaded&&templateRsvpLoaded&&menuNoivoLoaded&&msgPaginaLoaded&&msgMessagesLoaded&&("v2"==noivos.get("template_html_version")?backboneObjects.home_view=new HomeViewV2({noivos:noivos,imagens:template_imagens_home,home:template_home,enquete:template_enquete,ultimas_fotos:ultimas_fotos,template_rsvp:template_rsvp,pagina:menu_noivo_atual,msg_pagina:msg_pagina,msg_messages:template_msgs_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}):backboneObjects.home_view=new HomeView({noivos:noivos,imagens:template_imagens_home,home:template_home,enquete:template_enquete,pagina:menu_noivo_atual,msg_pagina:msg_pagina,msg_messages:template_msgs_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}))};template_home.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){homeLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),template_imagens_home.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){imagesLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),template_enquete.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){enquetesLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),ultimas_fotos.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),max:8},success:function(){ultimasFotosLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),template_rsvp.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:11},success:function(){templateRsvpLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo_atual.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:6},success:function(){menuNoivoLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),msg_pagina.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:13},success:function(){msgPaginaLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),template_msgs_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){msgMessagesLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.home_controller=new HomeController;var MessagesController=null;jQuery,MessagesController=Backbone.Router.extend({routes:{messages:"load","messages?msg=focus":"load",":login/messages":"load",":lang/messages":"load",":login/:lang/messages":"load",":login/messages":"load",":login/:lang/messages":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_msgs_noivo=new TemplateMsgsNoivo,menu_noivo=new MenuNoivo,captcha=new Captcha,messagesLoaded=!1,menuLoaded=!1,captchaLoaded=!1,fn=function(){messagesLoaded&&menuLoaded&&captchaLoaded&&("v2"==noivos.get("template_html_version")?backboneObjects.messages_view=new MessagesViewV2({noivos:noivos,messages:template_msgs_noivo,pagina:menu_noivo,captcha:captcha,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}):backboneObjects.messages_view=new MessagesView({noivos:noivos,messages:template_msgs_noivo,pagina:menu_noivo,captcha:captcha,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}))};template_msgs_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){messagesLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:13},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),captcha.fetch({cache:!1,data:{object:"message"},success:function(){captchaLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.messages_controller=new MessagesController;var PagesController=null;jQuery,PagesController=Backbone.Router.extend({routes:{":login/pages/show/:id.html":"loadPage",":login/:lang/pages/show/:id.html":"loadPageLang","pages/show/:id":"load",":login/pages/show/:id":"loadPage",":lang/pages/show/:id":"loadLang",":login/:lang/pages/show/:id":"loadPageLang"},load:function(id){this.loadPage(null,id)},loadLang:function(lang,id){this.loadPage(null,id)},loadPageLang:function(login,lang,id){this.loadPage(login,id)},loadPage:function(login,id){load_noivos(login,function(success){if(success){var noivos=this,menu_noivo=new MenuNoivo;menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_menu_noivo:id},success:function(){backboneObjects.pages_view=new PagesView({noivos:noivos,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}})},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.pages_controller=new PagesController;var PlacesController=null;!function($){PlacesController=Backbone.Router.extend({routes:{":login/places/:place_id.html":"load",":login/:lang/places/:place_id.html":"loadLang","places/:place_id":"loadPlace",":login/places/:place_id":"load",":lang/places/:place_id":"loadPlaceLang",":login/:lang/places/:place_id":"loadPlaceLangLogin"},initialize:function(){},load:function(login,place_id){this.loadPlace(place_id,login)},loadLang:function(login,lang,place_id){this.loadPlace(place_id,login)},loadPlaceLangLogin:function(login,lang,place_id){this.loadPlace(place_id,login)},loadPlaceLang:function(lang,place_id){this.loadPlace(place_id)},loadPlace:function(place_id,login){load_noivos(login,function(success){if(success){var noivos=this,template_local=new TemplateLocal,menu_noivo=new MenuNoivo,localLoaded=!1,menuLoaded=!1,fn=function(){localLoaded&&menuLoaded&&("v2"==noivos.get("template_html_version")?backboneObjects.places_view=new PlacesViewV2({noivos:noivos,local:template_local,pagina:menu_noivo,onload:function(){if(18==place_id){var root=$("meta[name='root']").attr("content"),lang=$("meta[name='lang']").attr("content");Backbone.history.navigate(root+"/"+lang+"/hints/18",!0)}else{var self=this;if(0==this.adopted)change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos});else App.current_view=self,this.render()}}}):backboneObjects.places_view=new PlacesView({noivos:noivos,local:template_local,pagina:menu_noivo,onload:function(){if(18==place_id){var root=$("meta[name='root']").attr("content"),lang=$("meta[name='lang']").attr("content");Backbone.history.navigate(root+"/"+lang+"/hints/18",!0)}else{var self=this;if(0==this.adopted)change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos});else App.current_view=self,this.render()}}}))};template_local.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id:place_id},success:function(){localLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:parseInt(place_id)},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.places_controller=new PlacesController}(jQuery);var ProtectedController=null;jQuery,ProtectedController=Backbone.Router.extend({routes:{"protected":"load",":login/protected":"load",":lang/protected":"load",":login/:lang/protected":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this;backboneObjects.protected_view=new ProtectedView({noivos:noivos,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"protected",noivos:noivos}):(App.current_view=self,this.render())}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.protected_controller=new ProtectedController;var RsvpController=null;jQuery,RsvpController=Backbone.Router.extend({routes:{rsvp:"load",":login/rsvp":"load",":lang/rsvp":"load",":login/:lang/rsvp":"load",":login/rsvp.html":"load",":login/:lang/rsvp.html":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_rsvp_config=new TemplateRsvpConfig,menu_noivo=new MenuNoivo,rsvpLoaded=!1,menuLoaded=!1,fn=function(){rsvpLoaded&&menuLoaded&&("v2"==noivos.get("template_html_version")?backboneObjects.rsvp_view=new RsvpViewV2({noivos:noivos,rsvp_config:template_rsvp_config,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,self.render())}}):backboneObjects.rsvp_view=new RsvpView({noivos:noivos,rsvp_config:template_rsvp_config,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,self.render())}}))};template_rsvp_config.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){rsvpLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:11},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.rsvp_controller=new RsvpController;var StoreController=null;jQuery,StoreController=Backbone.Router.extend({routes:{":login/store/index/:id/:id_loja.html":"realodStoreLogin",":login/store/index/:id/:id_loja/:page.html":"realodStoreLoginPage",":login/store/:id/:id_loja.html":"realodStoreLogin",":login/store/:id/:id_loja/:page.html":"loadLoginStorePage",":login/store/:id/:id_loja":"realodStoreLogin",":login/store/:id/:id_loja/:page":"loadLoginStorePage",":login/store/:id/:id_loja/:page/cart":"loadLoginStorePageCart",":login/store/:id/:id_loja/:page/cart_info":"loadLoginStorePageCartInfo",":login/store/:id/:id_loja/:page/payment":"loadLoginStorePagePayment",":login/store/:id/:id_loja/:page/confirm":"loadLoginStorePageConfirm",":login/:lang/store/index/:id/:id_loja.html?mobile=:mobile":"realodStoreLoginLang",":login/:lang/store/index/:id/:id_loja/:page.html?mobile=:mobile":"realodStoreLoginLangPage",":login/:lang/store/:id/:id_loja.html?mobile=:mobile":"realodStoreLoginLang",":login/:lang/store/:id/:id_loja/:page.html":"loadLoginLangStorePage",
":login/:lang/store/:id/:id_loja?mobile=:mobile":"realodStoreLoginLang",":login/:lang/store/:id/:id_loja/:page":"loadLoginLangStorePage",":login/:lang/store/:id/:id_loja/:page/cart":"loadLoginLangStorePageCart",":login/:lang/store/:id/:id_loja/:page/cart_info":"loadLoginLangStorePageCartInfo",":login/:lang/store/:id/:id_loja/:page/payment":"loadLoginLangStorePagePayment",":login/:lang/store/:id/:id_loja/:page/confirm":"loadLoginLangStorePageConfirm",":lang/store/index/:id/:id_loja.html":"realodStoreLang",":lang/store/index/:id/:id_loja/:page.html":"realodStoreLangPage",":lang/store/:id/:id_loja.html":"realodStoreLang",":lang/store/:id/:id_loja/:page.html":"loadLangStorePage",":lang/store/:id/:id_loja":"realodStoreLang",":lang/store/:id/:id_loja/:page":"loadLangStorePage",":lang/store/:id/:id_loja/:page/cart":"loadLangStorePageCart",":lang/store/:id/:id_loja/:page/cart_info":"loadLangStorePageCartInfo",":lang/store/:id/:id_loja/:page/payment":"loadLangStorePagePayment",":lang/store/:id/:id_loja/:page/confirm":"loadLangStorePageConfirm"},realodStoreLogin:function(login,id,id_loja){this.realodStore(login,null,id,id_loja,null)},realodStoreLoginPage:function(login,id,id_loja,page){this.realodStore(login,null,id,id_loja,page)},realodStoreLoginLang:function(login,lang,id,id_loja,mobile){"true"==mobile&&this.createCookie("mobile","true",7),this.realodStore(login,lang,id,id_loja,null)},realodStoreLoginLangPage:function(login,lang,id,id_loja,page,mobile){"true"==mobile&&this.createCookie("mobile","true",7),this.realodStore(login,lang,id,id_loja,page)},realodStoreLang:function(lang,id,id_loja){this.realodStore(null,lang,id,id_loja,null)},realodStoreLangPage:function(lang,id,id_loja,page){this.realodStore(null,lang,id,id_loja,page)},realodStore:function(login,lang,id,id_loja,page){url="/",url+=null!==login&&login!==undefined?login+"/":"",url+=null!==lang&&lang!==undefined?lang+"/":"",url+="store/"+id+"/"+id_loja,url+="/"+(null!==page&&page!==undefined?page:"1"),Backbone.history.navigate(url,!0)},createCookie:function(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"},loadLoginStore:function(login,id,id_loja){this.loadStore(login,null,id,id_loja,null)},loadLoginStorePage:function(login,id,id_loja,page){this.loadStore(login,null,id,id_loja,page)},loadLoginStorePageCart:function(login,id,id_loja,page){this.loadStoreCart(login,null,id,id_loja,page)},loadLoginStorePageCartInfo:function(login,id,id_loja,page){this.loadStoreCartInfo(login,null,id,id_loja,page)},loadLoginStorePagePayment:function(login,id,id_loja,page){this.loadStorePayment(login,null,id,id_loja,page)},loadLoginStorePageConfirm:function(login,id,id_loja,page){this.loadStoreConfirm(login,null,id,id_loja,page)},loadLoginLangStore:function(login,lang,id,id_loja){this.loadStore(login,lang,id,id_loja,null)},loadLoginLangStorePage:function(login,lang,id,id_loja,page){this.loadStore(login,lang,id,id_loja,page)},loadLoginLangStorePageCart:function(login,lang,id,id_loja,page){this.loadStoreCart(login,lang,id,id_loja,page)},loadLoginLangStorePageCartInfo:function(login,lang,id,id_loja,page){this.loadStoreCartInfo(login,lang,id,id_loja,page)},loadLoginLangStorePagePayment:function(login,lang,id,id_loja,page){this.loadStorePayment(login,lang,id,id_loja,page)},loadLoginLangStorePageConfirm:function(login,lang,id,id_loja,page){this.loadStoreConfirm(login,lang,id,id_loja,page)},loadLangStore:function(lang,id,id_loja){this.loadStore(null,lang,id,id_loja,null)},loadLangStorePage:function(lang,id,id_loja,page){this.loadStore(null,lang,id,id_loja,page)},loadLangStorePageCart:function(lang,id,id_loja,page){this.loadStoreCart(null,lang,id,id_loja,page)},loadLangStorePageCartInfo:function(lang,id,id_loja,page){this.loadStoreCartInfo(null,lang,id,id_loja,page)},loadLangStorePagePayment:function(lang,id,id_loja,page){this.loadStorePayment(null,lang,id,id_loja,page)},loadLangStorePageConfirm:function(lang,id,id_loja,page){this.loadStoreConfirm(null,lang,id,id_loja,page)},init_loja:function(noivos,id,id_loja,page,callback){var self=this;if(id=parseInt(id),id_loja=parseInt(id_loja),page=parseInt(page),this.info)self.info.page=page,id&&self.info.id_loja!=id&&(self.info.id_loja=id),id_loja?self.info.id_loja_sel!=id_loja&&(self.info.id_loja_sel=id_loja):id_loja=self.info.id_loja_sel,callback&&callback.call(self,id,id_loja,page);else if(this.info={order:null,id_loja_categoria:-2,id_loja:id,id_loja_sel:id_loja,page:page,guid:Math.floor(1e8*Math.random()+1)},id)id&&self.info.id_loja!=id&&(self.info.id_loja=id),callback&&callback.call(self,id,id_loja,page);else{var cart=new Cart;cart.fetch({data:{id_noivo:noivos.get("id_noivo"),id_loja:id,page:page},success:function(){(id=parseInt(cart.get("id_loja")))||(id=9),self.info.id_loja=id,callback&&callback.call(self,id,id_loja,page)},error:function(){id=9,self.info.id_loja=id,callback&&callback.call(self,id,id_loja,page)}})}},loadStoreConfirm:function(login,lang,id,id_loja,page){var self=this;load_noivos(login,function(success){if(success){var noivos=this;self.init_loja(noivos,id,id_loja,page,function(){cart=new Cart,cart.fetch({data:{id_noivo:noivos.get("id_noivo"),use_last:!0},success:function(){var template_loja_dado=new TemplateLojaDado;template_loja_dado.fetch({data:{id_noivo:noivos.get("id_noivo")},success:function(){backboneObjects.confirm_view=new ConfirmView({noivos:noivos,cart:cart,info:self.info,loja_dado:template_loja_dado,onload:function(){var self=this;!1===this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"store",noivos:noivos}):(App.current_view=self,this.render())}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})})}})},loadStorePayment:function(login,lang,id,id_loja,page){var self=this;load_noivos(login,function(success){if(success){var noivos=this;self.init_loja(noivos,id,id_loja,page,function(id,id_loja,page){cart=new Cart,cart.fetch({data:{id_noivo:noivos.get("id_noivo")},success:function(){if(cart.get("products").length<=0)Backbone.history.navigate("/"+noivos.get("login")+"/store/"+id+"/"+id_loja+"/"+page,!0);else{var template_loja_dado=new TemplateLojaDado;template_loja_dado.fetch({data:{id_noivo:noivos.get("id_noivo")},success:function(){var tipos_pagamentos=new CotaTiposPagamentosNoivo;tipos_pagamentos.fetch({data:{id_noivo:noivos.get("id_noivo")},success:function(){backboneObjects.payment_view=new PaymentView({noivos:noivos,cart:cart,info:self.info,loja_dado:template_loja_dado,tipos_pagamentos:tipos_pagamentos,onload:function(){var self=this;!1===this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"store",noivos:noivos}):(App.current_view=self,this.render())}})},error:function(e,xhr){backbone_proccess_error(xhr)}})},error:function(e,xhr){backbone_proccess_error(xhr)}})}},error:function(e,xhr){backbone_proccess_error(xhr)}})})}})},loadStoreCartInfo:function(login,lang,id,id_loja,page){var self=this;load_noivos(login,function(success){if(success){var noivos=this;self.init_loja(noivos,id,id_loja,page,function(){var template_loja_dado=new TemplateLojaDado;template_loja_dado.fetch({data:{id_noivo:noivos.get("id_noivo")},success:function(){var cart=new Cart;cart.fetch({data:{id_noivo:noivos.get("id_noivo")},success:function(){backboneObjects.cart_info_view=new CartInfoView({noivos:noivos,cart:cart,info:self.info,loja_dados:template_loja_dado,onload:function(){var self=this;!1===this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"store",noivos:noivos}):(App.current_view=self,this.render())}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})})}})},loadStoreCart:function(login,lang,id,id_loja,page){var self=this;load_noivos(login,function(success){if(success){var noivos=this;self.init_loja(noivos,id,id_loja,page,function(){var template_loja_dado=new TemplateLojaDado;template_loja_dado.fetch({data:{id_noivo:noivos.get("id_noivo")},success:function(){var cart=new Cart;cart.fetch({data:{id_noivo:noivos.get("id_noivo")},success:function(){backboneObjects.cart_view=new CartView({noivos:noivos,cart:cart,info:self.info,loja_dados:template_loja_dado,onload:function(){var self=this;!1===this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"store",noivos:noivos}):(App.current_view=self,this.render())}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})})}})},loadStore:function(login,lang,id,id_loja,page){var self=this;load_noivos(login,function(success){if(success){var noivos=this;self.init_loja(noivos,id,id_loja,page,function(id,id_loja,page){var menu_noivo=new MenuNoivo;menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:id,id_loja:id_loja},success:function(){var template_loja_dado=new TemplateLojaDado;template_loja_dado.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){0===template_loja_dado.get("mostraordenacao")&&(self.info.id_loja_categoria=-1),null===self.info.order&&(0===template_loja_dado.get("ordenacao")?self.info.order=5:self.info.order=6);var template_produto=new TemplateProduto;template_produto.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id:menu_noivo.get("recurso").id_tipo_loja,id_loja_categoria:self.info.id_loja_categoria,order:self.info.order,id_loja:id_loja,id_recurso:menu_noivo.get("recurso").id_recurso,page:page},success:function(){var loja_categorias=new LojaCategorias;loja_categorias.fetch({data:{id_noivo:noivos.get("id_noivo"),id_loja:id_loja},success:function(){cart=new Cart,cart.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_loja:id},success:function(){backboneObjects.store_view=new StoreView({noivos:noivos,pagina:menu_noivo,entries:template_produto,loja_dados:template_loja_dado,categorias:loja_categorias,info:self.info,cart:cart,onload:function(){var self=this;!1===this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"store",noivos:noivos}):(App.current_view=self,this.render())}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es. (cart)",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es (categorias).",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es. (produtos)",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es. (loja_dados)",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.store_controller=new StoreController;var SuppliersController=null;jQuery,SuppliersController=Backbone.Router.extend({routes:{suppliers:"load",":login/suppliers":"load",":lang/suppliers":"load",":login/:lang/suppliers":"load",":login/suppliers.html":"load",":login/:lang/suppliers.html":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_fornecedores=new TemplateFornecedores,menu_noivo=new MenuNoivo,suppliersLoaded=!1,menuLoaded=!1,fn=function(){suppliersLoaded&&menuLoaded&&(backboneObjects.suppliers_view=new SuppliersView({noivos:noivos,fornecedores:template_fornecedores,pagina:menu_noivo,onload:function(){var self=this;0==this.adopted?change_content(this.$el,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos}):(App.current_view=self,this.render())}}))};template_fornecedores.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){suppliersLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:14},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.suppliers_controller=new SuppliersController;var Captcha=null;!function(){var local=null,localData=null;check_localstorage("data_captcha")?local=new Backbone.LocalStorage("data_captcha"):localData=new Backbone.LocalData("data_captcha"),Captcha=Backbone.Model.extend({urlRoot:"/services/captcha",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var Cart=null,CartProduct=null,CartItems=null;!function(){var local=null,localData=null;check_localstorage("data_cart")?local=new Backbone.LocalStorage("data_cart"):localData=new Backbone.LocalData("data_cart"),Cart=Backbone.Model.extend({urlRoot:"/services/cart",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),local=null,check_localstorage("cart_product")&&(local=new Backbone.LocalStorage("cart_product")),CartProduct=Backbone.Model.extend({urlRoot:"/services/cart",idAttribute:"id_loja_produtos",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),CartProducts=Backbone.Collection.extend({urlRoot:"/services/cart",localStorage:local,model:CartProduct})}(jQuery);var CotaTipoPagamentoNoivo=null,CotaTiposPagamentosNoivo=null;!function(){var local=null,localData=null;check_localstorage("data_cota_tipo_pagamento_noivo")?local=new Backbone.LocalStorage("data_cota_tipo_pagamento_noivo"):localData=new Backbone.LocalData("data_cota_tipo_pagamento_noivo"),CotaTipoPagamentoNoivo=Backbone.Model.extend({urlRoot:"/services/cota_tipo_pagamento_noivo",idAttribute:"id_pagamento_noivo",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),CotaTiposPagamentosNoivo=Backbone.Collection.extend({model:CotaTipoPagamentoNoivo,localStorage:local,localData:localData,url:"/services/cota_tipo_pagamento_noivo"})}(jQuery);var HomeFlash=null;!function(){var local=null,localData=null;check_localstorage("data_home_flash")?local=new Backbone.LocalStorage("data_home_flash"):localData=new Backbone.LocalData("data_home_flash"),HomeFlash=Backbone.Model.extend({urlRoot:"/services/home_flash",idAttribute:"id_home_flash",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var LojaCategoria=null,LojaCategorias=null;!function(){var local=null,localData=null;check_localstorage("data_loja_categoria")?local=new Backbone.LocalStorage("data_loja_categoria"):localData=new Backbone.LocalData("data_loja_categoria"),LojaCategoria=Backbone.Model.extend({urlRoot:"/services/loja_categoria",idAttribute:"id_loja_categoria",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),LojaCategorias=Backbone.Collection.extend({model:LojaCategoria,localStorage:local,localData:localData,url:"/services/loja_categoria"})}(jQuery);var MenuNoivo=null;!function(){var local=null,localData=null;check_localstorage("data_menu_noivo")?local=new Backbone.LocalStorage("data_menu_noivo"):localData=new Backbone.LocalData("data_menu_noivo"),MenuNoivo=Backbone.Model.extend({urlRoot:"/services/menu_noivo",idAttribute:"id_menu_noivo",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var Noivo=null;!function(){var local=null,localData=null;check_localstorage("data_noivo")?local=new Backbone.LocalStorage("data_noivo"):localData=new Backbone.LocalData("data_noivo"),Noivo=Backbone.Model.extend({urlRoot:"/services/noivo",idAttribute:"id_noivo",localStorage:local,localData:localData,defaults:{},initialize:function(){},parse:function(response){return response.data_casamento_dt=moment(response.data_casamento_dt,"YYYY-MM-DDTHH:mm:ss").toDate(),response}})}(jQuery);var TemplateAbout=null;!function(){var local=null,localData=null;check_localstorage("data_template_about")?local=new Backbone.LocalStorage("data_template_about"):localData=new Backbone.LocalData("data_template_about"),TemplateAbout=Backbone.Model.extend({urlRoot:"/services/template_about",idAttribute:"id_template_sobre",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateAlbum=null;!function(){var local=null,localData=null;check_localstorage("data_template_album")?local=new Backbone.LocalStorage("data_template_album"):localData=new Backbone.LocalData("data_template_album"),TemplateAlbum=Backbone.Model.extend({urlRoot:"/services/template_album",idAttribute:"id_template_album",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateBlogComentario=null;!function(){var local=null,localData=null;check_localstorage("data_template_blog_comentario")?local=new Backbone.LocalStorage("data_template_blog_comentario"):localData=new Backbone.LocalData("data_template_blog_comentario"),TemplateBlogComentario=Backbone.Model.extend({urlRoot:"/services/template_blog_comentario",idAttribute:"id_template_blog_comentario",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateBlogPost=null,TemplateBlogPosts=null;!function(){var local=null,localData=null;check_localstorage("data_template_blog_post")?local=new Backbone.LocalStorage("data_template_blog_post"):localData=new Backbone.LocalData("data_template_blog_post"),TemplateBlogPost=Backbone.Model.extend({urlRoot:"/services/template_blog_post",idAttribute:"id_template_blog_post",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),TemplateBlogPosts=Backbone.Collection.extend({model:TemplateBlogPost,localStorage:local,localData:localData,url:"/services/template_blog_post"})}(jQuery);var TemplateEnquete=null;!function(){var local=null,localData=null;check_localstorage("data_template_enquete")?local=new Backbone.LocalStorage("data_template_enquete"):localData=new Backbone.LocalData("data_template_enquete"),TemplateEnquete=Backbone.Model.extend({urlRoot:"/services/template_enquete/",idAttribute:"id_enquete",localStorage:local,localData:localData,defaults:{}})}(jQuery);var TemplateEnqueteResposta=null;!function(){var local=null,localData=null;check_localstorage("data_template_enqete_resposta")?local=new Backbone.LocalStorage("data_template_enquete_resposta"):localData=new Backbone.LocalData("data_template_enquete_resposta"),TemplateEnqueteResposta=Backbone.Model.extend({urlRoot:"/services/template_enquete_resposta",idAttribute:"id_enquete",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateEnqueteUsuario=null;!function(){var local=null,localData=null;check_localstorage("data_template_enquete_usuario")?local=new Backbone.LocalStorage("data_template_enquete_usuario"):localData=new Backbone.LocalData("data_template_enquete_usuario"),TemplateEnqueteUsuario=Backbone.Model.extend({urlRoot:"/services/template_enquete_usuario",idAttribute:"id_enquete",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateFornecedor=null,TemplateFornecedores=null;!function(){var local=null,localData=null;check_localstorage("data_template_fornecedor")?local=new Backbone.LocalStorage("data_template_fornecedor"):localData=new Backbone.LocalData("data_template_fornecedor"),TemplateFornecedor=Backbone.Model.extend({urlRoot:"/services/template_fornecedor",idAttribute:"id_template_fornecedores",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),TemplateFornecedores=Backbone.Collection.extend({model:TemplateFornecedor,localStorage:local,localData:localData,url:"/services/template_fornecedor"})}(jQuery);var TemplateLocal=null;!function(){var local=null,localData=null;check_localstorage("data_template_local")?local=new Backbone.LocalStorage("data_template_local"):localData=new Backbone.LocalData("data_template_local"),TemplateLocal=Backbone.Model.extend({urlRoot:"/services/template_local",idAttribute:"id_template_local",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateHome=null;!function(){var local=null,localData=null;check_localstorage("data_template_home")?local=new Backbone.LocalStorage("data_template_home"):localData=new Backbone.LocalData("data_template_home"),TemplateHome=Backbone.Model.extend({urlRoot:"/services/template_home",idAttribute:"id_template_home",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateImagemHome=null,TemplateImagensHome=null;!function(){var local=null,localData=null;check_localstorage("data_template_imagem_home")?local=new Backbone.LocalStorage("data_template_imagem_home"):localData=new Backbone.LocalData("data_template_imagem_home"),TemplateImagemHome=Backbone.Model.extend({urlRoot:"/services/template_imagem_home",idAttribute:"id_imagem",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),TemplateImagensHome=Backbone.Collection.extend({model:TemplateImagemHome,localStorage:local,localData:localData,url:"/services/template_imagem_home"})}(jQuery);var TemplateListaPresente=null;!function(){var local=null,localData=null;check_localstorage("data_template_lista_presente")?local=new Backbone.LocalStorage("data_template_lista_presente"):localData=new Backbone.LocalData("data_template_lista_presente"),TemplateListaPresente=Backbone.Model.extend({urlRoot:"/services/template_lista_presente",idAttribute:"id_template_lista_presentes",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);TemplateLocal=null;!function(){var local=null,localData=null;check_localstorage("data_template_local")?local=new Backbone.LocalStorage("data_template_local"):localData=new Backbone.LocalData("data_template_local"),TemplateLocal=Backbone.Model.extend({urlRoot:"/services/template_local",idAttribute:"id_template_local",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateLojaDado=null;!function(){var local=null,localData=null;check_localstorage("data_template_loja_dado")?local=new Backbone.LocalStorage("data_template_loja_dado"):localData=new Backbone.LocalData("data_template_loja_dado"),TemplateLojaDado=Backbone.Model.extend({urlRoot:"/services/template_loja_dado",idAttribute:"id_template_loja_dados",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateMsgNoivo=null,TemplateMsgsNoivo=null;!function(){var local=null,localData=null;check_localstorage("data_template_msg_noivo")?local=new Backbone.LocalStorage("data_template_msg_noivo"):localData=new Backbone.LocalData("data_template_msg_noivo"),TemplateMsgNoivo=Backbone.Model.extend({urlRoot:"/services/template_msg_noivo",idAttribute:"id_template_msg_noivos",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),TemplateMsgsNoivo=Backbone.Collection.extend({model:TemplateMsgNoivo,localStorage:local,localData:localData,url:"/services/template_msg_noivo"})}(jQuery);var TemplatePadrinhoCategoria=null,TemplatePadrinhoCategorias=null;!function(){var local=null,localData=null;check_localstorage("data_template_padrinho_categoria")?local=new Backbone.LocalStorage("data_template_padrinho_categoria"):localData=new Backbone.LocalData("data_template_padrinho_categoria"),TemplatePadrinhoCategoria=Backbone.Model.extend({urlRoot:"/services/template_padrinho_categoria",idAttribute:"id_template_padrinhos_categoria",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),TemplatePadrinhoCategorias=Backbone.Collection.extend({model:TemplatePadrinhoCategoria,localStorage:local,localData:localData,url:"/services/template_padrinho_categoria"})}(jQuery);var TemplatePresente=null;!function(){var local=null,localData=null;check_localstorage("data_template_presente")?local=new Backbone.LocalStorage("data_template_presente"):localData=new Backbone.LocalData("data_template_presente"),TemplatePresente=Backbone.Model.extend({urlRoot:"/services/template_presente",idAttribute:"id_template_presentes",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateProduto=null,TemplateProdutos=null;!function(){var local=null,localData=null;check_localstorage("data_template_produto")?local=new Backbone.LocalStorage("data_template_produto"):localData=new Backbone.LocalData("data_template_produto"),TemplateProduto=Backbone.Model.extend({urlRoot:"/services/template_produto",idAttribute:"id_template_produtos",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),TemplateProdutos=Backbone.Collection.extend({model:TemplateProduto,localStorage:local,localData:localData,url:"/services/template_produto"})}(jQuery);var TemplateRsvp=null;!function(){var local=null,localData=null;check_localstorage("data_template_rsvp")?local=new Backbone.LocalStorage("data_template_rsvp"):localData=new Backbone.LocalData("data_template_rsvp"),TemplateRsvp=Backbone.Model.extend({urlRoot:"/services/template_rsvp",idAttribute:"id_template_rsvp",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateRsvpConfig=null;!function(){var local=null,localData=null;check_localstorage("data_template_rsvp_config")?local=new Backbone.LocalStorage("data_template_rsvp_config"):localData=new Backbone.LocalData("data_template_rsvp_config"),TemplateRsvpConfig=Backbone.Model.extend({urlRoot:"/services/template_rsvp_config",idAttribute:"id_template_rsvp_config",localStorage:local,localData:localData,defaults:{},initialize:function(){}})}(jQuery);var TemplateRsvpConvidado=null,TemplateRsvpConvidados=null;!function(){var local=null,localData=null;check_localstorage("data_template_rsvp_convidado")?local=new Backbone.LocalStorage("data_template_rsvp_convidado"):localData=new Backbone.LocalData("data_template_rsvp_convidado"),TemplateRsvpConvidado=Backbone.Model.extend({urlRoot:"/services/template_rsvp_convidado",idAttribute:"id_convidado",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),TemplateRsvpConvidados=Backbone.Collection.extend({model:TemplateRsvpConvidado,localStorage:local,localData:localData,url:"/services/template_rsvp_convidado"})}(jQuery);var UltimasFotos=null,UltimaFoto=null;!function(){var local=null,localData=null;check_localstorage("data_ultimas_fotos")?local=new Backbone.LocalStorage("data_ultimas_fotos"):localData=new Backbone.LocalData("data_ultimas_fotos"),UltimaFoto=Backbone.Model.extend({urlRoot:"/services/ultimas_fotos",idAttribute:"id_template_album_fotos",localStorage:local,localData:localData,defaults:{},initialize:function(){}}),UltimasFotos=Backbone.Collection.extend({model:UltimaFoto,localStorage:local,localData:localData,url:"/services/ultimas_fotos"})}(jQuery);var AboutView=null;!function($){AboutView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-about");item.get(0)?(this.setElement(item),this.options.onload&&this.options.onload.call(self)):(this.adopted=!1,render_template("template_about_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/about/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,about:this.options.about.attributes,pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))}})}(jQuery);var PhotoViewV2=null;!function($){PhotoViewV2=BaseBackboneView.extend({events:{},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$("div[data-photoid='"+this.model.id_template_album_fotos+"']");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_album_load_more_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/album/"+this.options.noivos.get("template_html_version")+"/load_more",{noivos:this.options.noivos.attributes,photo:this.options.model},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return this}})}(jQuery);var AlbumView=null;!function($){AlbumView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-album-"+this.options.photos.get("album").id_template_album);item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_pagination_album_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/default",{noivos:this.options.noivos.attributes,pages_info:this.options.photos.get("pagination")},function(pages_html){render_template("template_album_show_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/album/"+self.options.noivos.get("template_html_version")+"/show",{noivos:self.options.noivos.attributes,photos:self.options.photos.attributes,pages_html:pages_html},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}))},render:function(){var options={theme:"facebook",slideshow:5e3,autoplay_slideshow:!1};return this.options.noivos.get("socialshare")||(options.social_tools=""),$("a[rel^='prettyPhoto']").prettyPhoto(options),this}})}(jQuery);var AlbumViewV2=null;!function($){AlbumViewV2=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.photos_view=[];var item=$(".template-album-"+this.options.photos.get("album").id_template_album);item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_pagination_album_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+this.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.photos.get("pagination")},function(pages_html){render_template("template_album_show_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/album/"+self.options.noivos.get("template_html_version")+"/show",{noivos:self.options.noivos.attributes,photos:self.options.photos.attributes,pages_html:pages_html},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}))},init_slider:function(){var options={};this.options.noivos.get("socialshare")||(options.social_tools=""),this.$el.find("a[rel^='prettyPhoto']").prettyPhoto(options)},render:function(){var self=this,entries=self.options.photos.get("photos");for(var i in entries){var entry=entries[i],subview=new PhotoViewV2({model:entry,noivos:self.options.noivos,onload:function(){this.render()}});self.photos_view[entry.id_template_album_fotos]=subview}return self.constructor.__super__.infinite_pagination(".template-album-"+self.options.photos.get("album").id_template_album+" article.albuns > ul.photo-container",function(finish,options){if(self.$el.data("page_loader")!=options.page){self.$el.data("page_loader",options.page);var template_album=new TemplateAlbum;template_album.fetch({cache:!1,data:{id_noivo:parseInt(self.options.noivos.get("id_noivo")),id:parseInt(self.options.photos.get("album").id_template_album),page:parseInt(options.page)},success:function(){$("body > div.loading").jLoading("ignore",!1);var data=template_album.get("photos");template_album.get("album");for(i in data){var entry=data[i],_li='<li class="col-sm-6 col-md-3" data-ordem="'+entry.ordem+'">';options.container.append(_li);var subview=new PhotoViewV2({model:entry,noivos:self.options.noivos,onload:function(){var element=this.$el;$("li[data-ordem='"+element.attr("data-ordem")+"']").append(element),self.render(),finish.call(null)}});self.photos_view[entry.id_template_album_fotos]=subview}self.init_slider()},error:function(e,xhr){backbone_proccess_error(xhr)}})}}),this.init_slider(),this}})}(jQuery);var BestmanView=null;!function($){BestmanView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-bestman");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,
render_template("template_bestman_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/bestman/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,categories:this.options.categories.toJSON(),pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){var options={theme:"facebook",slideshow:5e3,autoplay_slideshow:!1};return this.options.noivos.get("socialshare")||(options.social_tools=""),$("a[rel^='prettyPhoto']").prettyPhoto(options),this}})}(jQuery);var BlogView=null;!function($){BlogView=BaseBackboneView.extend({events:{"click #close_write_window":"closeWriteWindow","click .ico-refresh":"changeCaptcha"},closeWriteWindow:function(){$("#write_window").hide()},changeCaptcha:function(){this.options.captcha.fetch({data:{object:"comment"},success:function(){}})},drawCaptcha:function(){$("input[name='captcha_key']").val(this.options.captcha.get("key")),$(".captcha img").attr("src",this.options.captcha.get("image"))},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.posts_view=new Array,this.options.captcha.on("change",this.drawCaptcha,this);var item=$(".template-blog-"+this.options.entries.get("pagination").pag_atual);item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_pagination_blog_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/default",{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(pages_html){render_template("template_blog_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/blog/"+self.options.noivos.get("template_html_version")+"/index",{noivos:self.options.noivos.attributes,entries:self.options.entries.attributes,pages_html:pages_html,pagina:self.options.pagina.attributes,captcha:self.options.captcha.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}))},render:function(){var self=this;self.drawCaptcha();var entries=this.options.entries.get("entries");for(i in entries){var entry=entries[i],post=new TemplateBlogPost(entry),subview=new PostView({model:post});this.posts_view[post.get("id_template_blog_post")]=subview}return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){$("#comentario").formhelper({defaultField:"nome",autoRender:!1,onSubmitError:function(){$("#write_window").find(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$("#write_window").find(".def-result-message").addClass("error").removeClass("success"),$("#write_window").find(".def-result-message").show()},onSubmit:function(){this.getData();var id_noivo=self.options.noivos.get("id_noivo"),id_template_blog_post=$("#comentario #id_template_blog_post").val(),nome=$("#comentario #nome").val(),email=$("#comentario #email").val(),message=$("#comentario #comentario").val(),captcha=$("#comentario #captcha").val(),captcha_key=$("#comentario #captcha_key").val(),comment_obj=new TemplateBlogComentario;return window.loading.jLoading("block",!0),comment_obj.save({nome:nome,email:email,message:message,captcha:captcha,captcha_key:captcha_key,id_noivo:id_noivo,id_template_blog_post:id_template_blog_post},{wait:!0,success:function(model){window.loading.jLoading("block",!1),$("#comentario").formhelper("setvalue","nome",""),$("#comentario").formhelper("setvalue","email",""),$("#comentario").formhelper("setvalue","comentario",""),$("#comentario").formhelper("setvalue","captcha","");var msg=I18n.t("blogs.comment_sent");if(0==comment_obj.get("status")&&(msg+="<br/>"+I18n.t("blogs.comment_waiting")),$("#write_window").find(".def-result-message").removeClass("error").addClass("success"),$("#write_window").find(".def-result-message").html(msg),$("#write_window").find(".def-result-message").show(),0!=comment_obj.get("status")){var view=self.posts_view[comment_obj.get("id_template_blog_post")];(model=view.model).get("comentarios").push(comment_obj.attributes);var length=model.get("comentarios").length;view.$el.find(".comments_qtd").html(""+length);var comment_html=render_template("template_blog_comment_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/blog/comment",{noivos:self.options.noivos.attributes,comentario:comment_obj.attributes});view.$el.find(".def-comments").prepend($(comment_html))}},error:function(model,xhr){window.loading.jLoading("block",!1);var response=xhr.responseText,response_obj=JSON.parse(response);for(var i in response_obj.errors){var error=response_obj.errors[i];$("#comentario").formhelper("flagerror",error.key,error.value)}$("#write_window").find(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$("#write_window").find(".def-result-message").addClass("error").removeClass("success"),$("#write_window").find(".def-result-message").show()}}),!1}}),$("#comentario").formhelper("init")}),this}})}(jQuery);var BlogViewV2=null;!function($){BlogViewV2=BaseBackboneView.extend({events:{"click #close_write_window":"closeWriteWindow"},closeWriteWindow:function(){$("#write_window").hide()},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.posts_view=new Array;var item=$(".template-blog");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_pagination_blog_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+this.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(pages_html){render_template("template_blog_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/blog/"+self.options.noivos.get("template_html_version")+"/index",{noivos:self.options.noivos.attributes,entries:self.options.entries.attributes,pages_html:pages_html,pagina:self.options.pagina.attributes,captcha:self.options.captcha.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}))},render:function(){$("#comentario").ready(function(){$("#comentario").keyup(function(){var len=this.value.length;4e3==len&&(this.value=this.value.substring(0,4e3)),$("#cnt-comentario").text(4e3-len)})});var self=this;return load_js("//assets1.icasei.com.br/assets/plugins/validator.js",function(){var entries=self.options.entries.get("entries");for(i in entries){var entry=entries[i],post=new TemplateBlogPost(entry),subview=new PostViewV2({model:post,noivos:self.options.noivos,captcha:self.options.captcha});self.posts_view[post.get("id_template_blog_post")]=subview}self.constructor.__super__.infinite_pagination("article.posts > div > ul",function(finish,options){var template_blog_post=new TemplateBlogPost;template_blog_post.fetch({cache:!1,data:{id_noivo:parseInt(self.options.noivos.get("id_noivo")),page:options.page+""},success:function(){$("body > div.loading").jLoading("ignore",!1);var data=template_blog_post.get("entries");for(i in data){var entry=data[i],post=new TemplateBlogPost(entry),subview=new PostViewV2({model:post,noivos:self.options.noivos,captcha:self.options.captcha,onload:function(){var element=this.$el;options.container.append(element),this.render(),finish.call(null)}});self.posts_view[post.get("id_template_blog_post")]=subview}},error:function(e,xhr){backbone_proccess_error(xhr)}})})}),this}})}(jQuery);var PostView=null;!function($){PostView=BaseBackboneView.extend({events:{"click #comment_link":"toggleComments","click #close_comments":"toggleComments","click #write_comment":"writeComment"},writeComment:function(ev){var post_id=$(ev.currentTarget).attr("postid"),write_element=$("#write_window");this.$el.find(".def-post-footer").before(write_element);var comments=$("div[commentpostid='"+post_id+"']");$("#write_window").find(".def-result-message").hide(),$("#comentario").formhelper("setvalue","nome",""),$("#comentario").formhelper("setvalue","email",""),$("#comentario").formhelper("setvalue","comentario",""),$("#comentario").formhelper("setvalue","captcha",""),write_element.attr("postid")==this.model.get("id_template_blog_post")?write_element.toggle():write_element.show(),comments.is(":visible")&&write_element.is(":visible")&&comments.hide(),write_element.find("#nome").focus(),write_element.attr("postid",this.model.get("id_template_blog_post")),write_element.find("#id_template_blog_post").val(this.model.get("id_template_blog_post"))},toggleComments:function(ev){var post_id=$(ev.currentTarget).attr("postid"),el=$("div[commentpostid='"+post_id+"']"),write_element=$("#write_window");el.toggle(),el.is(":visible")&&write_element.is(":visible")&&write_element.hide()},initialize:function(){this.constructor.__super__.initialize.call(this),this.adopted=!0;var item=$("div[postid='"+this.model.get("id_template_blog_post")+"']");item.get(0),this.setElement(item)},render:function(){return this}})}(jQuery);var PostViewV2=null;!function($){PostViewV2=BaseBackboneView.extend({events:{"click .comments-link":"toggleComments","click .close-comments":"toggleComments","click .write-comment":"writeComment","submit #comentario_form":"add_comment","click .ico-refresh":"changeCaptcha"},changeCaptcha:function(){this.options.captcha.fetch({data:{object:"comment"},success:function(){}})},drawCaptcha:function(){$("input[name='captcha_key']").val(this.options.captcha.get("key")),$(".captcha img").attr("src",this.options.captcha.get("image"))},writeComment:function(ev){var post_id=$(ev.currentTarget).attr("postid"),write_element=$("#write_window");this.$el.find(".write-window-area").prepend(write_element);var comments=$("div[commentpostid='"+post_id+"']");write_element.find(".def-result-message").removeClass("error").removeClass("success").hide(),write_element.find("input[name='nome']").val(""),write_element.find("input[name='email']").val(""),write_element.find("input[name='comentario']").val(""),write_element.find("input[name='captcha']").val(""),write_element.find("*[data-field]").parent(".cnt").removeClass("error").find(".txt-error").hide(),write_element.attr("postid")==this.model.get("id_template_blog_post")?write_element.toggle():write_element.show(),comments.is(":visible")&&write_element.is(":visible")&&comments.hide(),write_element.find("#nome").focus(),write_element.attr("postid",this.model.get("id_template_blog_post")),write_element.find("#id_template_blog_post").val(this.model.get("id_template_blog_post")),this.delegateEvents(),this.changeCaptcha()},toggleComments:function(ev){var post_id=$(ev.currentTarget).attr("postid"),el=$("div[commentpostid='"+post_id+"']"),write_element=$("#write_window");el.toggle(),el.is(":visible")&&write_element.is(":visible")&&write_element.hide()},add_comment:function(){var self=this,id_noivo=this.options.noivos.get("id_noivo"),id_template_blog_post=$("#comentario_form #id_template_blog_post").val(),nome=$("#comentario_form #nome").val(),email=$("#comentario_form #email").val(),message=$("#comentario_form #comentario").val(),captcha=$("#comentario_form #captcha").val(),captcha_key=$("#comentario_form #captcha_key").val();$("*[data-field]").parent(".cnt").removeClass("error").find(".txt-error").hide();var obj={nome:nome,email:email,mensagem:message,captcha:captcha,captcha_key:captcha_key,id_noivo:id_noivo,id_template_blog_post:id_template_blog_post},Assert=Validator.Assert,validator=new Validator.Validator,constraints={nome:(new Assert).NotBlank(),email:(new Assert).Email(),mensagem:(new Assert).NotBlank(),captcha:(new Assert).NotBlank(),captcha_key:(new Assert).NotBlank(),id_noivo:(new Assert).NotNull(),id_template_blog_post:(new Assert).NotNull()},validations=validator.validate(obj,constraints);if(1==validations){var comment_obj=new TemplateBlogComentario;window.loading.jLoading("block",!0),comment_obj.save(obj,{wait:!0,success:function(model){window.loading.jLoading("block",!1),$("#comentario_form #nome").val(""),$("#comentario_form #email").val(""),$("#comentario_form #comentario").val(""),$("#comentario_form #captcha").val(""),self.changeCaptcha();var msg=I18n.t("blogs.comment_sent");if(0==comment_obj.get("status")&&(msg+="<br/>"+I18n.t("blogs.comment_waiting")),$(".def-result-message").removeClass("error").addClass("success"),$(".def-result-message").html(msg),$(".def-result-message").show(),0!=comment_obj.get("status")){(model=self.model).get("comentarios").push(comment_obj.attributes);var length=model.get("comentarios").length;self.$el.find(".comments-qtd").html(""+length);var comment_html=render_template("template_blog_comment_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/blog/"+self.options.noivos.get("template_html_version")+"/comment",{noivos:self.options.noivos.attributes,comentario:comment_obj.attributes});self.$el.find(".msgs-area").prepend($(comment_html))}var top=self.$el.find(".write-comment").position().top;$("html,body").animate({scrollTop:top},200),$("#cnt-comentario").text("4000")},error:function(model,xhr){window.loading.jLoading("block",!1);var response=xhr.responseText,response_obj=JSON.parse(response);for(var i in response_obj.errors){var error=response_obj.errors[i];$("*[data-field='"+error.key+"']").parent(".cnt").addClass("error").find(".txt-error").html(error.value).show()}$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show();var top=self.$el.find(".write-comment").position().top;$("html,body").animate({scrollTop:top},200)}})}else{for(validation in validations){var field=validation;"mensagem"==field&&(field="comentario"),$("*[data-field='"+field+"']").parent(".cnt").addClass("error").find(".txt-error").html(I18n.t("validatorjs."+validations[validation][0].assert.__class__.toLowerCase())).show()}$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200)}},initialize:function(){this.remove(),this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.options.captcha.on("change",this.drawCaptcha,this);var item=$("li[postid='"+this.model.get("id_template_blog_post")+"']");item.get(0)?this.setElement(item):(this.adopted=!1,render_template("template_blog_load_more_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/blog/"+this.options.noivos.get("template_html_version")+"/load_more",{noivos:this.options.noivos.attributes,post:this.options.model.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return this}})}(jQuery);var GiftView=null;!function($){GiftView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-gifts");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_gift_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/gifts/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,gifts:this.options.gifts.attributes,pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return this}})}(jQuery);var HintsView=null;!function($){HintsView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this,item=$("#dicas");this.adopted=!0,item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_hints_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/hints/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){var self=this;map_item=$(".map_canvas");var cover=$('<div class="cover"></div>');return cover.on("click",function(){$(this).remove()}),map_item.append(cover),load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){var d,dica,item_dica,item_dica_index,dicas=self.options.pagina.attributes.conteudo;for(d in dicas)if(8==(dica=dicas[d]).id_tipo_conteudo)for(item_dica_index in dados=jQuery.parseJSON(dica.conteudo).data,dados)item_dica=dados[item_dica_index],$("#map-"+item_dica.id_dica),directionsElem=$("#direction-"+item_dica.id_dica),$(directionsElem).formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){Boxy.alert(I18n.t("formhelper.formhelper_invalid_values"),function(){},{title:"ERRO",closeText:"[Fechar]"})},onSubmit:function(){console.log("submited")}}),$(directionsElem).formhelper("init")}),$("body").unbind("gmap_loaded").bind("gmap_loaded",function(){var d,dica,arrayDica,mapElem;self.geocoder=new google.maps.Geocoder;var dicas=self.options.pagina.attributes.conteudo,maxSyncRequests=5;for(d in getRandomTimeout=function(baseTimeout){return 1e3*baseTimeout+Math.round(800*Math.random())},dicas)if(8==(dica=dicas[d]).id_tipo_conteudo){var dadosParse=jQuery.parseJSON(dica.conteudo).data;for(arrayDica=0;arrayDica<dadosParse.length;arrayDica++)dados=dadosParse[arrayDica],mapElem=$("#map-"+dados.id_dica),$("#tracar-rota-"+dados.id_dica),dados.googleMaps&&dados.lat&&dados.lng&&function(dados){var params,position=new google.maps.LatLng(dados.lat,dados.lng);dados.destination_address=position,dados.traceRoute=function(){self.trace_route(dados)},dados.endereco?setTimeout((params={mapElem:mapElem,dados:dados,position:position},function(){self.initialize_gmaps(params.mapElem,params.dados,params.position,function(mapData){setTimeout(function(){self.show_address_marker(params.dados,mapData)},500)})}),d<maxSyncRequests?0:getRandomTimeout(d)):self.geocoder.geocode({location:position},function(results,status){if(status==google.maps.GeocoderStatus.OK){mapElem=$("#map-"+dados.id_dica);var address=results[0].address_components;dados.endereco=address[1].short_name,dados.numero=address[0].short_name,dados.cidade=address[3].short_name,dados.estado=address[5].short_name,dados.pais=address[6].long_name,setTimeout((params={mapElem:mapElem,dados:dados,position:position},function(){self.initialize_gmaps(params.mapElem,params.dados,params.position,function(mapData){setTimeout(function(){self.show_address_marker(params.dados,mapData)},500)})}),d<maxSyncRequests?0:getRandomTimeout(d))}else console.log(status);var params})}(dados)}}),loadGoogleMapsApi(),this},trace_route:function(dica){var self=this,souce_str=$("#origem-"+dica.id_dica).val();$(".loading").jLoading("start"),$("#def-result-message-"+dica.id_dica).html("").hide(),this.find_address(souce_str,function(status,position){if(status){var request={origin:position,destination:dica.destination_address,travelMode:google.maps.TravelMode.DRIVING};(new google.maps.DirectionsService).route(request,function(result,status){if(status==google.maps.DirectionsStatus.OK){dica.directionsDisplay.setDirections(result);var direction=null;if(result.routes.length>0){var route=result.routes[0];if(route.legs.length>0){var leg=route.legs[0],steps=new Array;for(var i in leg.steps){var step=leg.steps[i];steps.push({info:step.instructions,distance:step.distance.text,duration:step.duration.text})}direction={start_address:leg.start_address,end_address:leg.end_address,distance:leg.distance.text,duration:leg.duration.text,steps:steps}}}var directionsElem=$("#directions-"+dica.id_dica);render_template("template_places_direction_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/hints/"+self.options.noivos.get("template_html_version")+"/direction",{direction:direction},function(address_html){$(directionsElem).empty(),$(directionsElem).append($(address_html)),$(directionsElem).show(),$(".loading").jLoading("stop")})}else $(".loading").jLoading("stop"),$("#def-result-message-"+dica.id_dica).html(I18n.t("places.errors.directions")).addClass("error").show()})}else $(".loading").jLoading("stop"),$("#def-result-message-"+dica.id_dica).html(I18n.t("places.errors.address")).addClass("error").show()})},get_address_html:function(dica,callback){render_template("template_places_address_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/hints/"+this.options.noivos.get("template_html_version")+"/address",{noivos:this.options.noivos.attributes,dica:dica,pagina:this.options.pagina.attributes},callback)},show_address_marker:function(dica,mapData){mapData.marker.info_window&&(mapData.marker.info_window.close(),mapData.marker.info_window=null),mapData.marker.info_window=new google.maps.InfoWindow,google.maps.event.addListener(mapData.marker.info_window,"closeclick",function(){mapData.marker.info_window=null}),this.get_address_html(dica,function(html){mapData.marker.info_window.setContent(html),mapData.marker.info_window.open(mapData.map,mapData.marker)})},find_address:function(address,callback){address&&""!=address?this.geocoder&&this.geocoder.geocode({address:address},function(results,status){status==google.maps.GeocoderStatus.OK?callback&&callback(!0,results[0].geometry.location):callback&&callback(!1)}):callback&&callback(!1)},initialize_gmaps:function(mapElem,dica,position,callback){var self=this,myOptions={zoom:17,center:position,mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(mapElem.get(0),myOptions);dica.directionsDisplay=new google.maps.DirectionsRenderer,dica.directionsDisplay.setMap(map);var marker=new google.maps.Marker({map:map,position:position,draggable:!1,zIndex:1e3});marker.info_window=null,google.maps.event.addListener(marker,"position_changed",function(){}),google.maps.event.addListener(marker,"click",function(){self.show_address_marker(dica)}),google.maps.event.addListener(map,"click",function(){});var coverElem=$('<div class="cover"></div>');mapElem.append(coverElem),coverElem.on("click",function(){coverElem.remove()}),callback&&callback.call(this,{map:map,directionsDisplay:dica.directionsDisplay,marker:marker}),google.maps.event.trigger(map,"resize")}})}(jQuery);var HintsViewV2=null;!function($){HintsViewV2=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this,item=$("#dicas");this.adopted=!0,item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_hints_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/hints/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,dicas:this.options.dicas.attributes,pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){var self=this;return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){self.options.pagina.attributes.conteudo}),$("body").unbind("gmap_loaded").bind("gmap_loaded",function(){var d,dica,arrayDica,mapElem;self.geocoder=new google.maps.Geocoder;var dicas=self.options.pagina.attributes.conteudo,maxSyncRequests=5;for(d in getRandomTimeout=function(baseTimeout){return 1e3*baseTimeout+Math.round(800*Math.random())},dicas)if(8==(dica=dicas[d]).id_tipo_conteudo){var dadosParse=jQuery.parseJSON(dica.conteudo).data;for(arrayDica=0;arrayDica<dadosParse.length;arrayDica++)dados=dadosParse[arrayDica],mapElem=$("#map-"+dados.id_dica),$("#tracar-rota-"+dados.id_dica),dados.googleMaps&&dados.lat&&dados.lng&&function(dados){var params,position=new google.maps.LatLng(dados.lat,dados.lng);dados.destination_address=position,dados.traceRoute=function(){self.trace_route(dados)},dados.endereco?setTimeout((params={mapElem:mapElem,dados:dados,position:position},function(){self.initialize_gmaps(params.mapElem,params.dados,params.position,function(mapData){setTimeout(function(){self.show_address_marker(params.dados,mapData)},500)})}),d<maxSyncRequests?0:getRandomTimeout(d)):self.geocoder.geocode({location:position},function(results,status){if(status==google.maps.GeocoderStatus.OK){mapElem=$("#map-"+dados.id_dica);var address=results[0].address_components;dados.endereco=address[1].short_name,dados.numero=address[0].short_name,dados.cidade=address[3].short_name,dados.estado=address[5].short_name,dados.pais=address[6].long_name,setTimeout((params={mapElem:mapElem,dados:dados,position:position},function(){self.initialize_gmaps(params.mapElem,params.dados,params.position,function(mapData){setTimeout(function(){self.show_address_marker(params.dados,mapData)},500)})}),d<maxSyncRequests?0:getRandomTimeout(d))}else console.log(status);var params})}(dados)}}),loadGoogleMapsApi(),this},trace_route:function(dica){var self=this,souce_str=$("#origem-"+dica.id_dica).val();$(".loading").jLoading("start"),$("#def-result-message-"+dica.id_dica).html("").hide(),this.find_address(souce_str,function(status,position){if(status){var request={origin:position,destination:dica.destination_address,travelMode:google.maps.TravelMode.DRIVING};(new google.maps.DirectionsService).route(request,function(result,status){if(status==google.maps.DirectionsStatus.OK){dica.directionsDisplay.setDirections(result);var direction=null;if(result.routes.length>0){var route=result.routes[0];if(route.legs.length>0){var leg=route.legs[0],steps=new Array;for(var i in leg.steps){var step=leg.steps[i];steps.push({info:step.instructions,distance:step.distance.text,duration:step.duration.text})}direction={start_address:leg.start_address,end_address:leg.end_address,distance:leg.distance.text,duration:leg.duration.text,steps:steps}}}var directionsElem=$("#directions-"+dica.id_dica);render_template("template_places_direction_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/hints/"+self.options.noivos.get("template_html_version")+"/direction",{direction:direction},function(address_html){$(directionsElem).empty(),$(directionsElem).append($(address_html)),$(directionsElem).show(),$(".loading").jLoading("stop")})}else $(".loading").jLoading("stop"),$("#def-result-message-"+dica.id_dica).html(I18n.t("places.errors.directions")).addClass("error").show()})}else $(".loading").jLoading("stop"),$("#def-result-message-"+dica.id_dica).html(I18n.t("places.errors.address")).addClass("error").show()})},get_address_html:function(dica,callback){render_template("template_places_address_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/hints/"+this.options.noivos.get("template_html_version")+"/address",{noivos:this.options.noivos.attributes,dica:dica,pagina:this.options.pagina.attributes},callback)},show_address_marker:function(dica,mapData){mapData.marker.info_window&&(mapData.marker.info_window.close(),mapData.marker.info_window=null),mapData.marker.info_window=new google.maps.InfoWindow,google.maps.event.addListener(mapData.marker.info_window,"closeclick",function(){mapData.marker.info_window=null}),this.get_address_html(dica,function(html){mapData.marker.info_window.setContent(html),mapData.marker.info_window.open(mapData.map,mapData.marker)})},find_address:function(address,callback){address&&""!=address?this.geocoder&&this.geocoder.geocode({address:address},function(results,status){status==google.maps.GeocoderStatus.OK?callback&&callback(!0,results[0].geometry.location):callback&&callback(!1)}):callback&&callback(!1)},initialize_gmaps:function(mapElem,dica,position,callback){var self=this,myOptions={zoom:17,center:position,mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(mapElem.get(0),myOptions);dica.directionsDisplay=new google.maps.DirectionsRenderer,dica.directionsDisplay.setMap(map);var marker=new google.maps.Marker({map:map,position:position,draggable:!1,zIndex:1e3});marker.info_window=null,google.maps.event.addListener(marker,"position_changed",function(){}),google.maps.event.addListener(marker,"click",function(){self.show_address_marker(dica)}),google.maps.event.addListener(map,"click",function(){});var coverElem=$('<div class="cover"></div>');mapElem.append(coverElem),coverElem.on("click",function(){coverElem.remove()}),callback&&callback.call(this,{map:map,directionsDisplay:dica.directionsDisplay,marker:marker}),setTimeout(function(){google.maps.event.trigger(map,"resize")},500)}})}(jQuery);var HomeView=null;!function($){HomeView=BaseBackboneView.extend({events:{"click #votar":"votar"},mostrar:function(template_enquete_usuario){var self=this;self.options.enquete.fetch({data:{id_enquete:self.options.enquete.get("id_enquete"),id_noivo:self.options.noivos.get("id_noivo")},success:function(){render_template("template_enquete_resposta_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/home/"+self.options.noivos.get("template_html_version")+"/respostas",{noivos:self.options.noivos.attributes,images:self.options.imagens.toJSON(),home:self.options.home.attributes,enquete:self.options.enquete.attributes,respostas:template_enquete_usuario},function(item){change_content(item,function(){},{noivos:self.options.noivos,container:"#enquete",no_scroll:!0,destroy_view:!1})})},error:function(){Boxy.alert(I18n.t("poll.errors.error"),function(){},{title:"ERRO",closeText:"[Fechar]"})}})},votar:function(){var self=this;if("true"==$("meta[name='CD']").attr("content"))$(".def-result-message").addClass("error").removeClass("success").html(I18n.t("poll.errors.offline")).show(),self.mostrar({ret:1});else{var resposta=$("input[name='poll']:checked").val();if(!resposta||""==resposta)return void $(".def-result-message").addClass("error").removeClass("success").html(I18n.t("poll.errors.answer")).show();var template_enquete_usuario=new TemplateEnqueteUsuario;window.loading.jLoading("block",!0),template_enquete_usuario.save({id_noivo:self.options.noivos.get("id_noivo"),enquete:self.options.enquete.get("id_enquete"),resposta:resposta},{wait:!0,success:function(model){window.loading.jLoading("block",!1),model.get("warning")?$(".def-result-message").addClass("error").removeClass("success").html(model.get("message")).show():$(".def-result-message").html("").hide(),self.mostrar(template_enquete_usuario)},error:function(model,xhr){window.loading.jLoading("block",!1);var response=xhr.responseText,response_obj=JSON.parse(response);$(".def-result-message").addClass("error").removeClass("success").html(response_obj.message).show()}})}},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-home");item.get(0)?(this.setElement(item),this.options.onload&&this.options.onload.call(self)):(this.adopted=!1,render_template("template_home_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/home/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,images:this.options.imagens.toJSON(),home:this.options.home.attributes,enquete:this.options.enquete.attributes,pagina:self.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},before_remove:function(){this.options.noivos.get("slider")&&1!=this.options.noivos.get("slider")||$("#peKenBurns").kenburn({})},render:function(){var self=this,slider=get_meta("slider");return load_css("//assets1.icasei.com.br/assets/"+slider+".css"),load_js("//assets1.icasei.com.br/assets/"+slider+".js",function(){var config=self.options.imagens.get("config");if(self.options.noivos.get("slider")&&1!=self.options.noivos.get("slider")){var path="/assets/sliders/layerslider/skins/";"true"==get_meta("CD")&&(path="assets/sliders/layerslider/skins/"),$("#layerslider").layerSlider({width:"500px",height:"320px",responsive:!0,responsiveUnder:0,sublayerContainer:0,autoStart:!0,pauseOnHover:1==config.pause,firstLayer:1,animateFirstLayer:!0,randomSlideshow:1==config.random,twoWaySlideshow:!0,loops:0,forceLoopNum:!0,autoPlayVideos:!0,autoPauseSlideshow:"auto",youtubePreview:"maxresdefault.jpg",keybNav:!0,touchNav:!0,skin:config.theme,skinsPath:path,globalBGColor:"transparent",navPrevNext:!0,navStartStop:!0,navButtons:"none"!=config.thumb,hoverPrevNext:!0,hoverBottomNav:!0,showBarTimer:!1,showCircleTimer:!0,thumbnailNavigation:config.thumb,tnWidth:100,tnHeight:60,tnContainerWidth:"60%",tnActiveOpacity:35,tnInactiveOpacity:100,imgPreload:!0,yourLogo:!1,yourLogoStyle:"left: 10px; top: 10px;",yourLogoLink:!1,yourLogoTarget:"_self",cbInit:function(){
"true"!=$("meta[name='CD']").attr("content")&&$("#layerslider").find('*[class*="ls-bg"]').each(function(){var _src=$(this).attr("src").split("/"),_new_src="",_width=this.width,_width_min=540,_height_min=320,_landscape=!0;if(this.height>_width&&(_landscape=!1),_landscape)for(var i=1;i<_src.length;i++)6==i&&_width>_width_min&&(_src[i]=_width_min),7==i&&_width>_width_min&&(_src[i]=0),_new_src+="/"+_src[i];else for(i=1;i<_src.length;i++)6==i&&(_src[i]=0),7==i&&(_src[i]=_height_min),_new_src+="/"+_src[i];$(this).attr("src",_new_src)})},cbStart:function(){},cbStop:function(){},cbPause:function(){},cbAnimStart:function(){$(".ls-curtiles").fadeOut("slow")},cbAnimStop:function(){$(".ls-curtiles").fadeOut("slow")},cbPrev:function(){$(".ls-curtiles").fadeOut("slow")},cbNext:function(){$(".ls-curtiles").fadeOut("slow")}})}else $("#peKenBurns").kenburn({width:540,height:320,thumbWidth:80,thumbHeight:50,thumbAmount:6,thumbSpaces:1,thumbPadding:9,thumbStyle:config.thumb,bulletXOffset:0,bulletYOffset:"bullet"==config.thumb?-10:-369,shadow:1==config.shadow?"on":"off",repairChromeBug:"on",timerShow:"on",touchenabled:"on",pauseOnRollOverThumbs:"off",pauseOnRollOverMain:1==config.pause?"on":"off",preloadedSlides:6,timer:10,debug:"off"})}),this}})}(jQuery);var HomeViewV2=null;!function($){HomeViewV2=BaseBackboneView.extend({events:{"keyup textarea#acompanhantes":"keyCount"},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-home");item.get(0)?(this.setElement(item),this.options.onload&&this.options.onload.call(self)):(this.adopted=!1,render_template("template_home_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/home/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,images:this.options.imagens.toJSON(),home:this.options.home.attributes,pagina:this.options.pagina.attributes,enquete:this.options.enquete.attributes,ultimas_fotos:this.options.ultimas_fotos.toJSON(),template_rsvp:this.options.template_rsvp.attributes,msg_pagina:this.options.msg_pagina.attributes,msg_messages:this.options.msg_messages.toJSON()},function(ret){self.msg_messages=[],self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return revolution=function(){jQuery(".tp-banner").get(0)&&($(".tp-banner ul li").hide(),"function"==typeof jQuery(".tp-banner").revolution&&(revapi12=jQuery(".tp-banner").revolution({dottedOverlay:"none",delay:6e3,startwidth:1170,startheight:700,hideThumbs:10,parallax:"mouse",parallaxBgFreeze:"on",parallaxLevels:[7,4,3,2,5,4,3,2,1,0],shadow:0,fullWidth:"off",fullScreen:"on",spinner:"spinner4",stopLoop:"off",stopAfterLoops:-1,stopAtSlide:-1,shuffle:"off",autoHeight:"off",forceFullWidth:"off"})),$(".tp-banner ul li").fadeIn())},revpause=function(){jQuery(".tp-banner").length>0&&jQuery(".tp-banner").revpause()},revresume=function(){jQuery(".tp-banner").length>0&&(jQuery(".tp-banner").revresume(),$("#tp-banner-slider").show())},revolution.call(),$(".video-bg-home").get(0)||($(".dropdown-menu li a").click(function(){"undefined"!=typeof revpause&&revpause.call()}),"undefined"!=typeof revresume&&revresume.call()),this},keyCount:function(){var len=$("#acompanhantes").val().length;len>=4e3&&$("#acompanhantes").val($("#acompanhantes").val().substring(0,4e3)),$("#home-coment").text(4e3-len)}})}(jQuery);var IndexView=null;!function($){IndexView=BaseBackboneView.extend({events:{"click #jump":"pular"},pular:function(){if(0!=$(".template-flash").length){var root=get_meta("root"),first_page=get_meta("first_page");"store"==first_page?document.location.href="https://sites.icasei.com.br/"+get_meta("noivos")+"/"+first_page:Backbone.history.navigate(root+"/"+first_page,!0)}},initialize:function(){this.constructor.__super__.initialize.call(this),this.adopted=!0;var self=this,item=$(".template-flash");window.mobilecheck=function(){var a,check=!1;return a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check},!mobilecheck()||this.options.flash.get("prw")?item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(render_template("template_index_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/index/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,imagem_home:this.options.imagem_home.attributes,flash:this.options.flash.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}),this.adopted=!1):self.pular()},render:function(){var self=this,faltam="",diff=Math.round((moment(date_format(this.options.noivos.get("data_casamento_dt"),"DD[/]MM[/]YYYY"),"DD[/]MM[/]YYYY").toDate()-moment(date_format(this.options.noivos.get("data_atual"),"DD[/]MM[/]YYYY"),"DD[/]MM[/]YYYY").toDate())/864e5);faltam=diff>0?1==diff?I18n_translate("layout.tomorrow"):I18n.t("layout.future_wedding_date",{dias:diff}):diff<0?-1==diff?I18n_translate("layout.yesterday"):I18n.t("layout.past_wedding_date",{dias:-1*diff}):I18n_translate("layout.today");var imagem=this.options.flash.get("config_obj").imagen_1;this.options.imagem_home.get("images")&&this.options.imagem_home.get("images").length>0&&(imagem="imagens/home/"+this.options.imagem_home.get("images")[0].imagem);var str_date=I18n.t("flash.date",{day:moment(this.options.noivos.get("data_casamento_dt")).format("DD"),month:moment(this.options.noivos.get("data_casamento_dt")).format("MMMM"),year:moment(this.options.noivos.get("data_casamento_dt")).format("YYYY")}),config=this.options.flash.get("config_obj"),custom=this.options.flash.get("custom"),prw=this.options.flash.get("prw"),idA=this.options.flash.get("id_home_flash");config.sl1_l1=I18n_translate("flash.texts."+config.sl1_l1),config.sl1_l2=I18n_translate("flash.texts."+config.sl1_l2),config.sl2_l1=this.options.noivos.get("nome_casal"),config.sl2_l2=str_date,12==idA&&(config.sl1_l1=I18n_translate("flash.texts.seja"),config.sl2_l2=moment(this.options.noivos.get("data_casamento_dt")).format("DD[/]MM[/]YYYY")),15==idA&&(config.sl2_l2=moment(this.options.noivos.get("data_casamento_dt")).format("DD[.]MM[.]YYYY")),idA>=7&&idA<=10&&(config.imagen_1=imagem),14==idA&&(config.sl2_l2=faltam);var img2=!0;if(7!=idA&&8!=idA&&9!=idA&&10!=idA||(img2=!1),custom){if(config.custom=custom,custom.imagen1){var imagen1=custom.imagen1;config.imagen_1=null!=imagen1?"/assets/new_intro/pattern/"+imagen1:null,1==custom.imagen1_tp&&null!=imagen1&&("true"==get_meta("CD")?config.imagen_1=get_image_path(this.options.noivos.get("login"),imagen1):config.imagen_1=user_image_thumb("/imagens/"+imagen1,{login:this.options.noivos.get("login"),width:0,height:0,where:"public",effect:0,crop:1,scale:1}))}if(custom.imagen2&&img2){var imagen2=custom.imagen2;config.imagen_2=null!=imagen2?"/assets/new_intro/pattern/"+imagen2:null,imagen2&&1==custom.imagen2_tp&&null!=imagen2&&("true"==get_meta("CD")?config.imagen_2=get_image_path(this.options.noivos.get("login"),imagen2):config.imagen_2=user_image_thumb("/imagens/"+imagen2,{login:this.options.noivos.get("login"),width:0,height:0,where:"public",effect:0,crop:1,scale:1}))}}return"true"==get_meta("CD")&&(config.imagen_1=config.imagen_1.replace(/\/assets/,"assets"),config.imagen_2=config.imagen_2.replace(/\/assets/,"assets")),config.onend=function(){self.pular()},prw?(config.onend=function(){(window||document).location.reload()},$("html").css("zoom","0.52")):($("#skip,.footer,#lang,#music").show(),$("#skip_a").on("click",function(){self.pular()})),$("#flash").intros(config),this}})}(jQuery);var MessagesView=null;!function($){MessagesView=BaseBackboneView.extend({events:{"click .ico-refresh":"changeCaptcha"},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.options.captcha.on("change",this.drawCaptcha,this),this.options.messages.on("add",this.addMessage,this);var item=$(".template-messages");item.get(0)?(this.messages=[],this.setElement(item),this.options.onload&&this.options.onload.call(self)):(this.adopted=!1,render_template("template_message_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/messages/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,messages:this.options.messages.toJSON(),pagina:this.options.pagina.attributes,captcha:this.options.captcha.attributes},function(ret){self.messages=[],self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},addMessage:function(model){var self=this;new MessageView({noivos:this.options.noivos,message:model,onload:function(){this.render(),this.adopted||0!=model.get("aprovada")&&($(".no-message").remove(),$(".def-messages").prepend(this.$el),this.$el.addClass("start_vertical_roll_animation")),self.messages[model.get("id_template_msg_noivos")]=this;var msg=I18n.t("messages.message_sent");0==model.get("aprovada")&&(msg+="<br/>"+I18n.t("messages.message_waiting")),$(".def-result-message").html(msg),$(".def-result-message").removeClass("error").addClass("success"),$(".def-result-message").show()}})},changeCaptcha:function(){this.options.captcha.fetch({data:{object:"message"},success:function(){}})},drawCaptcha:function(){$("input[name='captcha_key']").val(this.options.captcha.get("key")),$(".captcha img").attr("src",this.options.captcha.get("image"))},render:function(){var self=this;return self.drawCaptcha(),this.options.messages.each(function(message){var message_view=new MessageView({noivos:self.options.noivos,message:message});message_view.render(),message_view.adopted||$(".def-messages").prepend(message_view.$el),self.messages[message.get("id_template_msg_noivos")]=message_view}),load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){$("#mensagem").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200)},onSubmit:function(){this.getData();var id_noivo=self.options.noivos.get("id_noivo"),nome=$("#mensagem #nome").val(),email=$("#mensagem #email").val(),message=$("#mensagem #mensagem").val(),captcha=$("#mensagem #captcha").val(),captcha_key=$("#mensagem #captcha_key").val(),message_obj=new TemplateMsgNoivo;return window.loading.jLoading("block",!0),message_obj.save({nome:nome,email:email,message:message,captcha:captcha,captcha_key:captcha_key,id_noivo:id_noivo},{wait:!0,success:function(){window.dataLayer.push({event:"eventEventGeneric",eventCategory:"Mensagens",eventAction:"Intera\xe7\xe3o",eventLabel:"Recebidas"}),window.loading.jLoading("block",!1),self.options.messages.add(message_obj),$("#mensagem").formhelper("setvalue","nome",""),$("#mensagem").formhelper("setvalue","email",""),$("#mensagem").formhelper("setvalue","mensagem",""),$("#mensagem").formhelper("setvalue","captcha","")},error:function(model,xhr){window.loading.jLoading("block",!1);var response=xhr.responseText,response_obj=JSON.parse(response);for(var i in response_obj.errors){var error=response_obj.errors[i];$("#mensagem").formhelper("flagerror",error.key,error.value)}$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show()}}),!1}}),$("#mensagem").formhelper("init")}),this}})}(jQuery);var MessagesViewV2=null;!function($){MessagesViewV2=BaseBackboneView.extend({events:{"click .ico-refresh":"changeCaptcha","submit form":"sendMessage"},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.options.captcha.on("change",this.drawCaptcha,this),this.options.messages.on("add",this.addMessage,this);var item=$(".template-messages");item.get(0)?(this.messages=[],this.setElement(item),this.options.onload&&this.options.onload.call(self)):(this.adopted=!1,render_template("template_message_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/messages/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,messages:this.options.messages.toJSON(),pagina:this.options.pagina.attributes,captcha:this.options.captcha.attributes},function(ret){self.messages=[],self.setElement(ret),self.options.onload&&self.options.onload.call(self)})),function(a){if(""==a)return{};for(var b={},i=0;i<a.length;++i){var p=a[i].split("=",2);1==p.length?b[p[0]]="":b[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "))}return b}(window.location.search.substr(1).split("&")).msg&&$("#nome").focus()},sendMessage:function(){var self=this,id_noivo=this.options.noivos.get("id_noivo"),nome=$(".mensagens #nome").val(),email=$(".mensagens #email").val(),message=$(".mensagens #mensagem").val(),captcha=$(".mensagens #captcha").val(),captcha_key=$(".mensagens #captcha_key").val();this.$el.find(".txt-error").hide(),this.$el.find(".cnt.error").removeClass("error");var Assert=Validator.Assert,validator=new Validator.Validator,constraints={nome:(new Assert).NotBlank(),email:(new Assert).Email(),mensagem:(new Assert).NotBlank(),captcha:(new Assert).NotBlank(),captcha_key:(new Assert).NotBlank(),id_noivo:(new Assert).NotNull()},obj={nome:nome,email:email,mensagem:message,captcha:captcha,captcha_key:captcha_key,id_noivo:id_noivo},validations=validator.validate(obj,constraints);if(1==validations){var message_obj=new TemplateMsgNoivo;window.loading.jLoading("block",!0),message_obj.save(obj,{wait:!0,success:function(){window.dataLayer.push({event:"eventEventGeneric",eventCategory:"Mensagens",eventAction:"Intera\xe7\xe3o",eventLabel:"Recebidas"}),window.loading.jLoading("block",!1),self.options.messages.add(message_obj),$(".mensagens #nome").val(""),$(".mensagens #email").val(""),$(".mensagens #mensagem").val(""),$(".mensagens #captcha").val(""),$("#cnt-mensagem").text("4000"),self.changeCaptcha()},error:function(model,xhr){window.loading.jLoading("block",!1);var response=xhr.responseText,response_obj=JSON.parse(response);for(var i in response_obj.errors){var error=response_obj.errors[i];$("*[data-field='"+error.key+"']").parent(".cnt").addClass("error").find(".txt-error").html(error.value).show()}$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200)}})}else{for(validation in validations)$("*[data-field='"+validation+"']").parent(".cnt").addClass("error").find(".txt-error").html(I18n.t("validatorjs."+validations[validation][0].assert.__class__.toLowerCase())).show();$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200)}},addMessage:function(model){var self=this;new MessageViewV2({noivos:this.options.noivos,message:model,onload:function(){this.render(),this.adopted||0!=model.get("aprovada")&&($(".no-message").remove(),$(".msgs > .row > ul").prepend(this.$el),this.$el.addClass("start_vertical_roll_animation")),self.messages[model.get("id_template_msg_noivos")]=this;var msg=I18n.t("messages.message_sent");0==model.get("aprovada")&&(msg+=" "+I18n.t("messages.message_waiting")),$(".def-result-message").html(msg),$(".def-result-message").removeClass("error").addClass("success"),$(".def-result-message").show()}})},changeCaptcha:function(){this.options.captcha.fetch({data:{object:"message"},success:function(){}})},drawCaptcha:function(){$("input[name='captcha_key']").val(this.options.captcha.get("key")),$(".captcha img").attr("src",this.options.captcha.get("image"))},render:function(){$("#mensagem").ready(function(){$("#mensagem").keyup(function(){var len=this.value.length;4e3==len&&(this.value=this.value.substring(0,4e3)),$("#cnt-mensagem").text(4e3-len)})});var self=this;return load_js("//assets1.icasei.com.br/assets/plugins/validator.js",function(){self.drawCaptcha(),self.options.messages.each(function(message){var message_view=new MessageViewV2({noivos:self.options.noivos,message:message});message_view.render(),message_view.adopted||$(".def-messages").prepend(message_view.$el),self.messages[message.get("id_template_msg_noivos")]=message_view})}),this}})}(jQuery);var MessageView=null;!function($){MessageView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$("div[messageid='"+this.options.message.get("id_template_msg_noivos")+"']");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_message_message_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/messages/"+this.options.noivos.get("template_html_version")+"/message",{noivos:this.options.noivos.attributes,message:this.options.message.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return this}})}(jQuery);var MessageViewV2=null;!function($){MessageViewV2=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$("li[messageid='"+this.options.message.get("id_template_msg_noivos")+"']");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_message_message_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/messages/"+this.options.noivos.get("template_html_version")+"/message",{noivos:this.options.noivos.attributes,message:this.options.message.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return this}})}(jQuery);var PagesView=null;!function($){PagesView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-page-"+this.options.pagina.get("id_menu_noivo"));item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_pages_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pages/"+this.options.noivos.get("template_html_version")+"/show",{noivos:this.options.noivos.attributes,pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return this}})}(jQuery);var PlacesView=null;!function($){PlacesView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-local-"+this.options.pagina.get("id_recurso"));item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_places_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,local:this.options.local.attributes,pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){var self=this;return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){$("#direction").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){Boxy.alert(I18n.t("formhelper.formhelper_invalid_values"),function(){},{title:"ERRO",closeText:"[Fechar]"})},onSubmit:function(){var souce_str=$("#origem").val();$(".loading").jLoading("start"),self.find_address(souce_str,function(status,position){if(status){var request={origin:position,destination:self.destination_address,travelMode:google.maps.TravelMode.DRIVING};(new google.maps.DirectionsService).route(request,function(result,status){if(status==google.maps.DirectionsStatus.OK){self.directionsDisplay.setDirections(result);var direction=null;if(result.routes.length>0){var route=result.routes[0];if(route.legs.length>0){var leg=route.legs[0],steps=new Array;for(var i in leg.steps){var step=leg.steps[i];steps.push({info:step.instructions,distance:step.distance.text,duration:step.duration.text})}direction={start_address:leg.start_address,end_address:leg.end_address,distance:leg.distance.text,duration:leg.duration.text,steps:steps}}}render_template("template_places_direction_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/places/"+self.options.noivos.get("template_html_version")+"/direction",{direction:direction},function(address_html){$("#directions").empty(),$("#directions").append($(address_html)),$("#directions").show(),$(".loading").jLoading("stop")})}else $(".loading").jLoading("stop"),Boxy.alert(I18n.t("places.errors.directions"),function(){},{title:"ERRO",closeText:"[Fechar]"})})}else $(".loading").jLoading("stop"),Boxy.alert(I18n.t("places.errors.address"),function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),$("#direction").formhelper("init")}),$("body").unbind("gmap_loaded").bind("gmap_loaded",function(){if(self.geocoder=new google.maps.Geocoder,self.options.local.get("googleMaps")||self.options.local.get("googlemaps"))if(null!==self.options.local.get("lat")&&null!==self.options.local.get("lng")){var position=new google.maps.LatLng(self.options.local.get("lat"),self.options.local.get("lng"));self.destination_address=position,self.initialize_gmaps(position,function(){setTimeout(function(){self.show_address_marker()},500)})}else{var endereco=self.options.local.get("endereco")+","+self.options.local.get("numero")+","+self.options.local.get("cidade")+","+self.options.local.get("estado")+","+self.options.local.get("pais");self.find_address(endereco,function(status,position){status&&(self.destination_address=position,self.initialize_gmaps(position,function(){setTimeout(function(){self.show_address_marker()},500)}))})}}),loadGoogleMapsApi(),this},get_address_html:function(callback){render_template("template_places_address_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/address",{noivos:this.options.noivos.attributes,local:this.options.local.attributes,pagina:this.options.pagina.attributes},callback)},show_address_marker:function(){var self=this;this.marker.info_window&&(this.marker.info_window.close(),this.marker.info_window=null),this.marker.info_window=new google.maps.InfoWindow,google.maps.event.addListener(this.marker.info_window,"closeclick",function(){self.marker.info_window=null}),this.get_address_html(function(html){self.marker.info_window.setContent(html),self.marker.info_window.open(self.map,self.marker)})},find_address:function(address,callback){address&&""!=address?this.geocoder&&this.geocoder.geocode({address:address},function(results,status){status==google.maps.GeocoderStatus.OK?callback&&callback(!0,results[0].geometry.location):callback&&callback(!1)}):callback&&callback(!1)},initialize_gmaps:function(position,callback){var self=this,myOptions={zoom:17,center:position,mapTypeId:google.maps.MapTypeId.ROADMAP};$(document).ready(function(){$(".map_canvas").length>0&&(self.map=new google.maps.Map($(".map_canvas").get(0),myOptions),self.directionsDisplay=new google.maps.DirectionsRenderer,self.directionsDisplay.setMap(self.map),self.marker=new google.maps.Marker({map:self.map,position:position,draggable:!1,zIndex:1e3}),self.marker.info_window=null,google.maps.event.addListener(self.marker,"position_changed",function(){}),google.maps.event.addListener(self.marker,"click",function(){self.show_address_marker()}),google.maps.event.addListener(self.map,"click",function(){}),callback&&callback.call(self),google.maps.event.trigger(self.map,"resize"))})}})}(jQuery);var PlacesViewV2=null;!function($){PlacesViewV2=BaseBackboneView.extend({events:{"submit form":"trace_route"},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-local-"+this.options.pagina.get("id_recurso"));item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_places_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,local:this.options.local.attributes,pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){var self=this;return $("body").unbind("gmap_loaded").bind("gmap_loaded",function(){if(self.geocoder=new google.maps.Geocoder,self.options.local.get("googleMaps")||self.options.local.get("googlemaps"))if(null!==self.options.local.get("lat")&&null!==self.options.local.get("lng")){var position=new google.maps.LatLng(self.options.local.get("lat"),self.options.local.get("lng"));self.destination_address=position,self.initialize_gmaps(position,function(){setTimeout(function(){self.show_address_marker()},500)})}else{var endereco=self.options.local.get("endereco")+","+self.options.local.get("numero")+","+self.options.local.get("cidade")+","+self.options.local.get("estado")+","+self.options.local.get("pais");self.find_address(endereco,function(status,position){status&&(self.destination_address=position,self.initialize_gmaps(position,function(){setTimeout(function(){self.show_address_marker()},500)}))})}}),loadGoogleMapsApi(),this},trace_route:function(){var self=this,souce_str=$("#origem").val();$(".loading").jLoading("start"),$(".def-result-message").html("").hide(),this.find_address(souce_str,function(status,position){if(status){var request={origin:position,destination:self.destination_address,travelMode:google.maps.TravelMode.DRIVING};(new google.maps.DirectionsService).route(request,function(result,status){if(status==google.maps.DirectionsStatus.OK){self.directionsDisplay.setDirections(result);var direction=null;if(result.routes.length>0){var route=result.routes[0];if(route.legs.length>0){var leg=route.legs[0],steps=new Array;for(var i in leg.steps){var step=leg.steps[i];steps.push({info:step.instructions,distance:step.distance.text,duration:step.duration.text})}direction={start_address:leg.start_address,end_address:leg.end_address,distance:leg.distance.text,duration:leg.duration.text,steps:steps}}}render_template("template_places_direction_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/places/"+self.options.noivos.get("template_html_version")+"/direction",{direction:direction},function(address_html){$("#directions").empty(),$("#directions").append($(address_html)),$("#directions").show(),$(".loading").jLoading("stop")})}else $(".loading").jLoading("stop"),$(".def-result-message").html(I18n.t("places.errors.directions")).addClass("error").show()})}else $(".loading").jLoading("stop"),$(".def-result-message").html(I18n.t("places.errors.address")).addClass("error").show()})},get_address_html:function(callback){render_template("template_places_address_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/address",{noivos:this.options.noivos.attributes,local:this.options.local.attributes,pagina:this.options.pagina.attributes},callback)},show_address_marker:function(){var self=this;this.marker.info_window&&(this.marker.info_window.close(),this.marker.info_window=null),this.marker.info_window=new google.maps.InfoWindow,google.maps.event.addListener(this.marker.info_window,"closeclick",function(){self.marker.info_window=null}),this.get_address_html(function(html){self.marker.info_window.setContent(html),self.marker.info_window.open(self.map,self.marker)})},find_address:function(address,callback){address&&""!=address?this.geocoder&&this.geocoder.geocode({address:address},function(results,status){status==google.maps.GeocoderStatus.OK?callback&&callback(!0,results[0].geometry.location):callback&&callback(!1)}):callback&&callback(!1)},initialize_gmaps:function(position,callback){var self=this,myOptions={zoom:17,center:position,mapTypeId:google.maps.MapTypeId.ROADMAP};$(document).ready(function(){var $map,$cover;$(".map_canvas").length>0&&(self.map=new google.maps.Map($(".map_canvas").get(0),myOptions),self.directionsDisplay=new google.maps.DirectionsRenderer,self.directionsDisplay.setMap(self.map),self.marker=new google.maps.Marker({map:self.map,position:position,draggable:!1,zIndex:1e3}),self.marker.info_window=null,google.maps.event.addListener(self.marker,"position_changed",function(){}),google.maps.event.addListener(self.marker,"click",function(){self.show_address_marker()}),google.maps.event.addListener(self.map,"click",function(){}),$map=$(".map_canvas"),$cover=$('<div class="cover"></div>'),$map.append($cover),$cover.on("click",function(){$cover.remove()}),callback&&callback.call(self),google.maps.event.trigger(self.map,"resize"))})}})}(jQuery);var ProtectedView=null;!function($){ProtectedView=BaseBackboneView.extend({events:{"click #button":"check","submit #form1":"check"},check:function(){var obj={password:$("#protected_lock").val()},params=$.param(obj),root=$("meta[name='root']").attr("content");return jQuery.ajax({url:root+"/protected/login",data:params,dataType:"json",type:"POST",success:function(data_ret){if(1==data_ret.code){var url=unescape(data_ret.goto_url);url||(url=root+"/index"),window.location.href=url}else Boxy.alert(I18n.t("protected.error.password"),null,{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})},error:function(){Boxy.alert(I18n.t("protected.error.error"),null,{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}}),!1},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$("#template-protected");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_protected_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/protected/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return this}})}(jQuery);var RsvpView=null;!function($){RsvpView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-rsvp");if(item.get(0))this.setElement(item),
self.options.onload&&self.options.onload.call(self);else{var convidado=null;this.adopted=!1,render_template("template_rsvp_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/rsvp/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,rsvp_config:this.options.rsvp_config.attributes,pagina:this.options.pagina.attributes,convidado:convidado},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}},change_pessoas:function(){var adultos=$("#rsvp select[name='adultos'] option:selected").val();if(""!=adultos){try{adultos=parseInt(adultos)}catch(ex){adultos=0}1==adultos?$("#mensagem").attr("ignore","true"):$("#mensagem").removeAttr("ignore")}},save_rsvp:function(){var self=this;$("#confirm-button-rsvp").attr("onclick","").html(I18n.t("rsvp.buttons.waiting"));var nome=$("#rsvp input[name='nome']").val(),evento=$("#rsvp input[name='evento']:checked").val(),adultos=$("#rsvp select[name='adultos'] option:selected").val(),criancas=$("#rsvp select[name='criancas'] option:selected").val(),email=$("#rsvp input[name='email']").val(),ddd=$("#rsvp input[name='ddd']").val(),telefone=$("#rsvp input[name='telefone']").val(),mensagem=$("#rsvp textarea[name='mensagem']").val(),id_convidado=0;self.options.convidado&&(id_convidado=self.options.convidado.get("id_convidado"));var template_rsvp=new TemplateRsvp;window.loading.jLoading("block",!0),template_rsvp.save({id_noivo:self.options.noivos.get("id_noivo"),nome:nome,evento:evento,qtd_pessoas:adultos,criancas:criancas,convidado:"noiva",email:email,ddd:ddd,telefone:telefone,acompanhantes:mensagem,id_convidado:id_convidado},{wait:!0,success:function(){window.loading.jLoading("block",!1),self.options.convidado=null;render_template("template_rsvp_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/rsvp/"+self.options.noivos.get("template_html_version")+"/index",{noivos:self.options.noivos.attributes,rsvp_config:self.options.rsvp_config.attributes,pagina:self.options.pagina.attributes,convidado:null},function(ret){self.setElement(ret),change_content(ret,function(){self.render(),$(".def-result-message").addClass("success").removeClass("error"),$(".def-result-message").html(I18n.t("rsvp.messages.success.success")),$(".def-result-message").show()},{template:"front",noivos:self.options.noivos})});$("#confirm-button-rsvp").attr("onclick","$('#rsvp').formhelper('submit',this,true);").html(I18n.t("rsvp.buttons.confirm"))},error:function(model,xhr){window.loading.jLoading("block",!1);var response=xhr.responseText,response_obj=JSON.parse(response);for(var i in response_obj.errors){var error=response_obj.errors[i];$("#rsvp").formhelper("flagerror",error.key,error.value)}$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show(),$("#confirm-button-rsvp").attr("onclick","$('#rsvp').formhelper('submit',this,true);").html(I18n.t("rsvp.buttons.confirm"))}})},render:function(){var self=this;return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){$("#rsvp").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onChangeCompleted:function(field){"adultos"==$(field).attr("id")&&self.change_pessoas()},onSubmitError:function(){$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200)},onSubmit:function(){if(1!=self.options.rsvp_config.get("aberto")||self.options.convidado)self.save_rsvp();else{var nome=$("#nome").val(),template_rsvp_convidado=new TemplateRsvpConvidado;window.loading.jLoading("block",!0),template_rsvp_convidado.fetch({data:{id_noivo:self.options.noivos.get("id_noivo"),nome:nome},success:function(){if(window.loading.jLoading("block",!1),template_rsvp_convidado.get("error"))$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("rsvp.messages.error.not_found")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200);else if($(".def-result-message").hide(),self.options.convidado=template_rsvp_convidado,self.options.convidado){var item=new EJS({url:"/templates/backbone/"+self.options.noivos.get("id_noivo")+"/rsvp/"+self.options.noivos.get("template_html_version")+"/index"}).render({noivos:self.options.noivos.attributes,rsvp_config:self.options.rsvp_config.attributes,pagina:self.options.pagina.attributes,convidado:self.options.convidado.attributes});self.setElement(item),change_content(item,function(){self.render()},{template:"front",noivos:self.options.noivos})}},error:function(){window.loading.jLoading("block",!1),$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("rsvp.messages.error.error")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200)}})}return!1}}),$("#rsvp").formhelper("init"),self.change_pessoas()}),this}})}(jQuery);var RsvpViewV2=null;!function($){RsvpViewV2=BaseBackboneView.extend({events:{"click  .send-form":"submitForm"},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-rsvp");if(item.get(0))this.setElement(item),self.options.onload&&self.options.onload.call(self);else{var convidado=null;this.adopted=!1,render_template("template_rsvp_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/rsvp/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,rsvp_config:this.options.rsvp_config.attributes,pagina:this.options.pagina.attributes,convidado:convidado},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}},save_rsvp:function(){var self=this,nome=$(".confirmacao input[name='nome']").val(),evento=$(".confirmacao input[name='evento']:checked").val(),adultos=$(".confirmacao select[name='adultos'] option:selected").val(),criancas=$(".confirmacao select[name='criancas'] option:selected").val(),email=$(".confirmacao input[name='email']").val(),ddd=$(".confirmacao input[name='ddd']").val(),telefone=$(".confirmacao input[name='telefone']").val(),acompanhantes=$(".confirmacao textarea[name='acompanhantes']").val();$("#confirm-button-rsvp").prop("disabled",!0).val(I18n.t("rsvp.buttons.waiting"));var id_convidado=0;self.options.convidado&&(id_convidado=self.options.convidado.get("id_convidado"));var Assert=Validator.Assert,validator=new Validator.Validator,constraints={id_noivo:(new Assert).NotNull(),nome:(new Assert).NotBlank(),email:(new Assert).Email(),evento:(new Assert).NotNull(),qtd_pessoas:(new Assert).NotNull(),ddd:(new Assert).NotBlank(),telefone:(new Assert).NotBlank(),acompanhantes:(new Assert).NotBlank()};1==adultos&&(constraints.acompanhantes=null);var obj={id_noivo:self.options.noivos.get("id_noivo"),nome:nome,evento:evento,qtd_pessoas:adultos,criancas:criancas,convidado:"noiva",email:email,ddd:ddd,telefone:telefone,acompanhantes:acompanhantes,id_convidado:id_convidado};for(var i in $(".def-result-message").removeClass("error").html(""),constraints)$("*[data-field='"+i+"']").parent(".cnt").removeClass("error").find(".txt-error").html("").show();var validations=validator.validate(obj,constraints);if(1==validations){var template_rsvp=new TemplateRsvp;window.loading.jLoading("block",!0),template_rsvp.save(obj,{wait:!0,success:function(){$("#confirm-button-rsvp").prop("disabled",!1).val(I18n.t("rsvp.buttons.confirm")),window.loading.jLoading("block",!1),self.options.convidado=null;render_template("template_rsvp_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/rsvp/"+self.options.noivos.get("template_html_version")+"/index",{noivos:self.options.noivos.attributes,rsvp_config:self.options.rsvp_config.attributes,pagina:self.options.pagina.attributes,convidado:null},function(ret){self.setElement(ret),change_content(ret,function(){self.render(),$(".send-form").off("click").on("click",function(){self.submitForm()}),$(".def-result-message").addClass("success").removeClass("error"),$(".def-result-message").html(I18n.t("rsvp.messages.success.success")),$(".def-result-message").show()},{template:"front",noivos:self.options.noivos,destroy_view:!1})})},error:function(model,xhr){$("#confirm-button-rsvp").prop("disabled",!1).val(I18n.t("rsvp.buttons.confirm")),window.loading.jLoading("block",!1);var response=xhr.responseText,response_obj=JSON.parse(response);for(var i in constraints)$("*[data-field='"+i+"']").parent(".cnt").removeClass("error").find(".txt-error").html("").show();for(var i in response_obj.errors){var error=response_obj.errors[i];$("*[data-field='"+error.key+"']").parent(".cnt").addClass("error").find(".txt-error").html(error.value).show()}$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show();var top=$(".txt-anchor").offset().top;$("html,body").animate({scrollTop:top},200)}})}else{for(var i in constraints)$("*[data-field='"+i+"']").parent(".cnt").removeClass("error").find(".txt-error").html("").show();for(validation in validations)$("*[data-field='"+validation+"']").parent(".cnt").addClass("error").find(".txt-error").html(I18n.t("validatorjs."+validations[validation][0].assert.__class__.toLowerCase())).show();$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show();var top=$(".txt-anchor").offset().top;$("html,body").animate({scrollTop:top},200),$("#confirm-button-rsvp").prop("disabled",!1).val(I18n.t("rsvp.buttons.confirm"))}},submitForm:function(){if("true"==get_meta("CD"))return!1;var self=this;if(1!=self.options.rsvp_config.get("aberto")||self.options.convidado)self.save_rsvp();else{var nome=$(".confirmacao #nome").val(),Assert=Validator.Assert,validator=new Validator.Validator,constraint={nome:(new Assert).NotBlank()},validations=validator.validate({nome:nome},constraint);if(1==validations){var template_rsvp_convidado=new TemplateRsvpConvidado;window.loading.jLoading("block",!0),template_rsvp_convidado.fetch({data:{id_noivo:self.options.noivos.get("id_noivo"),nome:nome},success:function(){if(window.loading.jLoading("block",!1),template_rsvp_convidado.get("error")){$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("rsvp.messages.error.not_found")),$(".def-result-message").show();var top=$(".txt-anchor").offset().top;$("html,body").animate({scrollTop:top},200)}else $(".def-result-message").hide(),self.options.convidado=template_rsvp_convidado,self.options.convidado&&render_template("template_rsvp_form_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/rsvp/"+self.options.noivos.get("template_html_version")+"/index",{noivos:self.options.noivos.attributes,rsvp_config:self.options.rsvp_config.attributes,pagina:self.options.pagina.attributes,convidado:self.options.convidado.attributes},function(ret){change_content(ret,function(){self.setElement(ret),self.render();var top=$(".txt-anchor").offset().top;$("html,body").animate({scrollTop:top},200),$(".send-form").off("click").on("click",function(){self.save_rsvp()})},{template:"front",noivos:self.options.noivos,destroy_view:!1})})},error:function(){window.loading.jLoading("block",!1),$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("rsvp.messages.error.error")),$(".def-result-message").show();var top=$(".txt-anchor").offset().top;$("html,body").animate({scrollTop:top},200)}})}else{for(validation in validations)$("*[data-field='"+validation+"']").parent(".cnt").addClass("error").find(".txt-error").html(I18n.t("validatorjs."+validations[validation][0].assert.__class__.toLowerCase())).show();$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show();var top=$(".txt-anchor").offset().top;$("html,body").animate({scrollTop:top},200)}}},render:function(){$("#acompanhantes").ready(function(){$("#acompanhantes").keyup(function(){var len=this.value.length;len>=4e3&&(this.value=this.value.substring(0,4e3)),$("#cnt-comentario").text(4e3-len)})});var self=this;return load_js("//assets1.icasei.com.br/assets/plugins/validator.js",function(){self.delegateEvents()}),this}})}(jQuery);var CartView=null;!function($){CartView=BaseBackboneView.extend({events:{"click .goto-store":"back_store","click .goto-store-cart_info":"cart_info"},cart_info:function(){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page+"/cart_info",!0)},back_store:function(){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page,!0)},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.cart_items=new CartProducts,this.cart_items.reset(this.options.cart.get("products")),this.cart_items.on("remove",this.on_remove,this),this.cart_items.on("change",this.on_change,this),this.views=[];var item=$(".template-cart");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_store_cart_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/cart",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes,info:this.options.info.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},update_value:function(){for(var total=0,i=0;i<this.cart_items.length;i++){var product=this.cart_items.at(i),valor=product.get("product").cotas>1?product.get("product").valor/product.get("product").cotas:product.get("product").valor;total+=valor*=product.get("qtd")}$(".total-value").html(Globalize.format(total,"c"))},on_change:function(){this.update_value()},on_remove:function(){this.update_value(),$("#tiptip_holder").hide(),0===this.cart_items.length&&Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page,!0)},beforeRender:function(){$("body").addClass("store-page-fix"),$(".breadcrumb").hide()},render:function(){var self=this;return self.cart_items.each(function(product){var item_view=new CartItemView({noivos:self.options.noivos.attributes,model:product,loja_dados:self.options.loja_dados});item_view.render(),self.views[product.get("id_loja_produtos")]=item_view}),$(".tTipT").tipTip({defaultPosition:"top"}),$(".cart-link").hide(),this},after_remove:function(){$("body").removeClass("store-page-fix")}})}(jQuery);var CartInfoView=null;!function($){CartInfoView=BaseBackboneView.extend({events:{"click .goto-store-cart":"back_store_cart","click .step-1":"back_store_cart"},back_store_cart:function(){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page+"/cart",!0)},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-cart-info");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(render_template("template_store_cart_info_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/cart_info",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes,info:this.options.info.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}),this.adopted=!1)},beforeRender:function(){$("body").addClass("store-page-fix")},render:function(){var self=this;return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){$("#cart_info").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200)},onSubmit:function(){var nome=$("#cart_info #nome").val(),email=$("#cart_info #email").val(),ddd=$("#cart_info #ddd").val(),telefone=$("#cart_info #telefone").val(),mensagem=$("#cart_info #mensagem").val(),documento=$("#cart_info #documento").val();return(new Cart).save({nome:nome,email:email,mensagem:mensagem,ddd:ddd,telefone:telefone,documento:documento},{wait:!0,success:function(){window.dataLayer.push({event:"eventEventGeneric",eventCategory:"Mensagens",eventAction:"Intera\xe7\xe3o",eventLabel:"Recebidas (Presentes)"}),Backbone.history.navigate("/"+self.options.noivos.get("login")+"/store/"+self.options.info.id_loja+"/"+self.options.info.id_loja_sel+"/"+self.options.info.page+"/payment",!0)},error:function(model,xhr){var response=xhr.responseText,response_obj=JSON.parse(response);for(var i in response_obj.errors){var error=response_obj.errors[i];$("#cart_info").formhelper("flagerror",error.key,error.value)}$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show()}}),!1}}),$("#cart_info").formhelper("init")}),$(".cart-link").hide(),this},after_remove:function(){$("body").removeClass("store-page-fix")}})}(jQuery);var CartItemView=null;!function($){CartItemView=BaseBackboneView.extend({events:{"click .cart-remove":"remove_item","click .update-prod":"update_item","blur input[name='qtd']":"update_item"},update_item:function(ev){var self=this,qtd=0;try{qtd=parseInt(this.$el.find("input[name='qtd']").val())}catch(e){qtd=0}if(isNaN(qtd)&&(alert(qtd),qtd=1,this.$el.find("input[name='qtd']").val(qtd)),0!==qtd){var quantidade_permitida=this.model.get("product").quantidade>this.model.get("product").cotas?this.model.get("product").quantidade_restantes:this.model.get("product").cotas_restantes;this.options.loja_dados&&0===this.options.loja_dados.get("comprado")&&(quantidade_permitida=this.model.get("product").quantidade>this.model.get("product").cotas?this.model.get("product").quantidade:this.model.get("product").cotas),qtd>quantidade_permitida?Boxy.alert(I18n_translate(quantidade_permitida>1?"store.cart.wrong_quantities":"store.cart.wrong_quantity",{qtd:quantidade_permitida}),function(){self.$el.find("input[name='qtd']").val(self.model.get("qtd"))},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")}):(window.loading.jLoading("block",!0),this.model.save({qtd:qtd},{wait:!0,success:function(){window.loading.jLoading("block",!1)},error:function(){window.loading.jLoading("block",!1),Boxy.alert(I18n.t("store.cart.error_save"),function(){},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}}))}else self.remove_item(ev)},remove_item:function(){var self=this;window.loading.jLoading("block",!0),this.model.destroy({wait:!0,success:function(){window.loading.jLoading("block",!1),self.$el.remove()},error:function(){window.loading.jLoading("block",!1),Boxy.alert(I18n.t("store.cart.error_remove"),function(){},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}})},change_item:function(){var valor=this.model.get("product").cotas>1?this.model.get("product").valor/this.model.get("product").cotas:this.model.get("product").valor;valor*=this.model.get("qtd"),this.$el.find(".product-value").html(Globalize.format(valor,"c"))},initialize:function(){this.constructor.__super__.initialize.call(this),this.adopted=!0,this.model.on("change",this.change_item,this);var item=$("tr[productid='"+this.model.get("product").id_loja_produtos+"']");item.get(0),this.setElement(item)},beforeRender:function(){$("body").addClass("store-page-fix")},render:function(){return this},after_remove:function(){$("body").removeClass("store-page-fix")}})}(jQuery);var ConfirmView=null;!function($){ConfirmView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-confirm");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_store_confirm_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/confirm",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes,info:this.options.info.attributes,loja_dado:this.options.loja_dado.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},beforeRender:function(){$("body").addClass("store-page-fix")},render:function(){$(".cart-link").hide();var array_products=[],products_object=this.options.cart.get("products"),payment=this.options.cart.get("payment");for(var i in products_object){var product=products_object[i].product,qtd=products_object[i].qtd,valor_final=product.cotas>1?product.valor/product.cotas:product.valor,product_layer={id:payment.id_template_pedidos,name:product.produto,category:"Presente Virtual - Front",price:valor_final,quantity:qtd,dimension4:"Store",dimension5:document.cookie.indexOf("mobile=true")>-1?"true":"false"};array_products.push(product_layer)}var dataLayer=window.dataLayer||[],id_store=(payment=this.options.cart.get("payment"),"Pagamento Total de Presentes - ID Noivo: "+products_object[0].product.id_noivo+" - ID Loja: "+products_object[0].product.id_loja_produtos);return dataLayer.push({event:"tagTransactionStore",currencyCode:"BRL",ecommerce:{purchase:{actionField:{id:id_store,affiliation:"",revenue:payment.valor_total,tax:"",shipping:0},products:array_products}}}),dataLayer.push({event:"tagTransactionStore",currencyCode:"BRL",ecommerce:{purchase:{actionField:{id:"Pagamento Total iCasei",affiliation:"",revenue:-1*payment.taxa_icasei,tax:"",shipping:0},products:array_products}}}),this},after_remove:function(){$("body").removeClass("store-page-fix")}})}(jQuery);var StoreView=null;!function($){StoreView=BaseBackboneView.extend({events:{"click .price-ascend":"price_ascend","click .price-descend":"price_descend","change #select_categorias":"categoria_change"},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.options.entries.on("change",self.redraw,self);var item=$(".template-store"+("v1"==this.options.noivos.get("template_html_version")?"-"+this.options.entries.get("pagination").pag_atual:""));item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_pagination_store_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+this.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(pages_html){render_template("template_store_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/store/"+self.options.noivos.get("template_html_version")+"/index",{noivos:self.options.noivos.attributes,pagina:self.options.pagina.attributes,entries:self.options.entries.attributes,loja_dados:self.options.loja_dados.attributes,categorias:self.options.categorias.toJSON(),info:self.options.info,only_products:!1,cart:self.options.cart.attributes,pages_html:pages_html},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}))},resetPagenation:function(){return"v2"==this.options.noivos.get("template_html_version")?0===this.$el.data("page_loader")&&($("#list-loja-v2").empty(),render_template("template_pagination_store_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+this.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(pages_html){$(".infinite-pagination").remove(),$(".infinite-loading").remove(),$("article.produtos").after(pages_html)})):($(".product-list").empty(),render_template("template_pagination_store_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+this.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(pages_html){$(".def-paginator").remove(),$(".product-list").after(pages_html)})),!0},getSelector:function(){return"v2"==this.options.noivos.get("template_html_version")?$("#list-loja-v2"):$(".product-list")},clearSelector:function(){var selector=this.getSelector();return selector.removeAttr("class"),"v2"!=this.options.noivos.get("template_html_version")&&selector.addClass("product-list"),selector},redraw:function(finish){var self=this,guid=self.options.info.guid,data=self.options.entries.get("entries");$.when(self.resetPagenation()).done(function(){self.delegateEvents(),$("#sort-store-block").hide();var init_more_production=function(i){var entry;entry=data[i],new ProdutoView({guid:guid,model:entry,noivos:self.options.noivos,pagina:self.options.pagina,produto:entry,loja_dados:self.options.loja_dados.attributes,info:self.options.info,cart:self.options.cart,onload:function(){this.render(),$("."+guid).get(0)||(i=data.length),i+1<data.length?init_more_production(i+1):("function"==typeof finish&&finish.call(null),"function"==typeof self.onRedrawFinish&&(self.onRedrawFinish.call(null),self.onRedrawFinish=null),i+1==data.length&&$("#loading-screen").fadeOut(600))}})};init_more_production(0),$("#loading-screen").fadeOut(600)})},beforeRender:function(){$("body").addClass("store-page-fix")},render:function(){var self=this;if(load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){$(".sort-select select").chosen()}),$(".breadcrumb").show(),this.options.cart.has("products")&&this.options.cart.get("products").length>0){var label=I18n.t("store.cart_item");this.options.cart.get("products").length>1&&(label=I18n.t("store.cart_items")),$("span.cart-items-label").get(0)&&$("span.cart-items-label").html(label),$("span.cart-items").get(0)&&$("span.cart-items").html(this.options.cart.get("products").length),$(".store-cart-href,.cart-icon").on("click",function(){Backbone.history.navigate("/"+self.options.noivos.get("login")+"/store/"+self.options.info.id_loja+"/"+self.options.info.id_loja_sel+"/"+self.options.info.page+"/cart",!0)}),$(".cart-link").show()}else $(".cart-link").hide(),$(".cart-icon").hide();return self.options.info.guid=Math.floor(1e8*Math.random()+1),self.clearSelector().addClass(""+self.options.info.guid),"v2"==self.options.noivos.get("template_html_version")?(this.$el.data("page_loader",0),this.redraw(function(){self.constructor.__super__.setMouseScroll(!1),self.constructor.__super__.infinite_pagination("article.produtos > div > ul.row:last",function(finish,options){self.$el.data("page_loader")!==options.page&&(self.$el.data("page_loader",options.page),self.options.entries.fetch({cache:!1,data:{id_noivo:parseInt(self.options.noivos.get("id_noivo")),id:parseInt(self.options.pagina.get("recurso").id_tipo_loja),id_loja_categoria:self.options.info.id_loja_categoria,order:self.options.info.order,id_loja:self.options.info.id_loja_sel,id_recurso:self.options.pagina.get("recurso").id_recurso,page:options.page},success:function(){"function"==typeof finish&&finish.call(null)},error:function(e,xhr){backbone_proccess_error(xhr)}}))})})):self.redraw(function(){}),this},after_remove:function(){$("body").removeClass("store-page-fix")},categoria_change:function(){if(this.options.info.id_loja_categoria==parseInt($("#select_categorias").val()))return!1;$("#sort-store-block").show(),this.unbind(),this.undelegateEvents(),this.options.info.page=1,Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page,!1),6==this.options.info.order?this.price_ascend():this.price_descend()},price_ascend:function(event){if($(".price-ascend").hasClass("active")&&null!==event&&event!==undefined)return!1;$("#sort-store-block").show(),this.unbind(),this.undelegateEvents();try{this.options.info.id_loja_categoria=parseInt($("#select_categorias").val())}catch(e){this.options.info.id_loja_categoria=-2}"v2"==this.options.noivos.get("template_html_version")&&this.$el.data("page_loader",0),this.load_production(6)},price_descend:function(event){if($(".price-descend").hasClass("active")&&null!==event&&event!==undefined)return!1;$("#sort-store-block").show(),this.unbind(),this.undelegateEvents();try{this.options.info.id_loja_categoria=parseInt($("#select_categorias").val())}catch(e){this.options.info.id_loja_categoria=-2}"v2"==this.options.noivos.get("template_html_version")&&this.$el.data("page_loader",0),this.load_production(5)},load_production:function(order){var self=this,produtos=this.options.entries;self.options.info.guid=Math.floor(1e8*Math.random()+1),self.clearSelector().addClass(""+self.options.info.guid),produtos.fetch({cache:!1,data:{id_noivo:self.options.noivos.get("id_noivo"),id:self.options.pagina.get("recurso").id_tipo_loja,order:order,id_loja_categoria:self.options.info.id_loja_categoria,id_loja:self.options.info.id_loja_sel,id_recurso:self.options.pagina.get("recurso").id_recurso,page:self.options.info.page},success:function(){5==order?($(".price-ascend").removeClass("active"),$(".price-descend").addClass("active")):($(".price-descend").removeClass("active"),$(".price-ascend").addClass("active")),self.options.info.order=order},error:function(){}})}})}(jQuery);var PaymentView=null;!function($){PaymentView=BaseBackboneView.extend({events:{"click .step-1":"back_store_cart","click .step-2":"back_store_cart_info","click .goto-store-cart-info":"back_store_cart_info","click label[name='paymentMethod']":"payment_click","click .def-payment":"submit_payment_click","click input[name*='instalments_']":"summary"},back_store_cart:function(){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page+"/cart",!0)},back_store_cart_info:function(){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page+"/cart_info",!0)},submit_payment_click:function(ev){var fn_payment=function(){var field=$(".def-processing"),count=parseInt(field.data("count"));count>10&&myStopFunction(),field.is(":visible")&&(myStopFunction(),$("#pagamento").formhelper("submit",$(ev.currentTarget),!0)),count++,field.data("count",count)},myStopFunction=function(){$(".def-processing").data("count",0),clearInterval(sendPayment)},sendPayment=setInterval(function(){fn_payment()},1e3)},summary:function(ev){var field=$(ev.currentTarget),parcelas=field.val(),field_summary=$(".summary",".payment-card");parcelas<2?(field_summary.find(".label-summary, .label-summary-description").html(""),field_summary.hide()):(summary=I18n.t("store.payment.labels.summary")+":",summary_str=I18n.t("store.payment.labels.summary_str",{value:field.data("summary")}),rate=I18n.t("store.payment.labels.interest",{value:field.data("rate")}),field_summary.find(".label-summary").html(summary),field_summary.find(".label-summary-description").html(summary_str+" <em>"+rate+"</em>"),field_summary.show())},payment_click:function(ev){var field=$("input:radio",ev.currentTarget);switch(field.attr("name")){case"paymentMethod":if(field.is(":checked")){$(".payment-active").removeClass("payment-active"),field.parents("label").addClass("payment-active");var newValue=field.val();switch(newValue){case"deposito":$(".payment-deposito").show(),$(".payment-boleto").hide(),$(".payment-card").hide(),this.emptyFields(newValue),$("input[name*='instalments']").attr("ignore","true"),$("#ccNumber").attr("ignore","true"),$("#ccName").attr("ignore","true"),$("#ccValidityMonth").attr("ignore","true"),$("#ccValidityYear").attr("ignore","true"),$("#ccSecurityCode").attr("ignore","true"),$("input[name='instalments_"+newValue+"']").attr("ignore","true");break;case"boleto":$(".payment-boleto").show(),$(".payment-deposito").hide(),$(".payment-card").hide(),this.emptyFields(newValue),
$("input[name*='instalments']").attr("ignore","true"),$("#ccNumber").attr("ignore","true"),$("#ccName").attr("ignore","true"),$("#ccValidityMonth").attr("ignore","true"),$("#ccValidityYear").attr("ignore","true"),$("#ccSecurityCode").attr("ignore","true"),$("input[name='instalments_"+newValue+"']").attr("ignore","true");break;default:this.setMask(newValue),this.emptyFields(newValue),$(".payment-boleto").hide(),$(".payment-deposito").hide(),$(".payment-card").show(),$(".dados-radio-right > div").hide(),$(".taxas-parcelas-"+newValue).show(),$("."+newValue+"1").after($(".payment-card")),"amex"==newValue?($(".tooltipamex").show(),$(".tooltipdefault").hide()):($(".tooltipamex").hide(),$(".tooltipdefault").show()),$("input[name*='instalments']").attr("ignore","true"),$("#ccNumber").removeAttr("ignore"),$("#ccName").removeAttr("ignore"),$("#ccValidityMonth").removeAttr("ignore"),$("#ccValidityYear").removeAttr("ignore"),$("#ccSecurityCode").removeAttr("ignore"),$("input[name='instalments_"+newValue+"']").removeAttr("ignore")}}else field.parents("label").removeClass("payment-active")}},emptyFields:function(value){$("#pagamento").formhelper("setvalue","ccNumber","",!1),$("#pagamento").formhelper("setvalue","ccName","",!1),$("#pagamento").formhelper("setvalue","ccValidityMonth","",!1),$("#pagamento").formhelper("setvalue","ccValidityYear","",!1),$("#pagamento").formhelper("setvalue","ccSecurityCode","",!1),$("#pagamento").formhelper("setvalue","instalments_"+value,1,!1),$(".summary",".payment-card").find(".label-summary, .label-summary-description").html(""),$(".summary",".payment-card").hide(),$("#instalments_error").addClass("inpt-label-info").html(I18n.t("store.payment.errors.installments")),$(".chzn-single.chzn-default span").html("")},setMask:function(value){$("#ccNumber").attr("association",value),$("#ccSecurityCode").attr("association",value);var ccNumberMask="9999 9999 9999 9999",ccSecurityCodeMask="999";"amex"==value&&(ccNumberMask="9999 999999 99999",ccSecurityCodeMask="9999"),$("#ccNumber").mask(ccNumberMask),$("#ccSecurityCode").mask(ccSecurityCodeMask)},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-payment");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_payment_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/payment",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes,info:this.options.info.attributes,loja_dado:this.options.loja_dado.attributes,tipos_pagamentos:this.options.tipos_pagamentos.models[0].get("tipos_pagamentos"),taxas_pagamentos:this.options.tipos_pagamentos.models[0].get("taxas_pagamentos")},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},beforeRender:function(){$("body").addClass("store-page-fix")},render:function(){var self=this;return $(".tTipT").tipTip({defaultPosition:"top"}),$(".tTipR").tipTip({defaultPosition:"right"}),load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){$("#pagamento").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){$(".def-payment").show(),$(".def-processing").hide(),Boxy.alert(I18n.t("formhelper.formhelper_invalid_values"),function(){$("html,body").animate({scrollTop:0},200)},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})},onSubmit:function(){window.loading.jLoading("block",!0);var obj={tipo_pagamento:$("#pagamento input[name='paymentMethod']:checked").val(),cc_number:$("#ccNumber").val(),cc_name:$("#ccName").val(),ccValidityMonth:$("#ccValidityMonth").val(),ccValidityYear:$("#ccValidityYear").val(),ccSecurityCode:$("#ccSecurityCode").val(),instalments:$("#pagamento input[name*='instalments']:checked").val()},params=jQuery.param(obj);return jQuery.ajax({url:"/"+self.options.noivos.get("login")+"/store/"+self.options.info.id_loja+"/"+self.options.info.id_loja_sel+"/"+self.options.info.page+"/do_payment",data:params,dataType:"json",type:"POST",timeout:12e5,success:function(data_ret){window.loading.jLoading("block",!1),1==data_ret.code?Backbone.history.navigate("/"+self.options.noivos.get("login")+"/store/"+self.options.info.id_loja+"/"+self.options.info.id_loja_sel+"/"+self.options.info.page+"/confirm",!0):($(".def-payment").show(),$(".def-processing").hide(),Boxy.alert(data_ret.message,null,{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")}))},error:function(){window.loading.jLoading("block",!1),$(".def-payment").show(),$(".def-processing").hide(),Boxy.alert(I18n.t("store.payment.errors.payment"),null,{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}}),!1}}),$("#pagamento").formhelper("init")}),$(".cart-link").hide(),this},after_remove:function(){$("body").removeClass("store-page-fix")},afterRender:function(){$(".def-payment").off("click.myclick").on("click.myclick",function(){$(this).hide(),$(".def-processing").data("count",0),$(".def-processing").show()})}})}(jQuery);var ProdutoView=null;!function($){ProdutoView=BaseBackboneView.extend({events:{"click .add_cart":"add_cart"},redirect:function(model){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page+"/cart",!0),model.off("change")},add_cart:function(ev){var self=this;self.clearSelector(),$(ev.currentTarget).removeClass("add_cart");var product_id=$(ev.currentTarget).attr("productid"),cart=new Cart;cart.on("change",self.redirect,self),cart.save({id_noivo:self.options.noivos.get("id_noivo"),id_loja_produtos:product_id,id_loja_sel:self.options.info.id_loja_sel,page:self.options.info.page},{wait:!0,error:function(){msg=I18n.t("store.error_add"),"true"==get_meta("CD")&&(msg="Loja desativada"),Boxy.alert(msg,function(){},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}})},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;if(this.adopted=!0,this.model!==undefined){var item=$("li[data-produtoid='"+this.model.id_template_produtos+"']");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_store_produto_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/product",{noivos:this.options.noivos.attributes,produto:this.options.model,pagina:this.options.pagina.attributes,loja_dados:this.options.loja_dados,info:this.options.info,cart:this.options.cart.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)},!0))}},getSelector:function(){return"v2"==this.options.noivos.get("template_html_version")?$("#list-loja-v2"):$(".product-list")},clearSelector:function(){var selector=this.getSelector();return selector.removeAttr("class"),"v2"!=this.options.noivos.get("template_html_version")&&selector.addClass("product-list"),selector},appendUL:function(){this.$el;var selector,class_name,tagTitle,name_catg=this.options.produto.nome_categoria,order_catg=-1===this.options.info.id_loja_categoria?-1:this.options.produto.order_categoria;if(!(selector=$("."+this.options.guid)).get(0))return!1;if(selector.find("ul[data-order="+order_catg+"]").get(0))return!0;if("v2"==this.options.noivos.get("template_html_version")?(class_name="row catg-products-list list-loja",tagTitle="<h5>"):(class_name="catg-products-list"+(0===this.options.pagina.loja_foto?" quote-list":""),tagTitle="<h5 class='product-list-title'>"),-1!==order_catg){var order_catg_before=0;selector.find("ul").each(function(){var _this=$(this);_this.data("order")<order_catg&&(order_catg_before=order_catg_before>_this.data("order")?order_catg_before:_this.data("order"))}),0===order_catg_before?$.when(selector.prepend(tagTitle+name_catg+'</h5><ul data-order="'+order_catg+'" class="'+class_name+'">')).done(function(){return!0}):$.when(selector.find("ul[data-order="+order_catg_before+"]").after(tagTitle+name_catg+'</h5><ul data-order="'+order_catg+'" class="'+class_name+'">')).done(function(){return!0})}else $.when(selector.append('<ul data-order="'+order_catg+'" class="'+class_name+'">')).done(function(){return!0})},appendLI:function(){var element=this.$el,order_catg=-1===this.options.info.id_loja_categoria?-1:this.options.produto.order_categoria,order_prod=this.options.produto.order_produto,order_prod_before=0;$("ul[data-order="+order_catg+"]").find("li").each(function(){var _this=$(this);_this.data("order")<order_prod&&(order_prod_before=order_prod_before>_this.data("order")?order_prod_before:_this.data("order"))}),0===order_prod_before?$.when($("ul[data-order="+order_catg+"]").prepend(element)).done(function(){return!0}):$.when($("li[data-order="+order_prod_before+"]","ul[data-order="+order_catg+"]").after(element)).done(function(){return!0})},render:function(){var self=this;$("."+self.options.guid).get(0)&&$.when(self.appendUL()).done(function(){self.appendLI()})}})}(jQuery);var SuppliersView=null;!function($){SuppliersView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-suppliers");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_suppliers_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/suppliers/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,fornecedores:this.options.fornecedores.toJSON(),pagina:this.options.pagina.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},render:function(){return this}})}(jQuery),jQuery(document).ready(function(){$("#viewport_front").attr("content","width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no")});var clickTrackingStore=function(loja){ga("send","event","Click loja",loja,"iCasei")};