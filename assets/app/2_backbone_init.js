function init_I18n(){form_helper_messages={empty:"",chars:I18n.t("formhelper.chars"),"waiting-validation":I18n.t("formhelper.waiting_validation"),"error-required":I18n.t("formhelper.error_required"),"success-required":I18n.t("formhelper.success_required"),"email-invalid-format":I18n.t("formhelper.email_invalid_format"),"email-ok":I18n.t("formhelper.email_ok"),"fullname-invalid-format":I18n.t("formhelper.fullname_invalid_format"),"fullname-ok":I18n.t("formhelper.fullname_ok"),"name-invalid-format":I18n.t("formhelper.name_invalid_format"),"name-ok":I18n.t("formhelper.name_ok"),"cpf-invalid-format":I18n.t("formhelper.cpf_invalid_format"),"cpf-ok":I18n.t("formhelper.cpf_ok"),"date-invalid-format":I18n.t("formhelper.date_invalid_format"),"date-ok":I18n.t("formhelper.date_ok"),"password-rep-ok":I18n.t("formhelper.password_rep_ok"),"password-rep-invalid":I18n.t("formhelper.password_rep_invalid"),"date-invalid-old":I18n.t("formhelper.date_invalid_old"),"password-too-short":I18n.t("formhelper.password_too_short"),"password-weak":I18n.t("formhelper.password_weak"),"password-good":I18n.t("formhelper.password_good"),"password-power":I18n.t("formhelper.password_power"),"chosen-not-found":I18n.t("formhelper.chosen_not_found"),"main-element-is-not-a-form":I18n.t("formhelper.main_element_is_not_a_form"),"template-not-found":I18n.t("formhelper.template_not_found"),"creditcard-fail":I18n.t("formhelper.creditcard_fail"),"creditcard-number-ok":I18n.t("formhelper.creditcard_number_ok"),"creditcard-number-fail0-visa":I18n.t("formhelper.creditcard_number_fail0_visa"),"creditcard-number-fail0-master":I18n.t("formhelper.creditcard_number_fail0_master"),"creditcard-number-fail0-amex":I18n.t("formhelper.creditcard_number_fail0_amex"),"creditcard-number-fail0-elo":I18n.t("formhelper.creditcard_number_fail0_elo"),"creditcard-number-fail1":I18n.t("formhelper.creditcard_number_fail1"),"creditcard-securitycode-ok":I18n.t("formhelper.creditcard_securitycode_ok"),"creditcard-securitycode-fail-visa":I18n.t("formhelper.creditcard_securitycode_fail_visa"),"creditcard-securitycode-fail-master":I18n.t("formhelper.creditcard_securitycode_fail_master"),"creditcard-securitycode-fail-amex":I18n.t("formhelper.creditcard_securitycode_fail_amex"),"creditcard-securitycode-fail-elo":I18n.t("formhelper.creditcard_securitycode_fail_elo")}}function backbone_proccess_error(xhr){if(!xhr.getAllResponseHeaders())return!1;var response=xhr.responseText;try{var response_obj=JSON.parse(response);response_obj.code&&99==response_obj.code||Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}catch(e){}return!0}function getfu(name){var ret=null;return(test=new RegExp("[?&]"+encodeURIComponent(name)+"=([^&]*)").exec(location.search))&&(ret=1*decodeURIComponent(test[1])),ret||(test=new RegExp("[?&]"+encodeURIComponent(name)+"=([^&]*)").exec(Backbone.history.fragment))&&(ret=1*decodeURIComponent(test[1])),ret}function get_meta(meta_name,force){var ret="";meta_content_cache[meta_name]&&!force?ret=meta_content_cache[meta_name]:$("meta[name='"+meta_name+"']").get(0)&&(ret=$("meta[name='"+meta_name+"']").attr("content"),meta_content_cache[meta_name]=ret);return ret}function set_meta(meta_name,value){$('meta[name="'+meta_name+'"]').attr("content",value)}function loadGoogleMapsApi(){var lang=get_meta("lang");if(lang=lang.replace("_","-"),"undefined"==typeof google){var script=document.createElement("script");script.src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyBEqhnnV8XkCo5A0CZLQlwOImBRKnrAYkg&channel=icasei-front&language="+lang+"&callback=loadGoogleMapsApiReady",script.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(script)}else loadGoogleMapsApiReady()}function loadGoogleMapsApiReady(){$("body").trigger("gmap_loaded")}function load_css(cssPath){if("true"!=get_meta("CD")){var cssNode=document.createElement("LINK");cssNode.rel="stylesheet",cssNode.type="text/css",cssNode.href=cssPath;var headNode=document.getElementsByTagName("HEAD");null!=headNode[0]&&headNode[0].appendChild(cssNode)}}function load_js(scriptPath,callback,force){if("true"!=get_meta("CD")){var obj=$("head script[src~='"+scriptPath+"']");if(force&&obj.get(0)&&obj.remove(),(obj=$("head script[src~='"+scriptPath+"']")).get(0))null!=callback&&callback.call(this);else{var scriptNode=document.createElement("SCRIPT");scriptNode.type="text/javascript",scriptNode.src=scriptPath,scriptNode.async=!0,scriptNode.defer=!0;var c=callback;null!=c&&(scriptNode.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||c&&(c.call(this),c=null)},scriptNode.onload=function(){c&&(c.call(this),c=null)});var headNode=document.getElementsByTagName("HEAD");null!=headNode[0]&&headNode[0].appendChild(scriptNode)}}else null!=callback&&callback.call(this)}function load_noivos(login,callback){var search="";login&&(search=login),"true"==get_meta("CD")&&(search=get_meta("noivos"));var noivo=new Noivo;noivo.fetch({cache:!1,data:{login:search},success:function(){set_meta("csrf-token",noivo.get("csrf")),window.noivo=noivo,callback&&callback.call(noivo,!0)},error:function(e,xhr){if("true"!=get_meta("CD"))backbone_proccess_error(xhr);else{var response=xhr.responseText;console.error(response)}}})}function check_localdata(name){return!!$("script[id='"+name+"']").get(0)}function check_localstorage(){return"true"==get_meta("CD")}function render_template(template_id,url,params,callback,cache){var ret=null,template="",_cache=!!cache,template_el=$("#"+template_id);if(template_el.get(0))return template=template_el.html(),ret=new EJS({text:template}).render(params),void callback.call(null,ret);var obj={lang:get_meta("lang")},url_params=$.param(obj);return callback?$.ajax({url:url,type:"GET",cache:_cache,dataType:"text",data:url_params,success:function(data_ret){ret=new EJS({text:data_ret}).render(params),callback.call(null,ret)}}):($.ajax({url:url,type:"GET",cache:_cache,dataType:"text",async:!1,data:url_params,success:function(data_ret){template=data_ret}}),ret=new EJS({text:template}).render(params)),ret}function loadCss(url){var link=document.createElement("link");link.type="text/css",link.rel="stylesheet",link.href=url,document.getElementsByTagName("head")[0].appendChild(link)}function load_start(){new Date}function load_end(){new Date}function get_main_container(){return $(".inner-content")}function change_content(new_node,callback,options){var fn=function(){window.animating=!0;var container=get_main_container();options.container&&(container=$(options.container));var destroy_view=!0;"undefined"!=typeof options.destroy_view&&(destroy_view=options.destroy_view);var animation_time=500;"undefined"!=typeof options.animation_time&&(animation_time=options.animation_time),options.no_scroll||$("body,html").animate({scrollTop:0},400),container.animate({opacity:0},animation_time,function(){App&&App.current_view&&destroy_view&&(App.current_view.remove&&App.current_view.remove(),App.current_view=null),container.empty(),AngularHelper.compile(container,new_node),$(document).trigger("icasei_content_change"),callback&&callback.call(this),container.animate({opacity:1},animation_time,function(){window.animating=!1})})};options.template?$(".template-layout-"+options.template).get(0)?fn():render_template("template_main_"+options.template+"_id","/templates/backbone/"+options.noivos.get("id_noivo")+"/layout/"+options.noivos.get("template_html_version")+"/"+options.template,{noivos:options.noivos.attributes},function(ret){$("#main_template").empty().append($(ret)),$(document).trigger("icasei_template_change"),fn()}):fn()}var backboneObjects=new Object,meta_content_cache=new Array,mouseScroll=!1,form_helper_messages={},App=function(){};!function($){BaseBackboneView=Backbone.View.extend({initialize:function(){var self=this;this.render=_.wrap(this.render,function(render){this.beforeRender(),render.call(self),this.afterRender();try{"function"==typeof custom_js&&custom_js()}catch(e){}}),this.remove=_.wrap(this.remove,function(remove){self.before_remove.call(self),remove.call(self),self.after_remove.call(self)})},setMouseScroll:function(value){mouseScroll=value},infinite_pagination:function(list_selector,onload){var self=this;$(".infinite-pagination").data("loading");$(".infinite-pagination a").length>1&&$(window).off("scroll").on("scroll",function(event){0==mouseScroll&&(mouseScroll=!0,clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){var $loading=$(".infinite-loading"),$pagination=$(".infinite-pagination");if($pagination.find(">a.active").length>=1){var num_pgs=$pagination.find(">a").length,pg=$pagination.find(">a.active").index(".infinite-pagination>a")+1;if(pg<num_pgs){var $a=$pagination.find("a:eq("+pg+")"),page=$a.data("page"),$container=$(list_selector);if($container.get(0))$container.height()+$container.offset().top<$(document).scrollTop()+$(window).height()&&$loading.is(":hidden")&&$loading.fadeIn(300,function(){$("body > div.loading").jLoading("ignore",!0),onload.call(self,function(){$loading.hide(),$pagination.find(">a").removeClass("active"),$a.addClass("active"),pg==num_pgs-1&&$(".after-pagination").show()},{page:page,container:$container})});else mouseScroll=!1,event.stopPropagation()}mouseScroll=!1}},250)))})},beforeRender:function(){},afterRender:function(){},before_remove:function(){},after_remove:function(){}}),Backbone.Model.prototype.toJSON=function(){if(this._isSerializing)return this.id||this.cid;this._isSerializing=!0;var json=_.clone(this.attributes);return _.each(json,function(value,name){value&&value.toJSON&&_.isFunction(value.toJSON)&&(json[name]=value.toJSON())}),this._isSerializing=!1,json},"true"!=get_meta("CD")&&(Backbone.History.oldLoadUrl=Backbone.History.prototype.loadUrl,Backbone.History.prototype.loadUrl=function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride);if(window.ga!==undefined){var login=get_meta("noivos"),dominio=get_meta("ga_dominio");window.ga("create","UA-1786921-1","auto",{allowLinker:!0}),window.ga("require","linker"),window.ga("linker:autoLink",dominio),window.ga("set",{dimension1:"front"}),window.ga("send","event","Site","Front",login),window.ga("send","pageview","/"+fragment);var custom_google_tc=get_meta("custom_google_tc");""!=custom_google_tc&&(window.ga("create",custom_google_tc,"auto",{name:"noivo"}),window.ga("noivo.send","pageview","/"+fragment))}else console.error("Google analytics not initialized");return Backbone.History.oldLoadUrl.call(this,fragmentOverride)})}(jQuery),$(document).ajaxError(function(e,xhr,options,thrownError){if(!xhr.getAllResponseHeaders()||0===xhr.status)return e.stopPropagation(),!1;var response=xhr.responseText,response_obj=null;try{"/services/error"!=options.url&&console.error("Erro global ("+options.url+"): "+thrownError+"<br/>"+response),response_obj=JSON.parse(response)}catch(e){response_obj=null}if(response_obj&&response_obj.code&&99==response_obj.code){var root=get_meta("root");return Backbone.history.navigate(root+"/protected",!0),e.stopPropagation(),!1}}),$(document).ready(function(){init_I18n(),window.loading=$(".loading"),window.loading.jLoading(),"true"==get_meta("CD")?Backbone.history.start({pushState:!1,hashChange:!0,root:"/",replace:!1}):Backbone.history.start({pushState:!0,hashChange:!0,root:"/",replace:!1}),$(document).delegate("a","click",function(evt){var backbone=$(this).attr("backbone");if(!backbone||"false"!=backbone){var selectedClass=$(this).data("selectedclass"),menuSelector=$(this).data("menuselector"),href=$(this).attr("href");href&&(href.indexOf("://")>=0||href.indexOf("javascript:")>=0||href.indexOf("mailto:")>=0)||(window.last_href!=href&&window.loading.jLoading("abortAllConnections"),evt.preventDefault(),Backbone.history.navigate(href,{trigger:!0}),window.last_href=href,selectedClass&&menuSelector&&($(menuSelector).removeClass(selectedClass),$(this).parent().addClass(selectedClass)))}})}),jQuery.extend({backboneParseQueryString:function(){var nvpair={},pairs=window.location.search.replace("?","").split("&");return $.each(pairs,function(i,v){var pair=v.split("=");nvpair[pair[0]]=pair[1]}),nvpair}});