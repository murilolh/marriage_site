var AlbumViewV2=null;!function($){AlbumViewV2=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.photos_view=[];var item=$(".template-album-"+this.options.photos.get("album").id_template_album);item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_pagination_album_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+this.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.photos.get("pagination")},function(pages_html){render_template("template_album_show_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/album/"+self.options.noivos.get("template_html_version")+"/show",{noivos:self.options.noivos.attributes,photos:self.options.photos.attributes,pages_html:pages_html},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}))},init_slider:function(){var options={};this.options.noivos.get("socialshare")||(options.social_tools=""),this.$el.find("a[rel^='prettyPhoto']").prettyPhoto(options)},render:function(){var self=this,entries=self.options.photos.get("photos");for(var i in entries){var entry=entries[i],subview=new PhotoViewV2({model:entry,noivos:self.options.noivos,onload:function(){this.render()}});self.photos_view[entry.id_template_album_fotos]=subview}return self.constructor.__super__.infinite_pagination(".template-album-"+self.options.photos.get("album").id_template_album+" article.albuns > ul.photo-container",function(finish,options){if(self.$el.data("page_loader")!=options.page){self.$el.data("page_loader",options.page);var template_album=new TemplateAlbum;template_album.fetch({cache:!1,data:{id_noivo:parseInt(self.options.noivos.get("id_noivo")),id:parseInt(self.options.photos.get("album").id_template_album),page:parseInt(options.page)},success:function(){$("body > div.loading").jLoading("ignore",!1);var data=template_album.get("photos");template_album.get("album");for(i in data){var entry=data[i],_li='<li class="col-sm-6 col-md-3" data-ordem="'+entry.ordem+'">';options.container.append(_li);var subview=new PhotoViewV2({model:entry,noivos:self.options.noivos,onload:function(){var element=this.$el;$("li[data-ordem='"+element.attr("data-ordem")+"']").append(element),self.render(),finish.call(null)}});self.photos_view[entry.id_template_album_fotos]=subview}self.init_slider()},error:function(e,xhr){backbone_proccess_error(xhr)}})}}),this.init_slider(),this}})}(jQuery);