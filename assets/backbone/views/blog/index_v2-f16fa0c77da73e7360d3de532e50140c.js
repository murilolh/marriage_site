var BlogViewV2=null;!function($){BlogViewV2=BaseBackboneView.extend({events:{"click #close_write_window":"closeWriteWindow"},closeWriteWindow:function(){$("#write_window").hide()},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0,this.posts_view=new Array;var item=$(".template-blog");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_pagination_blog_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+this.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(pages_html){render_template("template_blog_id","/templates/backbone/"+self.options.noivos.get("id_noivo")+"/blog/"+self.options.noivos.get("template_html_version")+"/index",{noivos:self.options.noivos.attributes,entries:self.options.entries.attributes,pages_html:pages_html,pagina:self.options.pagina.attributes,captcha:self.options.captcha.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)})}))},render:function(){$("#comentario").ready(function(){$("#comentario").keyup(function(){var len=this.value.length;4e3==len&&(this.value=this.value.substring(0,4e3)),$("#cnt-comentario").text(4e3-len)})});var self=this;return load_js("//assets1.icasei.com.br/assets/plugins/validator.js",function(){var entries=self.options.entries.get("entries");for(i in entries){var entry=entries[i],post=new TemplateBlogPost(entry),subview=new PostViewV2({model:post,noivos:self.options.noivos,captcha:self.options.captcha});self.posts_view[post.get("id_template_blog_post")]=subview}self.constructor.__super__.infinite_pagination("article.posts > div > ul",function(finish,options){var template_blog_post=new TemplateBlogPost;template_blog_post.fetch({cache:!1,data:{id_noivo:parseInt(self.options.noivos.get("id_noivo")),page:options.page+""},success:function(){$("body > div.loading").jLoading("ignore",!1);var data=template_blog_post.get("entries");for(i in data){var entry=data[i],post=new TemplateBlogPost(entry),subview=new PostViewV2({model:post,noivos:self.options.noivos,captcha:self.options.captcha,onload:function(){var element=this.$el;options.container.append(element),this.render(),finish.call(null)}});self.posts_view[post.get("id_template_blog_post")]=subview}},error:function(e,xhr){backbone_proccess_error(xhr)}})})}),this}})}(jQuery);