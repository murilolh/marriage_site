var ConfirmView=null;!function($){ConfirmView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-confirm");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(this.adopted=!1,render_template("template_store_confirm_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/confirm",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes,info:this.options.info.attributes,loja_dado:this.options.loja_dado.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}))},beforeRender:function(){$("body").addClass("store-page-fix")},render:function(){$(".cart-link").hide();var array_products=[],products_object=this.options.cart.get("products"),payment=this.options.cart.get("payment");for(var i in products_object){var product=products_object[i].product,qtd=products_object[i].qtd,valor_final=product.cotas>1?product.valor/product.cotas:product.valor,product_layer={id:payment.id_template_pedidos,name:product.produto,category:"Presente Virtual - Front",price:valor_final,quantity:qtd,dimension4:"Store",dimension5:document.cookie.indexOf("mobile=true")>-1?"true":"false"};array_products.push(product_layer)}var dataLayer=window.dataLayer||[],id_store=(payment=this.options.cart.get("payment"),"Pagamento Total de Presentes - ID Noivo: "+products_object[0].product.id_noivo+" - ID Loja: "+products_object[0].product.id_loja_produtos);return dataLayer.push({event:"tagTransactionStore",currencyCode:"BRL",ecommerce:{purchase:{actionField:{id:id_store,affiliation:"",revenue:payment.valor_total,tax:"",shipping:0},products:array_products}}}),dataLayer.push({event:"tagTransactionStore",currencyCode:"BRL",ecommerce:{purchase:{actionField:{id:"Pagamento Total iCasei",affiliation:"",revenue:-1*payment.taxa_icasei,tax:"",shipping:0},products:array_products}}}),this},after_remove:function(){$("body").removeClass("store-page-fix")}})}(jQuery);