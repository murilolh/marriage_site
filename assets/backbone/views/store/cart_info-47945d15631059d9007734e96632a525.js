var CartInfoView=null;!function($){CartInfoView=BaseBackboneView.extend({events:{"click .goto-store-cart":"back_store_cart","click .step-1":"back_store_cart"},back_store_cart:function(){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/"+this.options.info.id_loja+"/"+this.options.info.id_loja_sel+"/"+this.options.info.page+"/cart",!0)},initialize:function(){this.constructor.__super__.initialize.call(this);var self=this;this.adopted=!0;var item=$(".template-cart-info");item.get(0)?(this.setElement(item),self.options.onload&&self.options.onload.call(self)):(render_template("template_store_cart_info_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/cart_info",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes,info:this.options.info.attributes},function(ret){self.setElement(ret),self.options.onload&&self.options.onload.call(self)}),this.adopted=!1)},beforeRender:function(){$("body").addClass("store-page-fix")},render:function(){var self=this;return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){$("#cart_info").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show(),$("html,body").animate({scrollTop:0},200)},onSubmit:function(){var nome=$("#cart_info #nome").val(),email=$("#cart_info #email").val(),ddd=$("#cart_info #ddd").val(),telefone=$("#cart_info #telefone").val(),mensagem=$("#cart_info #mensagem").val(),documento=$("#cart_info #documento").val();return(new Cart).save({nome:nome,email:email,mensagem:mensagem,ddd:ddd,telefone:telefone,documento:documento},{wait:!0,success:function(){window.dataLayer.push({event:"eventEventGeneric",eventCategory:"Mensagens",eventAction:"Intera\xe7\xe3o",eventLabel:"Recebidas (Presentes)"}),Backbone.history.navigate("/"+self.options.noivos.get("login")+"/store/"+self.options.info.id_loja+"/"+self.options.info.id_loja_sel+"/"+self.options.info.page+"/payment",!0)},error:function(model,xhr){var response=xhr.responseText,response_obj=JSON.parse(response);for(var i in response_obj.errors){var error=response_obj.errors[i];$("#cart_info").formhelper("flagerror",error.key,error.value)}$(".def-result-message").addClass("error").removeClass("success"),$(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),$(".def-result-message").show()}}),!1}}),$("#cart_info").formhelper("init")}),$(".cart-link").hide(),this},after_remove:function(){$("body").removeClass("store-page-fix")}})}(jQuery);