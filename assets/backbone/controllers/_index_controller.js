var HomeController=null;jQuery,HomeController=Backbone.Router.extend({routes:{index:"load",":login":"load",":login/":"load",":login/index":"load",":login/:lang":"load","*action":"load"},load:function(login){load_noivos(login,function(success){if(success){var noivos=this,template_imagens_home=new TemplateImagemHome,home_flash=new HomeFlash,imagesLoaded=!1,flashLoaded=!1,fn=function(){if(imagesLoaded&&flashLoaded)if(home_flash&&home_flash.has("id_home_flash"))backboneObjects.index_view=new IndexView({noivos:noivos,imagem_home:template_imagens_home,flash:home_flash,onload:function(){var self=this;if(0==this.adopted){var element=this.$el;change_content(element,function(){App.current_view=self,self.render()},{template:"flash",noivos:noivos})}else App.current_view=self,this.render()}});else{var root=get_meta("root"),first_page=get_meta("first_page");"store"==first_page?document.location.href="https://sites.icasei.com.br"+root+"/"+first_page:Backbone.history.navigate(root+"/"+first_page,!0)}};template_imagens_home.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){imagesLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),home_flash.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo")},success:function(){flashLoaded=!0,fn.call(this)},error:function(){var root=get_meta("root"),first_page=get_meta("first_page");"store"==first_page?document.location.href="https://sites.icasei.com.br"+root+"/"+first_page:Backbone.history.navigate(root+"/"+first_page,!0)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.home_controller=new HomeController;