var PlacesController=null;!function($){PlacesController=Backbone.Router.extend({routes:{":login/places/:place_id.html":"load",":login/:lang/places/:place_id.html":"loadLang","places/:place_id":"loadPlace",":login/places/:place_id":"load",":lang/places/:place_id":"loadPlaceLang",":login/:lang/places/:place_id":"loadPlaceLangLogin"},initialize:function(){},load:function(login,place_id){this.loadPlace(place_id,login)},loadLang:function(login,lang,place_id){this.loadPlace(place_id,login)},loadPlaceLangLogin:function(login,lang,place_id){this.loadPlace(place_id,login)},loadPlaceLang:function(lang,place_id){this.loadPlace(place_id)},loadPlace:function(place_id,login){load_noivos(login,function(success){if(success){var noivos=this,template_local=new TemplateLocal,menu_noivo=new MenuNoivo,localLoaded=!1,menuLoaded=!1,fn=function(){localLoaded&&menuLoaded&&("v2"==noivos.get("template_html_version")?backboneObjects.places_view=new PlacesViewV2({noivos:noivos,local:template_local,pagina:menu_noivo,onload:function(){if(18==place_id){var root=$("meta[name='root']").attr("content"),lang=$("meta[name='lang']").attr("content");Backbone.history.navigate(root+"/"+lang+"/hints/18",!0)}else{var self=this;if(0==this.adopted){var element=this.$el;change_content(element,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos})}else App.current_view=self,this.render()}}}):backboneObjects.places_view=new PlacesView({noivos:noivos,local:template_local,pagina:menu_noivo,onload:function(){if(18==place_id){var root=$("meta[name='root']").attr("content"),lang=$("meta[name='lang']").attr("content");Backbone.history.navigate(root+"/"+lang+"/hints/18",!0)}else{var self=this;if(0==this.adopted){var element=this.$el;change_content(element,function(){App.current_view=self,self.render()},{template:"front",noivos:noivos})}else App.current_view=self,this.render()}}}))};template_local.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id:place_id},success:function(){localLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}}),menu_noivo.fetch({cache:!1,data:{id_noivo:noivos.get("id_noivo"),id_recurso:parseInt(place_id)},success:function(){menuLoaded=!0,fn.call(this)},error:function(e,xhr){backbone_proccess_error(xhr)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.places_controller=new PlacesController}(jQuery);