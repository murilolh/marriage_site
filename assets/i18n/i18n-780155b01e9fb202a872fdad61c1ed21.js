Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){"use strict";if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>0&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==Infinity&&n!==-Infinity&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);k<len;k++)if(k in t&&t[k]===searchElement)return k;return-1});var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.fallbackRules={},I18n.pluralizationRules={en:function(n){return 0==n?["zero","none","other"]:1==n?"one":"other"}},I18n.getFallbacks=function(locale){if(locale===I18n.defaultLocale)return[];if(!I18n.fallbackRules[locale]){for(var rules=[],components=locale.split("-"),l=1;l<components.length;l++)rules.push(components.slice(0,l).join("-"));rules.push(I18n.defaultLocale),I18n.fallbackRules[locale]=rules}return I18n.fallbackRules[locale]},I18n.isValidNode=function(obj,node,undefined){return null!==obj[node]&&obj[node]!==undefined},I18n.lookup=function(scope,options){options=options||{};var lookupInitialScope=scope,translations=this.prepareOptions(I18n.translations),locale=options.locale||I18n.currentLocale(),messages=translations[locale]||{};options=this.prepareOptions(options);for("object"==typeof scope&&(scope=scope.join(this.defaultSeparator)),options.scope&&(scope=options.scope.toString()+this.defaultSeparator+scope),scope=scope.split(this.defaultSeparator);messages&&scope.length>0;)messages=messages[scope.shift()];if(!messages){if(I18n.fallbacks)for(var fallbacks=this.getFallbacks(locale),fallback=0;fallback<fallbacks.length&&!(messages=I18n.lookup(lookupInitialScope,this.prepareOptions({locale:fallbacks[fallback]},options)));fallbacks++);!messages&&this.isValidNode(options,"defaultValue")&&(messages=options.defaultValue)}return messages},I18n.prepareOptions=function(){for(var opts,options={},count=arguments.length,i=0;i<count;i++)if(opts=arguments[i])for(var key in opts)this.isValidNode(options,key)||(options[key]=opts[key]);return options},I18n.interpolate=function(message,options){options=this.prepareOptions(options);var placeholder,value,name,matches=message.match(this.PLACEHOLDER);if(!matches)return message;for(var i=0;placeholder=matches[i];i++)value=options[name=placeholder.replace(this.PLACEHOLDER,"$1")],this.isValidNode(options,name)||(value="[missing "+placeholder+" value]"),regex=new RegExp(placeholder.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),message=message.replace(regex,value);return message},I18n.translate=function(scope,options){options=this.prepareOptions(options);var translation=this.lookup(scope,options);try{return"object"==typeof translation?"number"==typeof options.count?this.pluralize(options.count,scope,options):translation:this.interpolate(translation,options)}catch(err){return this.missingTranslation(scope)}},I18n.localize=function(scope,value){switch(scope){case"currency":return this.toCurrency(value);case"number":return scope=this.lookup("number.format"),this.toNumber(value,scope);case"percentage":return this.toPercentage(value);default:return scope.match(/^(date|time)/)?this.toTime(scope,value):value.toString()}},I18n.parseDate=function(date){var matches,convertedDate;if("object"==typeof date)return date;if(matches=date.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(var i=1;i<=6;i++)matches[i]=parseInt(matches[i],10)||0;matches[2]-=1,convertedDate=matches[7]?new Date(Date.UTC(matches[1],matches[2],matches[3],matches[4],matches[5],matches[6])):new Date(matches[1],matches[2],matches[3],matches[4],matches[5],matches[6])}else"number"==typeof date?(convertedDate=new Date).setTime(date):(date.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(convertedDate=new Date).setTime(Date.parse(date)));return convertedDate},I18n.toTime=function(scope,d){var date=this.parseDate(d),format=this.lookup(scope);return date.toString().match(/invalid/i)?date.toString():format?this.strftime(date,format):date.toString()},I18n.strftime=function(date,format){var options=this.lookup("date");if(!options)return date.toString();options.meridian=options.meridian||["AM","PM"];var weekDay=date.getDay(),day=date.getDate(),year=date.getFullYear(),month=date.getMonth()+1,hour=date.getHours(),hour12=hour,meridian=hour>11?1:0,secs=date.getSeconds(),mins=date.getMinutes(),offset=date.getTimezoneOffset(),absOffsetHours=Math.floor(Math.abs(offset/60)),absOffsetMinutes=Math.abs(offset)-60*absOffsetHours,timezoneoffset=(offset>0?"-":"+")+(absOffsetHours.toString().length<2?"0"+absOffsetHours:absOffsetHours)+(absOffsetMinutes.toString().length<2?"0"+absOffsetMinutes:absOffsetMinutes);hour12>12?hour12-=12:0===hour12&&(hour12=12);var padding=function(n){var s="0"+n.toString();return s.substr(s.length-2)},f=format;return f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=f.replace("%a",options.abbr_day_names[weekDay])).replace("%A",options.day_names[weekDay])).replace("%b",options.abbr_month_names[month])).replace("%B",options.month_names[month])).replace("%d",padding(day))).replace("%e",day)).replace("%-d",day)).replace("%H",padding(hour))).replace("%-H",hour)).replace("%I",padding(hour12))).replace("%-I",hour12)).replace("%m",padding(month))).replace("%-m",month)).replace("%M",padding(mins))).replace("%-M",mins)).replace("%p",options.meridian[meridian])).replace("%S",padding(secs))).replace("%-S",secs)).replace("%w",weekDay)).replace("%y",padding(year))).replace("%-y",padding(year).replace(/^0+/,""))).replace("%Y",year)).replace("%z",timezoneoffset)},I18n.toNumber=function(number,options){options=this.prepareOptions(options,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var formattedNumber,negative=number<0,parts=Math.abs(number).toFixed(options.precision).toString().split("."),buffer=[];for(number=parts[0],parts[1];number.length>0;)buffer.unshift(number.substr(Math.max(0,number.length-3),3)),number=number.substr(0,number.length-3);if(formattedNumber=buffer.join(options.delimiter),options.precision>0&&(formattedNumber+=options.separator+parts[1]),negative&&(formattedNumber="-"+formattedNumber),options.strip_insignificant_zeros){var regex={separator:new RegExp(options.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};formattedNumber=formattedNumber.replace(regex.zeros,"").replace(regex.separator,"")}return formattedNumber},I18n.toCurrency=function(number,options){return options=this.prepareOptions(options,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),number=this.toNumber(number,options),number=options.format.replace("%u",options.unit).replace("%n",number)},I18n.toHumanSize=function(number,options){for(var unit,precision,kb=1024,size=number,iterations=0;size>=kb&&iterations<4;)size/=kb,iterations+=1;return 0===iterations?(unit=this.t("number.human.storage_units.units.byte",{count:size}),precision=0):(unit=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][iterations]),precision=size-Math.floor(size)==0?0:1),options=this.prepareOptions(options,{precision:precision,format:"%n%u",delimiter:""}),number=this.toNumber(size,options),number=options.format.replace("%u",unit).replace("%n",number)},I18n.toPercentage=function(number,options){return options=this.prepareOptions(options,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),(number=this.toNumber(number,options))+"%"},I18n.pluralizer=function(locale){return pluralizer=this.pluralizationRules[locale],pluralizer!==undefined?pluralizer:this.pluralizationRules.en},I18n.findAndTranslateValidNode=function(keys,translation){for(i=0;i<keys.length;i++)if(key=keys[i],this.isValidNode(translation,key))return translation[key];return null},I18n.pluralize=function(count,scope,options){var translation,message;try{translation=this.lookup(scope,options)}catch(error){}return translation?((options=this.prepareOptions(options)).count=count.toString(),pluralizer=this.pluralizer(this.currentLocale()),key=pluralizer(Math.abs(count)),keys="object"==typeof key&&key instanceof Array?key:[key],null==(message=this.findAndTranslateValidNode(keys,translation))&&(message=this.missingTranslation(scope,keys[0])),this.interpolate(message,options)):this.missingTranslation(scope)},I18n.missingTranslation=function(){for(var message='[missing "'+this.currentLocale(),count=arguments.length,i=0;i<count;i++)message+="."+arguments[i];return message+='" translation]'},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize;